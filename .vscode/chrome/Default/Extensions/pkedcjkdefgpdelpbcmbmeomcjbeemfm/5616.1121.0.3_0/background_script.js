'use strict';window.navigator.userAgent.match(/Chrome\/([0-9]+)/);var vk=function(a,b){this.type=a;this.entryPoint=b};m("castApp.frontEnd.ExtensionMessage",vk,void 0);var wk=function(a){return"urn:x-cast:com.google.cast."+a},xk=wk("tp.connection"),yk=wk("receiver"),zk=wk("media"),Ak=wk("webrtc"),Bk=wk("broadcast"),Ck=Ob({Fia:xk,Gia:wk("tp.heartbeat"),Tha:yk,MEDIA:zk,Pga:wk("media.universalRemote.optIn"),$ia:Ak,Yea:Bk});var Dk=function(a){return"available"==a||"available_rescan"==a};var Ek=function(a,b){this.Dc=this.kg=this.yh=this.Ma=this.ra=null;this.je=new Th(ak.Y().wl(b),a);this.bd={};this.fr={};this.cn=!1};d=Ek.prototype;d.Fh=function(){return this.je};d.Dl=function(){return this.je.friendlyName};d.aaa=function(a){this.Dc=a;return this};d.getId=function(){return this.je.id};d.Eu=function(a){this.je.id=a;return this};d.oO=function(a){this.cn=a;return this};
d.update=function(a){if(this.getId()!=a.getId())return!1;var b=!1;this.je.friendlyName!=a.je.friendlyName&&(this.je.friendlyName=a.je.friendlyName,b=!0);this.yh!=a.yh&&(this.yh=a.yh,b=!0);this.kg!=a.kg&&(this.kg=a.kg,b=!0);this.ra!=a.ra&&(this.ra=a.ra,b=!0);this.Ma!=a.Ma&&(this.Ma=a.Ma,b=!0);return b};d.z$=function(a){this.ra=a;return this};d.Za=function(){return this.Ma};d.Rm=function(a){this.Ma=a;return this};d.X9=function(a){this.yh=a;return this};d.V9=function(a){this.kg=a;return this};
d.Be=function(a){return this.bd[a]||"unknown"};d.bW=function(a){return this.fr[a]||null};d.cq=function(a,b){this.bd[a]=b;this.fr[a]=Date.now();return this};d.XO=function(){return"name = "+this.je.friendlyName+(this.ra?", ip = "+this.ra:"")+(this.Dc?", model = "+this.Dc:"")+", apps = "+JSON.stringify(this.bd)};var Fk=function(a){var b=new Ek(a.je.friendlyName,"");b.je.id=a.je.id;b.ra=a.ra;b.Ma=a.Ma;b.yh=a.yh;b.kg=a.kg;b.Dc=a.Dc;b.bd=a.bd;b.fr=a.fr;b.cn=a.cn;return b};var Gk=function(a,b,c,e,f,g){a=ak.Y().wl(a);this.Ue=new Th(a,b,this.UH(e));this.Dc=c||null;this.wd=e||null;this.ra=f||null;this.Ma=g||null;this.bd={};this.ol=!1},Hk=function(a){if(!a.Dc||!a.ra)return null;var b=new Gk(a.Fh().id,a.Fh().friendlyName,a.Dc,void 0,a.ra,ak.Y().Uk||8009);b.Ue.id=a.Fh().id;b.AB(!0);return b};d=Gk.prototype;d.Ada=function(a){(a=this.update(a.Dl(),a.ra,a.Za(),a.wd))&&this.AB(!1);return a};
d.update=function(a,b,c,e){var f=!1;this.Ue.friendlyName!=a&&(this.Ue.friendlyName=a,f=!0);null!=b&&this.ra!=b&&(this.ra=b,f=!0);null!=c&&this.Ma!=c&&(this.Ma=c,f=!0);null!=e&&this.wd!=e&&(this.wd=e,f=!0);return f};d.Fh=function(){return this.Ue};d.Dl=function(){return this.Ue.friendlyName};d.UH=function(a){return a&1?"cast":a&32?"cast_audio_group":"cast_audio"};d.x9=function(a){this.wd=a;this.Ue.iconType=this.UH(this.wd)};d.getId=function(){return this.Ue.id};
var Ik=function(a){var b=new Gk("",a.friendlyName,a.modelName,a.capabilities,a.ip,a.port);b.Ue.id=a.id;b.AB(a.discoveredByDial);b.bd=a.appStatusMap;for(var c in b.bd)"unavailable"==b.bd[c]&&(b.bd[c]="unavailable_rescan");return b};d=Gk.prototype;d.Za=function(){return this.Ma};d.Be=function(a){return this.bd[a]||"unknown"};d.cq=function(a,b){this.bd[a]=b};
d.XO=function(){return"name = "+this.Ue.friendlyName+(this.ra?", ip = "+this.ra:"")+(this.Dc?", model = "+this.Dc:"")+", capabilities = "+this.wd+", apps = "+JSON.stringify(this.bd)};d.AB=function(a){this.ol=a};var Jk={Hga:0,yga:1},Kk={Via:0,SQ:1,Uha:2},Lk={DIAL:0,Lga:1,Mga:2,Afa:3},Mk={mha:0,TIMEOUT:1,FAILED:2},Nk={qD:0,Qea:1,sfa:2,Wfa:3,mfa:4,Xga:5},Ok={kQ:0,SUCCESS:1},Pk=function(a){Jg("MediaRouter.Cast.Session.Ended",a,Kk)},Qk=function(a){Jg("MediaRouter.Cast.Channel.ConnectResult",a,Ok)},Rk=function(a){Jg("MediaRouter.Cast.Discovery.Type",a,Lk)},Sk=function(a){Jg("MediaRouter.Cast.Session.Fail",a,Mk)};var Tk={serviceType:"_googlecast._tcp.local"},Uk=null,Vk=function(){Uk||(Uk=new Ki(7,"CastMdnsEventListener","mr.cast.SinkDiscoveryService",chrome.mdns.onServiceList,Tk));return Uk},Wk=null,Xk=function(){Wk||(Wk=Ng()?new Ki(9,"CastNetworkListChangedEventListener","mr.cast.SinkDiscoveryService",chrome.networkingPrivate.onNetworkListChanged):new Ki(8,"CastNetworksChangedEventListener","mr.cast.SinkDiscoveryService",chrome.networkingPrivate.onNetworksChanged));return Wk};var Yk=function(a,b){this.nd=b;this.pE=a;this.pE.fa=this.fa.bind(this);this.Xc=new I;this.Xm=new I;this.Zh=new I;this.cK=null;this.hp=this.Uh="";this.kl=null;this.My=this.$o=!1;this.iF=[];this.a=x("mr.cast.SinkDiscoveryService");this.Sr=new Set;this.mf={Qk:0,am:0};this.Wm=this.it=0};ja(Yk,$g);d=Yk.prototype;d.init=function(){yh(this);this.$o&&(this.KJ(),this.jG());jh("mr.cast.SinkDiscoveryService",this)};d.KJ=function(){this.a.info("Start listening to network changes");Xk().addListener()};
d.start=function(){var a=Date.now(),b=Vk();if(b.tj()){if(6E4>a-this.cK)return;this.a.info("Forcing mdns discovery");this.QV()}else this.a.info("Adding mdns listener"),b.addListener();this.cK=a};d.QV=function(){chrome.mdns.forceDiscovery(p);var a=Vk();a.removeListener();a.addListener()};
d.handleEvent=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];if(a==chrome.mdns.onServiceList)this.LL.apply(this,[].concat(ka(c)));else if(a==chrome.networkingPrivate.onNetworksChanged||a==chrome.networkingPrivate.onNetworkListChanged)this.jG();else throw Error("Unhandled event");};
d.kU=function(a){if(-1==a.serviceName.indexOf("._googlecast."))return null;var b={};a.serviceData.forEach(function(a){0==a.search(/[a-z]{2}=.+/)&&(b[a.substring(0,2)]=a.substring(3))});var c=b.id;if(!c)return this.a.l("Missing ID"),null;ak.Y().wl(c);var e=Number(a.serviceHostPort.substring(a.serviceHostPort.indexOf(":")+1));if(isNaN(e)||0>e||65535<e)return this.a.l("Missing or invalid port"),null;var f=b.fn;if(!f||!a.ipAddress)return this.a.l("Missing friendly name or IP address"),null;var g=Number(b.ca);
return new Gk(c,f,b.md||"",isNaN(g)?0:g,a.ipAddress,e)};d.refresh=function(){this.a.o("Executing forceDiscovery.");chrome.mdns.forceDiscovery(p)};d.LL=function(a){var b=this;this.a.info("Registering "+a.length+" devices");0!=this.Wm&&(clearTimeout(this.Wm),this.Wm=0);a=this.lU(a).map(function(a){return b.Kw(a,!0)});ii(a).then(function(){b.mf={Qk:b.xy(),am:b.hY()};b.D2()})};d.D2=function(){var a=this;0!=this.Wm||36E5>Date.now()-this.it||(this.Wm=setTimeout(function(){return a.TU()},5E3))};
d.TU=function(){var a=this.mf;Kg("MediaRouter.Cast.Discovery.KnownDevicesCount",a.am);Kg("MediaRouter.Cast.Discovery.ConnectedDevicesCount",a.Qk);this.it=Date.now();this.Wm=0};d.hY=function(){var a=this,b=this.Sr.size;be(this.kj(),function(c){a.Sr.has(c.getId())||b++});return b};d.g7=function(a){this.LL(a);this.iF=a};
d.Kw=function(a,b){var c=this;if(this.Zh.Aa(a.getId()))return Promise.resolve();this.Zh.set(a.getId(),a);return this.Tn(a).then(function(e){e?(e=c.Xc.get(a.getId()),b&&(e?e.ol&&Rk(3):Rk(1)),c.Hn(a)):(c.a.info("Inaccessible sink: "+a.getId()),c.Zj(a.getId()));c.Zh.remove(a.getId())})};d.w1=function(a){return void 0!=this.iF.find(function(b){return b.ipAddress==a.ipAddress})};
d.lU=function(a){var b=this,c=[];this.Sr.clear();a.forEach(function(a){if(!b.w1(a)&&(a=b.kU(a))){var e=a.getId();b.Sr.add(e);if(b.Zh.Aa(e)){var g=b.Zh.get(e);if(g.ra==a.ra&&g.Za()==a.Za()){b.a.info("Sink has pending connection "+e);return}b.a.l("Pending sink changed ip "+e);b.Zh.remove(e)}(e=b.Xc.get(e))?e.Ada(a)&&b.nd.Hd(e):c.push(a)}});return c};
d.uF=function(a){var b=this.Xc.get(a.getId()),c=null,e=a.ra,f=a.Za();null!=e&&null!=f&&(c=this.Xm.get(e+":"+f));if(b&&!c){var g=a.ra,k=a.Za();g&&k&&this.Xm.remove(g+":"+k)}c&&!b&&this.Xc.remove(c.getId());this.Xc.set(a.getId(),a);null!=e&&null!=f&&this.Xm.set(e+":"+f,a)};d.Hn=function(a){this.a.info("Adding sink "+a.getId());this.uF(a);this.$o||(this.$o=!0,this.KJ());this.nd.Nj(a);ak.Y().Vj=new Zj(a.Dc,a.ra)};d.Pz=function(a){this.a.info("Channel error for sink "+a);this.Zj(a)};
d.Zj=function(a){var b=this.Xc.get(a);if(b){this.a.info("Removing sink "+a);this.Xc.remove(a);a=b.ra;var c=b.Za();null!=a&&null!=c&&this.Xm.remove(a+":"+c);this.nd.Ot(b)}};d.q7=function(){var a=this.Xc.G();this.Xc.clear();this.Xm.clear();a.forEach(this.nd.Ot,this.nd)};d.Tn=function(a){this.a.o("Checking access to "+a.getId());return this.pE.bl(a).then(function(b){if(a.ol){var c=4;b.audioOnly||(c|=1);a.x9(c)}return!0},function(){return!1})};
d.Zt=function(){var a=this;this.a.info("Pruning inactive sinks.");be(this.kj(),function(b){a.Zh.set(b.getId(),b);a.Tn(b).then(function(c){c||a.Zj(b.getId());a.Zh.remove(b.getId())})})};d.fa=function(a){return this.Xc.get(a,null)};d.e_=function(a,b){return this.Xm.get(a+":"+b)};d.f_=function(a){var b=[];be(this.kj(),function(c){Dk(c.Be(a))&&b.push(c)});return b};d.kj=function(){return this.Xc.Dy()};d.xy=function(){return this.Xc.W()};d.Hd=function(a){this.nd.Hd(a)};d.fe=function(){return this.Xc.G()};
d.ma=function(){return"cast.SinkDiscoveryService"};d.getData=function(){var a=this,b={};be(this.Xc.fH(),function(c){var e;e=a.Xc.get(c);e={id:e.getId(),ip:e.ra,port:e.Za(),friendlyName:e.Dl(),modelName:e.Dc,capabilities:e.wd,discoveredByDial:e.ol,appStatusMap:e.bd};b[c]=e});return[new Zk(b,this.hp,this.mf),new $k(this.$o,this.it)]};
d.$a=function(){var a=vh(this);a&&3==a.version&&(this.hp=a.networkIds,this.mf=a.deviceCounts,this.i1(a.sinkMap));if(a=wh(this))this.$o=a.hasSavedSinks,this.it=a.lastSinkCountMetricRecordTime||0};d.i1=function(a){this.My=0<Object.keys(a).length;for(var b in a){var c=Ik(a[b]);this.fa(c.getId())||this.uF(c)}this.Zt()};d.p2=function(a){this.My=0<Object.keys(a).length;for(var b in a){var c=Ik(a[b]);this.fa(c.getId())||this.Kw(c,!1)}};
d.jG=function(){var a=this;this.a.info("Fetching networks state");this.kl&&Gh(this.kl);chrome.networkingPrivate.getNetworks({networkType:"All",visible:!0,configured:!0},function(b){for(var c=[],e=0;e<b.length;e++)"Connected"==b[e].ConnectionState&&c.push(b[e].GUID);a.xda(c.sort().join(","))})};
d.xda=function(a){this.a.info(function(){return"Update current network "+al(a)});a!=this.Uh&&(this.kl&&(xh.delete(this.kl.ma()),this.kl=null),a?(this.hp&&a!=this.hp?this.q7():this.Zt(),this.hp=this.Uh=a,this.kl=new bl(this,this.Uh)):this.Uh="")};
var al=function(a){for(var b=0,c=0;c<a.length;c++)b+=a.charCodeAt(c);return b},Zk=function(a,b,c){this.sinkMap=a;this.networkIds=b;this.deviceCounts=c;this.version=3},$k=function(a,b){this.hasSavedSinks=a;this.lastSinkCountMetricRecordTime=b},bl=function(a,b){this.Nd=a;this.Uh=b;yh(this)};bl.prototype.ma=function(){return"cast.NetworkSink."+this.Uh};
bl.prototype.getData=function(){var a=this,b=null,c=this.Nd.getData();c&&(this.Nd.My||0<this.Nd.xy())&&(b=c[0]);this.Nd.a.info(function(){return"Saving sink data for network "+al(a.Uh)});return[null,b]};bl.prototype.$a=function(){var a=this;this.Nd.a.info(function(){return"Restoring sink data for network "+al(a.Uh)});var b=wh(this);b&&3==b.version&&this.Nd.p2(b.sinkMap)};var cl={STOP_MEDIA:"STOP",MEDIA_SET_VOLUME:"SET_VOLUME",MEDIA_GET_STATUS:"GET_STATUS"};var dl=function(){this.type="GET_STATUS";this.requestId=0};var el=function(a,b,c){this.type="APPLICATION_BROADCAST";this.requestId=0;this.appIds=a;this.namespace=b;this.message=c};var fl=function(a){this.type="LAUNCH";this.requestId=0;this.appId=a;this.language=null};var gl=function(a){this.type="STOP";this.requestId=0;this.sessionId=a||null};var hl=function(a,b){this.requestId=a;this.eda=b;this.VO=null};hl.prototype.Sz=function(){};var il=function(){this.bc=new I};il.prototype.FD=function(a){var b=this;this.bc.set(a.requestId,a);a.VO=setTimeout(function(){return b.P4(a)},a.eda)};il.prototype.Rp=function(a){var b=this.bc.get(a);if(!b)return null;clearTimeout(b.VO);this.bc.remove(a);return b};il.prototype.gj=function(a){return this.bc.get(a,null)};il.prototype.P4=function(a){this.bc.remove(a.requestId);a.Sz()};var jl=function(a,b){this.dd=a;this.Md=b;this.Rj=new il;this.aM=new Qh("cast.RequestIdGenerator")};d=jl.prototype;d.init=function(){this.aM.DF()};d.GD=function(a,b,c){var e=this.aM.zs();a.requestId=e;a=new xc;b=new kl(e,a,t(b)&&0<b?b:6E5,c);this.Rj.FD(b);return b};d.TA=function(a){this.Rj.Rp(a.requestId)};d.Rp=function(a){return this.Rj.Rp(a)};
d.sendRequest=function(a,b,c,e,f,g){var k=this;if(!Ck.hasOwnProperty(c))return Promise.reject(Error("Custom namespace is not supported"));var n=this.GD(a,l(e)?e:3E3,f),q=n.sb;this.dd.uu(b,c,a,f||this.Md,g).then(null,function(){k.TA(n);q.reject(ll)});return q.promise};d.sendMessage=function(a,b,c,e,f,g){var k=this,n=this.GD(a,l(e)?e:3E3,f),q=n.sb;this.dd.uu(b,c,a,f||this.Md,g).then(function(){k.TA(n);q.resolve(!0)},function(){k.TA(n);q.reject(ll)});return q.promise};
d.N7=function(a,b){var c=new fl(a.appId);c.language=a.language?a.language:chrome.i18n.getUILanguage?chrome.i18n.getUILanguage():chrome.runtime.getManifest().default_locale;return this.sendRequest(c,b,yk,a.requestSessionTimeout)};d.O7=function(a,b){return this.sendRequest(new gl(a),b,yk)};d.B8=function(a,b){return this.sendMessage(a,b,Bk)};var ml=Error("Timeout"),ll=Error("Failed to send message"),kl=function(a,b,c,e){hl.call(this,a,c);this.sb=b;this.sourceId=e};ja(kl,hl);kl.prototype.Sz=function(){this.sb.reject(ml)};var nl=function(a,b){this.type="cast_app";this.originId=window["castApp.eventPage.Message.OriginID"]||void 0;this.subtype=a;this.devices=b;this.logRecord=this.deviceJustSetUp=void 0};m("castApp.eventPage.Message",nl,void 0);var ol=function(a,b,c){this.ipAddress=a;this.appId=b;this.sessionId=c};nl.DeviceData=ol;nl.DeviceJustSetUp=function(a,b,c,e){this.ipAddress=a;this.name=b;this.udn=c;this.modelName=e};nl.DeviceCapabilities=function(){};
nl.LogRecord=function(a,b,c,e){this.levelValue=a;this.msg=b;this.loggerName=c;this.time=e};var pl=function(a,b){this.Jc=a;this.xd=b;this.nl=new I;this.ml=new ne;this.wJ=0;this.Q2=new I("serviceCheck",this.z0.bind(this),"startDeviceMonitor",this.M0.bind(this),"releaseDeviceMonitor",this.t0.bind(this),"deviceJustSetUp",this.c0.bind(this),"logRecord",this.j0.bind(this));chrome.runtime.onMessage.addListener(this.o0.bind(this));chrome.runtime.onMessageExternal.addListener(this.f0.bind(this));this.Mf("serviceReady")};d=pl.prototype;d.a=x("castApp.eventPage.Service");d.xQ=3E4;
d.F0=function(){if(this.vE()){var a=new ne;be(this.Jc.kj(),function(b){var c=b.ra;a.add(c);this.nl.Aa(c)||this.xd.sendRequest(new dl,b,yk)}.bind(this));var b=!1;this.nl.pb().forEach(function(c){a.contains(c)||(this.nl.remove(c),b=!0)}.bind(this));b&&this.tw()}};
d.Y_=function(a,b){if(this.vE()&&Ck.hasOwnProperty(b.namespace_)&&(a=a.ra)&&(b=JSON.parse(b.data),"RECEIVER_STATUS"===b.type)){var c=b.status&&b.status.applications&&b.status.applications[0],e=b=null;c&&(c.appId&&(b=c.appId),c.sessionId&&(e=c.sessionId));c=this.nl.get(a);this.nl.set(a,new ol(a,b,e));c&&c.appId===b||this.tw()}};
d.vE=function(){if(0===this.ml.W())return!1;var a=v();a-this.wJ>this.xQ&&(this.wJ=a,chrome.tabs.query({url:["chrome://cast/*","chrome-extension://"+chrome.runtime.id+"/cast_setup/*"]},function(a){0===a.length?(this.a.info("No tabs found. Clearing device monitor clients."),this.ml.clear()):this.a.info(function(){return"Tab check found active tabs: "+a.map(function(a){return a.id})})}.bind(this)));a=this.ml.W();this.a.info("Monitor client count: "+a);return 0<a};
d.o0=function(a,b,c){if("object"!==typeof a||"cast_app"!==a.type)return!1;var e=this.Q2.get(a.subtype);if(!e)return!1;if(!a.originId)return z("Missing origin ID in the incoming message."),!1;try{var f=e(a,b,c);f&&c(f)}catch(g){this.a.error("Error while handling request",g)}return!1};d.Mf=function(a,b){var c=new nl(a,b);this.a.o(function(){return"Sending message: "+JSON.stringify(c)});chrome.runtime.sendMessage(c)};d.z0=function(){this.Mf("serviceReady")};
d.M0=function(a){this.ml.contains(a.originId)?this.a.info("Client: "+a.originId+"already registered, dispatching current device list."):(this.a.info("Registering monitor client: "+a.originId),this.ml.add(a.originId));this.tw();this.b7()};d.t0=function(a){this.a.info("Unregistering monitor client: "+a.originId);this.ml.remove(a.originId)};
d.c0=function(a){a=a.deviceJustSetUp;var b=a.udn.replace(/-/g,"").toLowerCase(),c;a.capabilities&&(c=(a.capabilities.audioOutSupported?4:0)|(a.capabilities.videoOutSupported?1:0));c=new Gk(b,a.name,a.modelName,c,a.ipAddress,ak.Y().Uk||8009);this.Jc.Kw(c,!0)};d.j0=function(a){a=a.logRecord;Ea({level:Ha(a.levelValue),m:a.loggerName,time:a.time,message:a.msg})};d.tw=function(){var a=this.nl.G();this.Mf("devices",a)};
d.b7=function(){this.Jc.refresh();this.Jc.fe().forEach(function(a){this.xd.sendRequest(new dl,a,yk)}.bind(this))};d.f0=function(a,b,c){switch(a.type){case "handshake":c(new vk("handshake"));break;case "launch":b=b.tab&&t(b.tab.id)?b.tab.id:null,null===b||"setup"!==a.entryPoint&&"offers"!==a.entryPoint&&"devices"!==a.entryPoint||chrome.tabs.update(b,{url:"chrome://cast#"+a.entryPoint})}};chrome.cast.Xf={CUSTOM_CONTROLLER_SCOPED:"custom_controller_scoped",TAB_AND_ORIGIN_SCOPED:"tab_and_origin_scoped",ORIGIN_SCOPED:"origin_scoped",PAGE_SCOPED:"page_scoped"};m("chrome.cast.AutoJoinPolicy",chrome.cast.Xf,void 0);chrome.cast.Oq={CREATE_SESSION:"create_session",CAST_THIS_TAB:"cast_this_tab"};m("chrome.cast.DefaultActionPolicy",chrome.cast.Oq,void 0);chrome.cast.gh={VIDEO_OUT:"video_out",AUDIO_OUT:"audio_out",VIDEO_IN:"video_in",AUDIO_IN:"audio_in",MULTIZONE_GROUP:"multizone_group"};
m("chrome.cast.Capability",chrome.cast.gh,void 0);chrome.cast.Yf={CANCEL:"cancel",TIMEOUT:"timeout",API_NOT_INITIALIZED:"api_not_initialized",INVALID_PARAMETER:"invalid_parameter",EXTENSION_NOT_COMPATIBLE:"extension_not_compatible",EXTENSION_MISSING:"extension_missing",RECEIVER_UNAVAILABLE:"receiver_unavailable",SESSION_ERROR:"session_error",CHANNEL_ERROR:"channel_error",LOAD_MEDIA_FAILED:"load_media_failed"};m("chrome.cast.ErrorCode",chrome.cast.Yf,void 0);chrome.cast.TQ={AVAILABLE:"available",UNAVAILABLE:"unavailable"};
m("chrome.cast.ReceiverAvailability",chrome.cast.TQ,void 0);chrome.cast.fR={CHROME:"chrome",IOS:"ios",ANDROID:"android"};m("chrome.cast.SenderPlatform",chrome.cast.fR,void 0);chrome.cast.Qq={CAST:"cast",DIAL:"dial",HANGOUT:"hangout",CUSTOM:"custom"};m("chrome.cast.ReceiverType",chrome.cast.Qq,void 0);chrome.cast.fQ={RUNNING:"running",STOPPED:"stopped",ERROR:"error"};m("chrome.cast.DialAppState",chrome.cast.fQ,void 0);chrome.cast.Fn={CAST:"cast",STOP:"stop"};
m("chrome.cast.ReceiverAction",chrome.cast.Fn,void 0);chrome.cast.nD={CONNECTED:"connected",DISCONNECTED:"disconnected",STOPPED:"stopped"};m("chrome.cast.SessionStatus",chrome.cast.nD,void 0);chrome.cast.YP=function(a,b,c,e,f){this.sessionRequest=a;this.sessionListener=b;this.receiverListener=c;this.autoJoinPolicy=e||chrome.cast.Xf.TAB_AND_ORIGIN_SCOPED;this.defaultActionPolicy=f||chrome.cast.Oq.CREATE_SESSION;this.customDialLaunchCallback=null;this.invisibleSender=!1;this.additionalSessionRequests=[]};m("chrome.cast.ApiConfig",chrome.cast.YP,void 0);chrome.cast.hQ=function(a,b){this.appName=a;this.launchParameter=b||null};m("chrome.cast.DialRequest",chrome.cast.hQ,void 0);
chrome.cast.eD=function(a,b,c){this.receiver=a;this.appState=b;this.extraData=c||null};m("chrome.cast.DialLaunchData",chrome.cast.eD,void 0);chrome.cast.gQ=function(a,b){this.doLaunch=a;this.launchParameter=b||null};m("chrome.cast.DialLaunchResponse",chrome.cast.gQ,void 0);chrome.cast.mD=function(a,b,c){this.appId=a;this.capabilities=qa(b)?b:[chrome.cast.gh.VIDEO_OUT,chrome.cast.gh.AUDIO_OUT];this.requestSessionTimeout=c||chrome.cast.timeout.requestSession;this.dialRequest=this.language=null};
m("chrome.cast.SessionRequest",chrome.cast.mD,void 0);
chrome.cast.Lv=function(a,b,c,e){this.label=a;a=b;Va.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(Pa,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(Qa,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(Ra,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(Sa,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(Ta,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(Ua,"&#0;")));this.friendlyName=a;this.capabilities=c||[];this.volume=e||null;this.receiverType=chrome.cast.Qq.CAST;this.displayStatus=this.isActiveInput=null};
m("chrome.cast.Receiver",chrome.cast.Lv,void 0);chrome.cast.UQ=function(a,b){this.statusText=a;this.appImages=b;this.showStop=null};m("chrome.cast.ReceiverDisplayStatus",chrome.cast.UQ,void 0);chrome.cast.pD=function(){this.requestSession=6E4;this.sendCustomMessage=this.setReceiverVolume=this.stopSession=this.leaveSession=3E3};m("chrome.cast.Timeout",chrome.cast.pD,void 0);chrome.cast.timeout=new chrome.cast.pD;m("chrome.cast.timeout",chrome.cast.timeout,void 0);chrome.cast.XP="auto-join";
chrome.cast.jD="cast-session_";chrome.cast.media.En={PAUSE:"pause",SEEK:"seek",STREAM_VOLUME:"stream_volume",STREAM_MUTE:"stream_mute"};m("chrome.cast.media.MediaCommand",chrome.cast.media.En,void 0);chrome.cast.media.ve={GENERIC:0,MOVIE:1,TV_SHOW:2,MUSIC_TRACK:3,PHOTO:4};m("chrome.cast.media.MetadataType",chrome.cast.media.ve,void 0);chrome.cast.media.Pq={IDLE:"IDLE",PLAYING:"PLAYING",PAUSED:"PAUSED",BUFFERING:"BUFFERING"};m("chrome.cast.media.PlayerState",chrome.cast.media.Pq,void 0);
chrome.cast.media.Mv={OFF:"REPEAT_OFF",ALL:"REPEAT_ALL",SINGLE:"REPEAT_SINGLE",ALL_AND_SHUFFLE:"REPEAT_ALL_AND_SHUFFLE"};m("chrome.cast.media.RepeatMode",chrome.cast.media.Mv,void 0);chrome.cast.media.VQ={PLAYBACK_START:"PLAYBACK_START",PLAYBACK_PAUSE:"PLAYBACK_PAUSE"};m("chrome.cast.media.ResumeState",chrome.cast.media.VQ,void 0);chrome.cast.media.oD={BUFFERED:"BUFFERED",LIVE:"LIVE",OTHER:"OTHER"};m("chrome.cast.media.StreamType",chrome.cast.media.oD,void 0);
chrome.cast.media.pQ={CANCELLED:"CANCELLED",INTERRUPTED:"INTERRUPTED",FINISHED:"FINISHED",ERROR:"ERROR"};m("chrome.cast.media.IdleReason",chrome.cast.media.pQ,void 0);chrome.cast.media.rR={TEXT:"TEXT",AUDIO:"AUDIO",VIDEO:"VIDEO"};m("chrome.cast.media.TrackType",chrome.cast.media.rR,void 0);chrome.cast.media.oR={SUBTITLES:"SUBTITLES",CAPTIONS:"CAPTIONS",DESCRIPTIONS:"DESCRIPTIONS",CHAPTERS:"CHAPTERS",METADATA:"METADATA"};m("chrome.cast.media.TextTrackType",chrome.cast.media.oR,void 0);
chrome.cast.media.kR={NONE:"NONE",OUTLINE:"OUTLINE",DROP_SHADOW:"DROP_SHADOW",RAISED:"RAISED",DEPRESSED:"DEPRESSED"};m("chrome.cast.media.TextTrackEdgeType",chrome.cast.media.kR,void 0);chrome.cast.media.pR={NONE:"NONE",NORMAL:"NORMAL",ROUNDED_CORNERS:"ROUNDED_CORNERS"};m("chrome.cast.media.TextTrackWindowType",chrome.cast.media.pR,void 0);
chrome.cast.media.lR={SANS_SERIF:"SANS_SERIF",MONOSPACED_SANS_SERIF:"MONOSPACED_SANS_SERIF",SERIF:"SERIF",MONOSPACED_SERIF:"MONOSPACED_SERIF",CASUAL:"CASUAL",CURSIVE:"CURSIVE",SMALL_CAPITALS:"SMALL_CAPITALS"};m("chrome.cast.media.TextTrackFontGenericFamily",chrome.cast.media.lR,void 0);chrome.cast.media.mR={NORMAL:"NORMAL",BOLD:"BOLD",BOLD_ITALIC:"BOLD_ITALIC",ITALIC:"ITALIC"};m("chrome.cast.media.TextTrackFontStyle",chrome.cast.media.mR,void 0);chrome.cast.media.mQ=function(){this.customData=null};m("chrome.cast.media.GetStatusRequest",chrome.cast.media.mQ,void 0);chrome.cast.media.GQ=function(){this.customData=null};m("chrome.cast.media.PauseRequest",chrome.cast.media.GQ,void 0);chrome.cast.media.IQ=function(){this.customData=null};m("chrome.cast.media.PlayRequest",chrome.cast.media.IQ,void 0);chrome.cast.media.dR=function(){this.customData=this.resumeState=this.currentTime=null};m("chrome.cast.media.SeekRequest",chrome.cast.media.dR,void 0);
chrome.cast.media.gR=function(){this.customData=null};m("chrome.cast.media.StopRequest",chrome.cast.media.gR,void 0);chrome.cast.media.uR=function(a){this.volume=a;this.customData=null};m("chrome.cast.media.VolumeRequest",chrome.cast.media.uR,void 0);chrome.cast.media.sQ=function(a){this.type="LOAD";this.requestId=0;this.sessionId=null;this.media=a;this.activeTrackIds=null;this.autoplay=!0;this.customData=this.currentTime=null};m("chrome.cast.media.LoadRequest",chrome.cast.media.sQ,void 0);
chrome.cast.media.Sha=function(a){this.type="PRECACHE";this.requestId=0;this.data=a};chrome.cast.media.jQ=function(a,b){this.requestId=0;this.activeTrackIds=a||null;this.textTrackStyle=b||null};m("chrome.cast.media.EditTracksInfoRequest",chrome.cast.media.jQ,void 0);chrome.cast.media.lQ=function(){this.metadataType=this.type=chrome.cast.media.ve.GENERIC;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.title=null};m("chrome.cast.media.GenericMediaMetadata",chrome.cast.media.lQ,void 0);
chrome.cast.media.zQ=function(){this.metadataType=this.type=chrome.cast.media.ve.MOVIE;this.releaseDate=this.releaseYear=this.images=this.subtitle=this.studio=this.title=null};m("chrome.cast.media.MovieMediaMetadata",chrome.cast.media.zQ,void 0);chrome.cast.media.sR=function(){this.metadataType=this.type=chrome.cast.media.ve.TV_SHOW;this.originalAirdate=this.releaseYear=this.images=this.episode=this.episodeNumber=this.season=this.seasonNumber=this.episodeTitle=this.title=this.seriesTitle=null};
m("chrome.cast.media.TvShowMediaMetadata",chrome.cast.media.sR,void 0);chrome.cast.media.AQ=function(){this.metadataType=this.type=chrome.cast.media.ve.MUSIC_TRACK;this.releaseDate=this.releaseYear=this.images=this.discNumber=this.trackNumber=this.artistName=this.songName=this.composer=this.artist=this.albumArtist=this.title=this.albumName=null};m("chrome.cast.media.MusicTrackMediaMetadata",chrome.cast.media.AQ,void 0);
chrome.cast.media.HQ=function(){this.metadataType=this.type=chrome.cast.media.ve.PHOTO;this.creationDateTime=this.height=this.width=this.longitude=this.latitude=this.images=this.location=this.artist=this.title=null};m("chrome.cast.media.PhotoMediaMetadata",chrome.cast.media.HQ,void 0);chrome.cast.media.yQ=function(a,b){this.contentId=a;this.streamType=chrome.cast.media.oD.BUFFERED;this.contentType=b;this.customData=this.textTrackStyle=this.tracks=this.duration=this.metadata=null};
m("chrome.cast.media.MediaInfo",chrome.cast.media.yQ,void 0);chrome.cast.media.KQ=function(a){this.itemId=null;this.media=a;this.autoplay=!0;this.startTime=0;this.playbackDuration=null;this.preloadTime=0;this.customData=this.activeTrackIds=null};m("chrome.cast.media.QueueItem",chrome.cast.media.KQ,void 0);chrome.cast.media.dQ="CC1AD845";m("chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID",chrome.cast.media.dQ,void 0);chrome.cast.media.timeout={};
m("chrome.cast.media.timeout",chrome.cast.media.timeout,void 0);chrome.cast.media.timeout.load=0;chrome.cast.media.timeout.load=chrome.cast.media.timeout.load;chrome.cast.media.timeout.Sa=0;chrome.cast.media.timeout.getStatus=chrome.cast.media.timeout.Sa;chrome.cast.media.timeout.play=0;chrome.cast.media.timeout.play=chrome.cast.media.timeout.play;chrome.cast.media.timeout.pause=0;chrome.cast.media.timeout.pause=chrome.cast.media.timeout.pause;chrome.cast.media.timeout.seek=0;
chrome.cast.media.timeout.seek=chrome.cast.media.timeout.seek;chrome.cast.media.timeout.stop=0;chrome.cast.media.timeout.stop=chrome.cast.media.timeout.stop;chrome.cast.media.timeout.Tm=0;chrome.cast.media.timeout.setVolume=chrome.cast.media.timeout.Tm;chrome.cast.media.timeout.mx=0;chrome.cast.media.timeout.editTracksInfo=chrome.cast.media.timeout.mx;chrome.cast.media.timeout.B6=0;chrome.cast.media.timeout.queue=chrome.cast.media.timeout.B6;
chrome.cast.media.qR=function(a,b){this.trackId=a;this.trackContentType=this.trackContentId=null;this.type=b;this.customData=this.subtype=this.language=this.name=null};m("chrome.cast.media.Track",chrome.cast.media.qR,void 0);chrome.cast.media.nR=function(){this.customData=this.fontStyle=this.fontGenericFamily=this.fontFamily=this.fontScale=this.windowRoundedCornerRadius=this.windowColor=this.windowType=this.edgeColor=this.edgeType=this.backgroundColor=this.foregroundColor=null};
m("chrome.cast.media.TextTrackStyle",chrome.cast.media.nR,void 0);chrome.cast.media.MQ=function(a){this.type="QUEUE_LOAD";this.sessionId=this.requestId=null;this.items=a;this.startIndex=0;this.repeatMode=chrome.cast.media.Mv.OFF;this.customData=null};m("chrome.cast.media.QueueLoadRequest",chrome.cast.media.MQ,void 0);chrome.cast.media.JQ=function(a){this.type="QUEUE_INSERT";this.sessionId=this.requestId=null;this.items=a;this.customData=this.insertBefore=null};
m("chrome.cast.media.QueueInsertItemsRequest",chrome.cast.media.JQ,void 0);chrome.cast.media.QQ=function(a){this.type="QUEUE_UPDATE";this.sessionId=this.requestId=null;this.items=a;this.customData=null};m("chrome.cast.media.QueueUpdateItemsRequest",chrome.cast.media.QQ,void 0);chrome.cast.media.LQ=function(){this.type="QUEUE_UPDATE";this.customData=this.jump=this.currentItemId=this.sessionId=this.requestId=null};m("chrome.cast.media.QueueJumpRequest",chrome.cast.media.LQ,void 0);
chrome.cast.media.PQ=function(){this.type="QUEUE_UPDATE";this.customData=this.repeatMode=this.sessionId=this.requestId=null};m("chrome.cast.media.QueueSetPropertiesRequest",chrome.cast.media.PQ,void 0);chrome.cast.media.NQ=function(a){this.type="QUEUE_REMOVE";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=null};m("chrome.cast.media.QueueRemoveItemsRequest",chrome.cast.media.NQ,void 0);
chrome.cast.media.OQ=function(a){this.type="QUEUE_REORDER";this.sessionId=this.requestId=null;this.itemIds=a;this.customData=this.insertBefore=null};m("chrome.cast.media.QueueReorderItemsRequest",chrome.cast.media.OQ,void 0);chrome.cast.media.u=function(a,b){this.sessionId=a;this.mediaSessionId=b;this.media=null;this.playbackRate=1;this.playerState=chrome.cast.media.Pq.IDLE;this.currentTime=0;this.oJ=-1;this.supportedMediaCommands=[];this.volume=new chrome.cast.Volume;this.items=this.preloadedItemId=this.loadingItemId=this.currentItemId=this.customData=this.activeTrackIds=this.idleReason=null;this.repeatMode=chrome.cast.media.Mv.OFF};m("chrome.cast.media.Media",chrome.cast.media.u,void 0);
chrome.cast.media.u.prototype.Sa=function(){};chrome.cast.media.u.prototype.getStatus=chrome.cast.media.u.prototype.Sa;chrome.cast.media.u.prototype.play=function(){};chrome.cast.media.u.prototype.play=chrome.cast.media.u.prototype.play;chrome.cast.media.u.prototype.d6=function(){};chrome.cast.media.u.prototype.playWithContext=chrome.cast.media.u.prototype.d6;chrome.cast.media.u.prototype.pause=function(){};chrome.cast.media.u.prototype.pause=chrome.cast.media.u.prototype.pause;
chrome.cast.media.u.prototype.Y5=function(){};chrome.cast.media.u.prototype.pauseWithContext=chrome.cast.media.u.prototype.Y5;chrome.cast.media.u.prototype.seek=function(){};chrome.cast.media.u.prototype.seek=chrome.cast.media.u.prototype.seek;chrome.cast.media.u.prototype.stop=function(){};chrome.cast.media.u.prototype.stop=chrome.cast.media.u.prototype.stop;chrome.cast.media.u.prototype.Tm=function(){};chrome.cast.media.u.prototype.setVolume=chrome.cast.media.u.prototype.Tm;
chrome.cast.media.u.prototype.mx=function(){};chrome.cast.media.u.prototype.editTracksInfo=chrome.cast.media.u.prototype.mx;chrome.cast.media.u.prototype.E6=function(){};chrome.cast.media.u.prototype.queueInsertItems=chrome.cast.media.u.prototype.E6;chrome.cast.media.u.prototype.C6=function(){};chrome.cast.media.u.prototype.queueAppendItem=chrome.cast.media.u.prototype.C6;chrome.cast.media.u.prototype.O6=function(){};chrome.cast.media.u.prototype.queueUpdateItems=chrome.cast.media.u.prototype.O6;
chrome.cast.media.u.prototype.J6=function(){};chrome.cast.media.u.prototype.queuePrev=chrome.cast.media.u.prototype.J6;chrome.cast.media.u.prototype.I6=function(){};chrome.cast.media.u.prototype.queueNext=chrome.cast.media.u.prototype.I6;chrome.cast.media.u.prototype.F6=function(a){this.$x(a)};chrome.cast.media.u.prototype.queueJumpToItem=chrome.cast.media.u.prototype.F6;chrome.cast.media.u.prototype.N6=function(){};chrome.cast.media.u.prototype.queueSetRepeatMode=chrome.cast.media.u.prototype.N6;
chrome.cast.media.u.prototype.L6=function(){};chrome.cast.media.u.prototype.queueRemoveItems=chrome.cast.media.u.prototype.L6;chrome.cast.media.u.prototype.K6=function(a){this.$x(a)};chrome.cast.media.u.prototype.queueRemoveItem=chrome.cast.media.u.prototype.K6;chrome.cast.media.u.prototype.M6=function(){};chrome.cast.media.u.prototype.queueReorderItems=chrome.cast.media.u.prototype.M6;
chrome.cast.media.u.prototype.H6=function(a,b,c,e){a=this.$x(a);0>a||(0>b?e&&e(new chrome.cast.Error(chrome.cast.Yf.INVALID_PARAMETER)):a==b&&c&&c())};chrome.cast.media.u.prototype.queueMoveItemToNewIndex=chrome.cast.media.u.prototype.H6;chrome.cast.media.u.prototype.Vca=function(a){return-1<this.supportedMediaCommands.indexOf(a)};chrome.cast.media.u.prototype.supportsCommand=chrome.cast.media.u.prototype.Vca;
chrome.cast.media.u.prototype.yX=function(){if(this.playerState==chrome.cast.media.Pq.PLAYING&&0<=this.oJ){var a=this.currentTime+(Date.now()-this.oJ)/1E3*this.playbackRate;this.media&&null!=this.media.duration&&a>this.media.duration&&(a=this.media.duration);0>a&&(a=0);return a}return this.currentTime};chrome.cast.media.u.prototype.getEstimatedTime=chrome.cast.media.u.prototype.yX;chrome.cast.media.u.prototype.$v=function(){};chrome.cast.media.u.prototype.addUpdateListener=chrome.cast.media.u.prototype.$v;
chrome.cast.media.u.prototype.aw=function(){};chrome.cast.media.u.prototype.addUpdateListenerWithContext=chrome.cast.media.u.prototype.aw;chrome.cast.media.u.prototype.UA=function(){};chrome.cast.media.u.prototype.removeUpdateListener=chrome.cast.media.u.prototype.UA;chrome.cast.media.u.prototype.VA=function(){};chrome.cast.media.u.prototype.removeUpdateListenerWithContext=chrome.cast.media.u.prototype.VA;
chrome.cast.media.u.prototype.$x=function(a){return jb(this.items,function(b){return b.itemId==a})};var ql=function(a,b,c){this.sessionId=a;this.namespaceName=b;this.message=c};var rl=function(a){this.xd=a;this.a=x("mr.cast.ReceiverStatusQuerier")};rl.prototype.Eca=function(a){var b=this;return(new pe(u(this.A6,this,a),3500,5)).zu(2).start().then(null,function(c){b.a.info("Failed to get receiver status from "+a.getId());throw c;})};rl.prototype.A6=function(a){this.a.info("Query receiver status: "+a.getId());return this.xd.sendRequest(new dl,a,yk)};var sl=function(a,b){this.type="SET_VOLUME";this.requestId=0;this.volume=a;this.expectedVolume=b||null};chrome.cast.F=function(a,b,c,e,f){this.sessionId=a;this.appId=b;this.displayName=c;this.statusText=null;this.appImages=e;this.receiver=f;this.senderApps=[];this.namespaces=[];this.media=[];this.status=chrome.cast.nD.CONNECTED;this.transportId=""};m("chrome.cast.Session",chrome.cast.F,void 0);chrome.cast.F.prototype.Taa=function(a,b,c){this.XN(null,a,b,c)};chrome.cast.F.prototype.setReceiverVolumeLevel=chrome.cast.F.prototype.Taa;
chrome.cast.F.prototype.XN=function(a,b,c,e){b=new sl(new chrome.cast.Volume(b,null),this.receiver.volume);a.setReceiverVolume(this.sessionId,b,c,e)};chrome.cast.F.prototype.setReceiverVolumeLevelWithContext=chrome.cast.F.prototype.XN;chrome.cast.F.prototype.Saa=function(a,b,c){this.WN(null,a,b,c)};chrome.cast.F.prototype.setReceiverMuted=chrome.cast.F.prototype.Saa;
chrome.cast.F.prototype.WN=function(a,b,c,e){a=new sl(new chrome.cast.Volume(null,b),this.receiver.volume);null.setReceiverVolume(this.sessionId,a,c,e)};chrome.cast.F.prototype.setReceiverMutedWithContext=chrome.cast.F.prototype.WN;chrome.cast.F.prototype.leave=function(a,b){null.leaveSession(this.sessionId,a,b)};chrome.cast.F.prototype.leave=chrome.cast.F.prototype.leave;chrome.cast.F.prototype.stop=function(){};chrome.cast.F.prototype.stop=chrome.cast.F.prototype.stop;
chrome.cast.F.prototype.Nca=function(){};chrome.cast.F.prototype.stopWithContext=chrome.cast.F.prototype.Nca;chrome.cast.F.prototype.sendMessage=function(){};chrome.cast.F.prototype.sendMessage=chrome.cast.F.prototype.sendMessage;chrome.cast.F.prototype.K8=function(){};chrome.cast.F.prototype.sendMessageWithContext=chrome.cast.F.prototype.K8;chrome.cast.F.prototype.$v=function(){};chrome.cast.F.prototype.addUpdateListener=chrome.cast.F.prototype.$v;chrome.cast.F.prototype.aw=function(){};
chrome.cast.F.prototype.addUpdateListenerWithContext=chrome.cast.F.prototype.aw;chrome.cast.F.prototype.UA=function(){};chrome.cast.F.prototype.removeUpdateListener=chrome.cast.F.prototype.UA;chrome.cast.F.prototype.VA=function(){};chrome.cast.F.prototype.removeUpdateListenerWithContext=chrome.cast.F.prototype.VA;chrome.cast.F.prototype.OR=function(){};chrome.cast.F.prototype.addMessageListener=chrome.cast.F.prototype.OR;chrome.cast.F.prototype.PR=function(){};
chrome.cast.F.prototype.addMessageListenerWithContext=chrome.cast.F.prototype.PR;chrome.cast.F.prototype.MR=function(){};chrome.cast.F.prototype.addMediaListener=chrome.cast.F.prototype.MR;chrome.cast.F.prototype.NR=function(){};chrome.cast.F.prototype.addMediaListenerWithContext=chrome.cast.F.prototype.NR;chrome.cast.F.prototype.A7=function(){};chrome.cast.F.prototype.removeMediaListener=chrome.cast.F.prototype.A7;chrome.cast.F.prototype.B7=function(){};
chrome.cast.F.prototype.removeMediaListenerWithContext=chrome.cast.F.prototype.B7;chrome.cast.F.prototype.C7=function(){};chrome.cast.F.prototype.removeMessageListener=chrome.cast.F.prototype.C7;chrome.cast.F.prototype.D7=function(){};chrome.cast.F.prototype.removeMessageListenerWithContext=chrome.cast.F.prototype.D7;chrome.cast.F.prototype.n2=function(a){a.sessionId=this.sessionId};chrome.cast.F.prototype.loadMedia=chrome.cast.F.prototype.n2;chrome.cast.F.prototype.G6=function(a){a.sessionId=this.sessionId};
chrome.cast.F.prototype.queueLoad=chrome.cast.F.prototype.G6;var vl=function(a,b){if(!b.applications||1!=b.applications.length)return null;var c=b.applications[0];a=tl(a);a=new chrome.cast.F(c.sessionId,c.appId,c.displayName,c.appImages,a);a.senderApps=c.senderApps;a.namespaces=c.namespaces||[];a.transportId=c.transportId;a.statusText=c.statusText;if(!a.sessionId||!(a.namespaces&&0!=a.namespaces.length||ul(a)))return null;a.receiver.volume=b.volume;"boolean"==typeof b.isActiveInput&&(a.receiver.isActiveInput=b.isActiveInput);return a},wl=function(a){var b=
[];if(!a)return b;a&1&&b.push(chrome.cast.gh.VIDEO_OUT);a&2&&b.push(chrome.cast.gh.VIDEO_IN);a&4&&b.push(chrome.cast.gh.AUDIO_OUT);a&8&&b.push(chrome.cast.gh.AUDIO_IN);a&32&&b.push(chrome.cast.gh.MULTIZONE_GROUP);return b},tl=function(a){return new chrome.cast.Lv(a.getId(),a.Dl(),wl(a.wd))},xl=function(a,b){if(a.statusText!=b.statusText)return!0;var c=a.namespaces||[],e=b.namespaces||[];if(c.length!=e.length)return!0;for(var f={index:0};f.index<c.length;f={index:f.index},f.index++)if(!e.some(function(a){return function(b){return b.name==
c[a.index].name}}(f)))return!0;return a.receiver.volume.level!==b.receiver.volume.level||a.receiver.volume.muted!==b.receiver.volume.muted?!0:!1},yl=function(a){qa(a)?a.forEach(yl):ta(a)&&Object.keys(a).forEach(function(b){null===a[b]?delete a[b]:(ta(a[b])||qa(a[b]))&&yl(a[b])})},zl=function(a,b){return a.namespaces.some(function(a){return a.name==b})},Al=["MultizoneLeader","MultizoneFollower"],ul=function(a){return null!==a&&"MultizoneLeader"==a.appId},Bl=function(a){return"E8C28D3C"==a||"00000000-0000-0000-0000-000000000000"==
a};var Cl=function(a){this.xd=a;this.a=x("mr.cast.SessionLauncher")};Cl.prototype.pz=function(a,b){Jg("MediaRouter.Cast.Session.Type",0,Jk);return this.xd.N7(a,b).then(this.i0.bind(this,b),function(a){a&&ml==a?Sk(1):Sk(0);throw a;})};Cl.prototype.i0=function(a,b){this.a.o("Got launch result from "+a.getId());if("LAUNCH_ERROR"==b.type)throw Sk(2),Error(b.reason);a=vl(a,b.status);this.a.info("Launched session: "+a.sessionId);return a};var Dl=function(a,b,c,e){this.type=a;this.message=b;this.sequenceNumber=l(c)?c:-1;this.timeoutMillis=e||0;this.clientId=""};var El=function(a,b){this.$h=a;this.Nb=b;this.MJ=[];this.Rj=new il};d=El.prototype;d.ry=function(a){return(a=this.Nb.Dd(a))?a.routeId:null};d.listen=function(a,b){this.MJ[a]=b};d.ec=function(a,b,c){Fl.o("Sending to "+b);Fl.o(JSON.stringify(c));c.clientId=b;this.$h.LU(a,c)};d.ji=function(a,b){var c=this,e=this.Nb.Dd(a);e&&e.Uy?this.ec(e.routeId,a,b):this.connect(a).then(function(e){e?(e=c.ry(a))?c.ec(e,a,b):Fl.l("No route for "+a):Fl.l("No connected client "+a)},null)};
d.Ap=function(a){Fl.o("App "+a);var b=this.Nb.Dd(a);b?(b.Uy=!0,(a=this.Rj.Rp(b.routeId))&&a.sb.resolve(!0)):Fl.l("Client not found "+a)};d.i3=function(a){Fl.o("Received: "+a);a=JSON.parse(a);var b=a.clientId;"client_connect"==a.type?this.Ap(b):this.ry(b)?(b=this.MJ[a.type])&&b(a):Fl.l("No route for "+b)};
d.connect=function(a){if(this.v1(a))return Promise.resolve(!0);var b=this.ry(a);if(!b)return Fl.l("No route for client "+a),Promise.resolve(!1);if(a=this.Rj.gj(b))return a.sb.promise;a=new xc;this.Rj.FD(new Gl(b,a));return a.promise};d.v1=function(a){a=this.Nb.Dd(a);return null!=a&&a.Uy};var Fl=x("mr.cast.ApiMessenger"),Gl=function(a,b){hl.call(this,a,3E4);this.sb=b};ja(Gl,hl);Gl.prototype.Sz=function(){this.sb.resolve(!1)};var Hl=function(a,b,c,e,f,g,k,n,q,y){this.fw=a;this.Yd=b||null;this.kr=c||null;this.Or=e||null;this.mt=l(f)?f:null;this.gw=g||null;this.qF=k||null;this.Qy=n||!1;this.vw=q||null;this.uw=y||null},Il=function(a,b){return(a=a.match(b+"=([^/]*)"))?a[1]:null},Kl=function(a){a=a.match(/__castAppId__=([^/]*)/g);return null==a?[]:gb(B(a,function(a){a=Il(a,"__castAppId__");if(!a)return null;a=a.match(Jl);if(!a||0==a.length)return null;var b=[];3==a.length&&a[2]&&(b=a[2].split(","));return{appId:a[1],capabilities:b}}),
function(a){return null!=a})},Ll=function(a){return Il(a,"__castClientId__")};d=Hl.prototype;d.vo=function(){return B(this.fw,function(a){return a.appId})};d.mG=function(){return this.gw};d.xc=function(){return this.Yd};d.Ix=function(){return this.kr?this.kr:chrome.cast.Xf.TAB_AND_ORIGIN_SCOPED};d.ZW=function(){return this.Or?this.Or:chrome.cast.Oq.CREATE_SESSION};d.kY=function(){return null==this.mt?chrome.cast.timeout.requestSession:this.mt};
d.toString=function(){var a=new Ej;a.Lu("https");a.Om("google.com");a.ki("/cast");var b=[];A(this.fw,function(a){var c="__castAppId__="+a.appId;a.capabilities&&0<a.capabilities.length&&(c=c+"("+a.capabilities.join(","),c+=")");b.push(c)});this.Yd&&b.push("__castClientId__="+this.Yd);this.kr&&b.push("__castAutoJoinPolicy__="+this.kr);this.Or&&b.push("__castDefaultActionPolicy__="+this.Or);null!=this.mt&&b.push("__castLaunchTimeout__="+this.mt);this.gw&&b.push("__dialAppName__="+this.gw);this.qF&&b.push("__dialPostData__="+
this.qF);this.Qy&&b.push("__castInvisibleSender__=true");this.vw&&(b.push("__castBroadcastNamespace__="+this.vw),b.push("__castBroadcastId__="+Math.random()));this.uw&&b.push("__castBroadcastMessage__="+encodeURIComponent(JSON.stringify(this.uw)));a.Du(b.join("/"));return a.toString()};d.O1=function(a){var b=this.vo(),c=Ml(a);return hb(b,function(a){return mb(c,a)})};
var Nl=function(a){a=new Ej(a);if("https"!=a.Ug||"google.com"!=a.sg()||"/cast"!=a.Jd)return null;var b=a.$i;a=Kl(b);if(!a||0==a.length)return null;var c=Ll(b),e=Il(b,"__castAutoJoinPolicy__"),f=Il(b,"__castDefaultActionPolicy__"),g;g=Il(b,"__castLaunchTimeout__");null==g?g=null:(g=Number(g),g=!isNaN(g)&&0<=g?g:null);var k=Il(b,"__dialAppName__"),n=Il(b,"__dialPostData__"),q=Il(b,"__castInvisibleSender__"),q=null===q?null:"true"==q,y=Il(b,"__castBroadcastNamespace__"),b=(b=Il(b,"__castBroadcastMessage__"))?
JSON.parse(decodeURIComponent(b)):null;return new Hl(a,c,e,f,g,k,n,q,y,b)},Ml=function(a){return(a=Nl(a))?a.vo():null},Ol=function(a){return(a=Nl(a))?a.xc():null},Jl=/(^\w+)(?:\(([\w,\ ]*)\))?$/;var Pl=function(a,b,c,e,f,g){this.Rg=a;this.ha=b;this.Nb=c;this.va=e;this.dd=f;this.$h=g;this.Wd=new El(g,c);this.U6=new rl(this.Rg);this.W8=new Cl(this.Rg)};d=Pl.prototype;d.init=function(){this.Nb.init();this.Wd.listen("v2_message",this.S4.bind(this));this.Wd.listen("app_message",this.n3.bind(this));this.Wd.listen("leave_session",this.U3.bind(this))};d.Hf=function(a,b){this.Wd.i3(b)};d.BM=function(a,b,c){var e=this;this.va.BG(a).slice().forEach(function(a){a!=c&&e.iB(a,b)})};
d.iB=function(a,b){b.clientId=a;this.Wd.ji(a,b)};d.FM=function(a,b,c){b={receiver:tl(b),action:c};this.iB(a,new Dl("receiver_action",b))};
d.S4=function(a){var b=a.message,c=b.sessionId;if(c){var e=this.va.uy(c);if(e)if(c=this.va.VH(c))if(c=this.ha.fa(c))switch(b.type){case "STOP":this.k3(a,c);break;case "LOAD":case "PAUSE":case "PLAY":case "SEEK":case "STOP_MEDIA":case "MEDIA_SET_VOLUME":case "MEDIA_GET_STATUS":case "EDIT_TRACKS_INFO":case "QUEUE_LOAD":case "QUEUE_INSERT":case "QUEUE_UPDATE":case "QUEUE_REMOVE":case "QUEUE_REORDER":case "PRECACHE":this.h3(a,c,e);break;case "SET_VOLUME":this.j3(a,c);break;default:Ql.l("Unknown request")}else this.Km(a,
chrome.cast.Yf.INVALID_PARAMETER,"No receiver");else this.Km(a,chrome.cast.Yf.INVALID_PARAMETER,"No sink ID");else this.Km(a,chrome.cast.Yf.INVALID_PARAMETER,"Unknown session ID")}else this.Km(a,chrome.cast.Yf.INVALID_PARAMETER,"No session ID")};d.Km=function(a,b,c){b=new chrome.cast.Error(b,c);this.hB(a,b)};d.hB=function(a,b){this.Wd.ji(a.clientId,new Dl("error",b,a.sequenceNumber))};
d.k3=function(a,b){var c=this,e=a.message;Ig("MediaRouter.Cast.Session.End");var f=e.sessionId,g=this.va.Ge(f);g&&(g.$s=!0);g=function(){c.Fm(f,a)};this.Rg.sendRequest(e,b,yk,a.timeoutMillis,a.clientId).then(g,g)};d.h3=function(a,b,c){var e=this,f=a.message,g=f.type;g in cl&&(f.type=cl[g]);this.Rg.sendRequest(f,b,zk,a.timeoutMillis,a.clientId,c.transportId).then(function(b){e.wL(c,b);e.Wd.ji(a.clientId,new Dl("v2_message",b,a.sequenceNumber))},function(b){e.hB(a,b)})};
d.j3=function(a,b){var c=this,e=a.message;delete e.sessionId;this.Rg.sendRequest(e,b,yk,a.timeoutMillis,a.clientId).then(function(){c.Wd.ji(a.clientId,new Dl("v2_message",null,a.sequenceNumber))},function(b){c.hB(a,b)})};
d.n3=function(a){var b=this,c=a.message,e=c.sessionId;if(e){var f=this.va.VH(e);f?(f=this.ha.fa(f))?(e=this.va.uy(e),kb(e.namespaces,function(a){return a.name==c.namespaceName})?this.dd.uu(f,c.namespaceName,c.message,a.clientId,e.transportId).then(function(){b.Wd.ji(a.clientId,new Dl("app_message",null,a.sequenceNumber))},function(){b.Km(a,chrome.cast.Yf.CHANNEL_ERROR,"Channel to receiver not available")}):this.Km(a,chrome.cast.Yf.INVALID_PARAMETER,"Invalid namespace")):Ql.l("No receiver from sinkId"):
Ql.l("No sinkId from sessionId")}else Ql.l("No sessionId")};d.Ot=function(a){(a=this.va.Po(a))&&a.session&&this.Fm(a.session.sessionId)};
d.U3=function(a){var b=this;Ql.info("Leave session");var c=this.va.Ge(a.message);if(c){var e=a.clientId,f=this.Nb.Dd(e);if(f){var g=[],k=[],n=f.tabId,q=f.origin,y=f.autoJoinPolicy;c.fg.forEach(function(a){var c=b.Nb.Dd(a);y==chrome.cast.Xf.TAB_AND_ORIGIN_SCOPED&&n==c.tabId&&q==c.origin||y==chrome.cast.Xf.ORIGIN_SCOPED&&q==c.origin?(c.dJ=!0,g.push(a)):k.push(a)});this.Wd.ji(e,new Dl("leave_session",null,a.sequenceNumber));g.forEach(function(a){(a=b.Nb.Dd(a))&&b.$h.Yj(a.routeId,!0,!0)});c.fg=k}else Ql.l("No client record")}else Ql.l("No session")};
d.zL=function(a,b){zl(a,zk)&&this.Rg.sendRequest(new dl,b,zk,void 0,void 0,a.transportId).catch(p)};d.AL=function(a,b){var c=this,e=a.getId();Ql.info("Query status for "+e);this.U6.Eca(a).then(function(f){c.TK(e,f);b&&(f=c.va.Ds(e))&&c.zL(f,a)},p)};d.z4=function(a,b){Ck.hasOwnProperty(b.namespace_)?this.w4(a,b):this.v4(a,b)};d.U1=function(a){if("*"==a.destinationId)return!0;a=a.destinationId;if(a==this.dd.PH()||null!=this.Nb.Dd(a))return!0;Ql.info("Invalid destination "+a);return!1};
d.w4=function(a,b){var c=this;Ql.o(function(){return"Cast message: "+JSON.stringify(b)});if(this.U1(b))if(b.namespace_==Ak)(a=this.va.Po(a))&&a.re.forEach(function(a){c.$h.KU(a,b)});else{var e=JSON.parse(b.data),f=this.r0(e),f=f?f.sourceId:void 0;switch(e.type){case "RECEIVER_STATUS":this.TK(a,e);break;case "MEDIA_STATUS":this.y4(a,b,f)}}else this.dd.HE(a,b.destinationId,b.sourceId,!1)};
d.r0=function(a){var b=this.Rg.Rp(a.requestId);if(!b)return null;var c=b.sb;switch(a.type){case "LAUNCH_ERROR":case "INVALID_REQUEST":case "LOAD_CANCELLED":case "LOAD_FAILED":case "INVALID_PLAYER_STATE":delete a.requestId;c.reject(new chrome.cast.Error(chrome.cast.Yf.SESSION_ERROR,a.reason||a.type,a));break;default:c.resolve(a)}return b};
d.v4=function(a,b){var c=this;Ql.o(function(){return"App message: "+JSON.stringify(b)});if(a=this.va.Ds(a)){var e;e="*"==b.destinationId?this.va.BG(a.sessionId):[b.destinationId];var f=new ql(a.sessionId,b.namespace_,b.data);e.forEach(function(a){c.Wd.ji(a,new Dl("app_message",f))})}else Ql.l("No session for incoming app message")};
var Rl=function(a,b){a.forEach(function(a){a.sessionId=b;var c=a.supportedMediaCommands,f=[];c&1&&f.push(chrome.cast.media.En.PAUSE);c&2&&f.push(chrome.cast.media.En.SEEK);c&4&&f.push(chrome.cast.media.En.STREAM_VOLUME);c&8&&f.push(chrome.cast.media.En.STREAM_MUTE);a.supportedMediaCommands=f});return a};d=Pl.prototype;d.wL=function(a,b){a=a.sessionId;b.sessionId=a;this.va.qba(a,Rl(b.status,a))};d.e4=function(a,b,c){this.Wd.ji(c,new Dl("new_session",a));this.zL(a,b)};
d.ju=function(a){if(a=this.va.Ds(a)){a=a.sessionId;var b=this.va.Ge(a);b&&b.$s||this.Fm(a)}};d.Fm=function(a,b){var c=this;b&&this.iB(b.clientId,b);(b=this.va.Ge(a))&&b.re.slice().forEach(function(a){c.$h.Yj(a,!0)});this.va.Fm(a)};
d.TK=function(a,b){Ql.o("Receiver status for "+a);var c=b.status;if(c)if(b=this.ha.fa(a)){var c=vl(b,c),e=this.va.Po(a);e?c?c.sessionId==e.session.sessionId?this.E0(e,c):(this.yI(a),this.$h.cf(null,b,null,c)):this.yI(a):c&&this.$h.cf(null,b,null,c)}else Ig("MediaRouter.Cast.Error.Sink.Missing.From.Discovery.Service"),Ql.l("Got message from receiver "+a+", but sink is no longer available.")};
d.E0=function(a,b){var c=a.session;xl(c,b)&&(Ql.o("Updating session "+b.sessionId),c.statusText=b.statusText,c.namespaces=b.namespaces,c.receiver.volume=b.receiver.volume,this.$h.Kda(a),this.BM(c.sessionId,new Dl("update_session",c)))};d.yI=function(a){this.ju(a);Pk(1)};d.y4=function(a,b,c){if(a=this.va.Ds(a))if(b=JSON.parse(b.data))this.wL(a,b),this.BM(b.sessionId,new Dl("v2_message",b),c)};
d.wT=function(a,b){var c=wl(b.wd);return(b=kb(a.fw,function(a){return ib(a.capabilities,function(a){return mb(c,a)})}))?b.appId:a.vo()[0]};d.pz=function(a,b){var c=Nl(a);if(!c)return Promise.reject(Error("Invalid source "+a));a=this.wT(c,b);var e=new Ag("MediaRouter.Cast.Session.Launch");return this.W8.pz(new chrome.cast.mD(a,void 0,c.kY()),b).then(function(a){e.end("Success");return a},function(a){e.end("Failure");throw a;})};var Ql=x("mr.cast.ApiHandler");var Sl=x("mr.RuntimeErrorUtils"),Tl=function(){chrome.runtime.lastError&&Sl.o(chrome.runtime.lastError.message||"unknown runtime error")};var Ul=function(){this.rA=new I;this.sA=new I;this.Gp=new I};d=Ul.prototype;d.bl=function(a,b){b=void 0===b?!1:b;var c=this,e=a.getId(),f=a.ra+":"+a.Za(),g=this.rA.get(e);if(g){if(this.Gp.get(e)==f)return Vl.o("Using pending creation to "+e),g;Vl.info("Device "+e+" IP changed from "+this.Gp.get(a.getId())+" to "+f);this.wR(a)}a=this.QU(a,b?15E3:1E4).then(function(a){c.Mw(e);Qk(1);return a},function(a){f==c.Gp.get(e)&&c.Mw(e);Qk(0);return Promise.reject(a)});this.rA.set(e,a);this.Gp.set(e,f);return a};
d.wR=function(a){a=a.getId();Vl.o("Aborting connection to device "+a);var b=this.sA.get(a);b&&b.abort();this.Mw(a)};d.Mw=function(a){this.rA.remove(a);this.sA.remove(a);this.Gp.remove(a)};d.QU=function(a,b){var c=this,e=new pe(function(){return c.U4(a,b)},1E3,3);this.sA.set(a.getId(),e);return e.zu(1.5).start().then(null,function(b){Vl.info("Failed to create channel to "+a.getId());return Promise.reject(b)})};
d.U4=function(a,b){var c=Wl++;Vl.info("Connecting to (id "+c+") "+a.getId());var e=new Ag("MediaRouter.Cast.Mdns.Channel.Open");return this.V4(a,b).then(function(a){Vl.info(function(){return"Channel opened (id "+c+"): "+JSON.stringify(a)});e.end("Success");return a},function(a){Vl.info("Channel did not open (id "+c+").");e.end("Failure");return Promise.reject(a)})};
d.V4=function(a,b){var c={ipAddress:a.ra,port:a.Za(),auth:"ssl_verified",timeout:1E4,livenessTimeout:b,pingInterval:5E3,capabilities:0};Vl.info(function(){return"Opening channel to "+JSON.stringify(c)});var e=new xc;chrome.cast.channel.open(c,function(a){Tl();"open"==a.readyState?e.resolve(a):(chrome.cast.channel.close(a,function(){chrome.runtime.lastError||Vl.o("Channel close success")}),e.reject(Error(a.errorState)))});return e.promise};var Vl=x("mr.cast.ChannelFactory"),Wl=0;var Xl=function(a,b,c,e){return{namespace_:a,data:r(b)?b:JSON.stringify(b),sourceId:c,destinationId:e}};var Yl=function(a){this.type="CLOSE";this.reasonCode=a};var $l=function(a){this.type="CONNECT";this.origin={};this.userAgent=Rb;var b=this.userAgent.indexOf("(")+1,b=this.userAgent.substr(b,this.userAgent.indexOf(")",b)-1-b+1);this.senderInfo={sdkType:2,version:chrome.runtime.getManifest().version,browserVersion:Rj,platform:Zl(),systemVersion:b,connectionType:1};this.connType=a?0:2},Zl=function(){switch(Pg()){case "ChromeOS":return 5;case "Windows":return 3;case "Mac":return 4;case "Linux":return 6}return 0};var am=function(){this.eh=new I};d=am.prototype;d.init=function(){yh(this)};d.gA=function(a,b,c,e){if(!this.KI(a,b,c)){var f=Xl(xk,new $l(e),b,c);chrome.cast.channel.send(a,f,Tl);this.eh.set(this.az(a,b,c),e)}};d.IT=function(a,b,c,e){this.KI(a,b,c)&&(this.XL(a,b,c),b=Xl(xk,new Yl(e?5:0),b,c),chrome.cast.channel.send(a,b,Tl))};d.XL=function(a,b,c){this.eh.remove(this.az(a,b,c))};d.G7=function(a){var b=this;this.eh.pb().forEach(function(c){c.split("#")[0]==a.channelId.toString()&&b.eh.remove(c)})};
d.Z2=function(a,b){var c=this;this.eh.forEach(function(e,f){var g=f.split("#");g[0]==a.channelId.toString()&&(c.gA(b,g[1],g[2],e),c.eh.remove(f))})};d.jV=function(a,b,c){this.gA(a,b,c,0==c.indexOf("receiver-0"))};d.KI=function(a,b,c){return this.eh.Aa(this.az(a,b,c))};d.az=function(a,b,c){return[a.channelId,b,c].join("#")};d.ma=function(){return"cast.VirtualConnectionManager"};d.getData=function(){var a=this.eh.b();return[new bm(a)]};
d.$a=function(){var a=vh(this);if(a)for(var b in a.IP)this.eh.set(b,a.IP[b])};na(am);var bm=function(a){this.IP=a};var cm=function(a,b){this.Jw=b;this.Md=a;this.fi=new I;this.ph=new I;this.Ek=am.Y();this.mT=new Ul;this.fa=null};d=cm.prototype;d.init=function(){chrome.cast.channel.onMessage.addListener(this.v3.bind(this));chrome.cast.channel.onError.addListener(this.t3.bind(this));this.Ek.init();yh(this)};d.PH=function(){return this.Md};d.uu=function(a,b,c,e,f){var g=this,k=e||this.Md,n=f||"receiver-0";return this.bl(a).then(function(a){return g.P8(a,b,c,k,n)})};
d.W4=function(a,b,c,e){var f=this;return this.bl(a).then(function(a){return f.Ek.gA(a,b,c,e)})};d.HE=function(a,b,c,e){(a=this.fi.get(a))&&this.Ek.IT(a,b,c,e)};
d.v3=function(a,b){Tg(2);var c=this.ph.get(a.channelId);if(c){var e=this.fa(c);if(e){if(Ck.hasOwnProperty(b.namespace_)){c=JSON.parse(b.data);if("CLOSE"==c.type){this.Ek.XL(a,b.destinationId,b.sourceId);return}dm.info("Got message "+(c.type||c.responseType)+" from "+e.getId())}else dm.info("Got message in "+b.namespace_+" from "+e.getId());this.Jw.u3(e,b)}else dm.l("Receiver "+c+" not found.")}else dm.l("This message is from unknown receiver.")};
d.IE=function(a){chrome.cast.channel.close(a,function(){chrome.runtime.lastError||dm.o("Channel close success")});var b=this.ph.get(a.channelId);b&&(this.ph.remove(a.channelId),this.fi.remove(b))};d.t3=function(a,b){Tg(1);dm.l(function(){return"Channel error: "+JSON.stringify(a)+(b?", "+JSON.stringify(b):"")});b&&this.HR(b.errorState,b);this.GE(a)};
d.HR=function(a,b){switch(a){case "unknown":a=0;break;case "authentication_error":a=1;break;case "connect_error":a=2;break;default:return}if(b){if(-8192<=b.nssErrorCode&&-7192>b.nssErrorCode||2==b.challengeReplyErrorType||8==b.challengeReplyErrorType||9==b.challengeReplyErrorType||11==b.challengeReplyErrorType||-200>=b.netReturnValue&&-300<b.netReturnValue||30==b.eventType||31==b.eventType||32==b.eventType)a=3;if(26==b.eventType||-201==b.netReturnValue||-8181==b.nssErrorCode||-8162==b.nssErrorCode||
-8161==b.nssErrorCode)a=4;-138==b.netReturnValue&&(a=5);if(-8182==b.nssErrorCode||10==b.eventType||12==b.eventType)a=1}dm.l("Channel error code: "+a);Jg("MediaRouter.Cast.Channel.Error",a,Nk)};d.GE=function(a){var b=this,c=this.ph.get(a.channelId);this.IE(a);if(c){var e=this.fa(c);e&&this.bl(e,!0).then(function(c){dm.info("Re-connected to receiver: "+e.getId());b.Ek.Z2(a,c);b.Jw.w3(e)},function(){dm.info("Failed to re-connect to receiver: "+e.getId());b.Ek.G7(a);b.Jw.Pz(e,a.errorState)})}};
d.bl=function(a,b){b=void 0===b?!1:b;var c=this,e=a.getId(),f=this.fi.get(e);return f&&"open"==f.readyState?Promise.resolve(f):this.mT.bl(a,b).then(function(a){if(c.ph.Aa(a.channelId))return a;c.fi.get(e)&&(dm.l("Duplicate channel to a receiver "+e),c.IE(c.fi.get(e)));dm.info("Connected to: "+e);c.fi.set(e,a);c.ph.set(a.channelId,e);return a},null)};
d.P8=function(a,b,c,e,f){var g=this;this.Ek.jV(a,e,f);yl(c);var k=Xl(b,c,e,f);dm.info("Channel is sending message");dm.o(function(){return"....message was: "+JSON.stringify(k)});return new Promise(function(b,c){Tl();chrome.cast.channel.send(a,k,function(a){a.errorState?(c(Error("Failed to send message")),g.GE(a)):b(!0)})})};d.ma=function(){return"cast.ChannelService"};d.getData=function(){return[new em(this.fi.b(),this.ph.b())]};d.$a=function(){var a=vh(this);a&&(this.fi.addAll(a.T6),this.ph.addAll(a.nT))};
var dm=x("mr.cast.ChannelService"),em=function(a,b){this.T6=a;this.nT=b};var fm=function(){this.requestId=0;this.type="GET_APP_AVAILABILITY";this.appId=[]};var gm=function(a,b){this.Rg=a;this.ha=b;this.bc=new ne;this.Fc=new I};d=gm.prototype;d.init=function(){yh(this)};d.MA=function(a){var b=this.Fc.get(a);b?b.OA++:this.Fc.set(a,{OA:1});this.y8()};d.yC=function(a){var b=this.Fc.get(a);b&&(b.OA--,0<b.OA||(be(this.ha.kj(),function(b){switch(b.Be(a)){case "available":b.cq(a,"available_rescan");break;case "unavailable":b.cq(a,"unavailable_rescan")}}),this.Fc.remove(a)))};
d.y8=function(){this.a.info("Scanning sinks for app availability");be(this.ha.kj(),this.Yp,this)};
d.Yp=function(a){var b=this;be(this.Fc.fH(),function(c){var e;a:{switch(a.Be(c)){case "unknown":case "available_rescan":case "unavailable_rescan":e=!0;break a}e=!1}if(e){var f=a.getId()+":"+c;b.bc.contains(f)||(b.bc.add(f),e=function(){b.bc.remove(f)},(new pe(b.qT.bind(b,a,c),5500,3)).zu(2).start().then(b.nP.bind(b,a,c),function(){b.a.error("Failed to get app availability response for "+a.getId()+", appId "+c+" after 3 attempts.");b.nP(a,c,"unknown")}).then(e,e))}})};
d.nP=function(a,b,c){c!=a.Be(b)&&(this.a.info(b+" on "+a.getId()+" is "+c),a.cq(b,c),this.ha.Hd(a))};
d.qT=function(a,b){var c=this,e=new fm;e.appId=[b];var f=new Ag("MediaRouter.Cast.App.Availability");return this.Rg.sendRequest(e,a,yk,5E3).then(function(a){f.end("Success");c.a.o(function(){return"App availability response "+JSON.stringify(a)});for(var b in a.availability){if("APP_AVAILABLE"==a.availability[b])return"available";if("APP_UNAVAILABLE"==a.availability[b])return"unavailable"}return"unknown"},function(e){f.end("Failure");c.a.error("checkAppAvailability_ failed for "+a.getId()+", appId "+
b);throw e;})};d.ma=function(){return"cast.AppDiscoveryService"};d.getData=function(){return[new hm(this.Fc.b())]};d.$a=function(){var a=vh(this);a&&this.Fc.addAll(a.l7)};d.a=x("mr.cast.AppDiscoveryService");var hm=function(a){this.l7=a};var im=function(a,b,c){var e;e=Error.call(this);this.message=e.message;"stack"in e&&(this.stack=e.stack);this.name="RouteRequestError";this.message=b||"";if(c)this.stack=c;else if(Error.captureStackTrace)Error.captureStackTrace(this,im);else if(b=Error().stack)this.stack=b;this.errorCode=a};ja(im,Error);var jm=function(a,b){this.sinks=a;this.origins=b||null},km=new jm([]);var lm=function(){},mm=function(a){if(!Ka(a,"urn:x-org.chromium:media:route:"))return null;var b=a.substring(31);if(!b)return null;b=ab(b,"/",2);if(3!=b.length)return null;var c=ab(b[1],"-",1);if(2!=c.length)return null;var e=new lm;e.xsa=a;e.qL=b[0];e.Gra=c[0];e.Zsa=c[1];e.li=b[2];return e};lm.prototype.O=function(){return this.li};var nm=function(a,b,c,e,f,g){this.id=a;this.sinkId=b;this.mediaSource=c;this.isLocal=e;this.description=f;this.iconUrl=g;this.allowStop=!0;this.customControllerPath=null;this.forDisplay=!0;this.offTheRecord=!1;this.gl=e;this.isOffscreenPresentation=!1},om=function(a,b,c,e,f,g,k){return new nm("urn:x-org.chromium:media:route:"+a+"/"+b+"-"+c+"/"+e,c,e,f,g,k)};var pm=function(a,b,c,e){return om(c,"cast",b.getId(),a,e,"",null)};var qm=function(a,b,c,e,f,g){this.routeId=a;this.clientId=b;this.appIds=c;this.autoJoinPolicy=e;this.origin=f;this.tabId=g;this.dJ=this.Uy=!1},rm=function(){this.Ib=[]};d=rm.prototype;d.init=function(){yh(this)};d.W=function(){return this.Ib.length};d.Dd=function(a){return kb(this.Ib,function(b){return b.clientId==a})};d.Ih=function(a){return kb(this.Ib,function(b){return b.routeId==a})};d.Vv=function(a,b,c,e,f,g){a=new qm(a,b,c,e,f,g);this.Ib.push(a);return a};
d.SA=function(a){this.Ib=gb(this.Ib,function(b){return b.clientId!=a})};d.ma=function(){return"cast.ClientRecords"};d.getData=function(){return[new sm(this.Ib)]};d.$a=function(){var a=vh(this);a&&(this.Ib=a.iu)};var sm=function(a){this.iu=a};var tm=function(a){this.ha=a},um=function(a){var b=[];a.forEach(function(a){var c="Receiver-"+a.replace(/\./g,"_"),f=ak.Y().Uk||8009;b.push({serviceName:c+"._googlecast._tcp.local",serviceHostPort:c+":"+f,ipAddress:a,serviceData:["id=mdns:"+c,"ve=02","ca=5","st=1","fn="+c,"md=Chromecast"]})});return b};tm.prototype.init=function(){var a=um(ak.Y().Ax);this.ha.g7(a)};var vm=chrome.i18n.getMessage("4528089202128275824");chrome.i18n.getMessage("2810417817914017289");chrome.i18n.getMessage("3413021810593924462");chrome.i18n.getMessage("7603034707785674700");chrome.i18n.getMessage("8009014317872238527");chrome.i18n.getMessage("8636962961150071298");chrome.i18n.getMessage("1802762746589457177");var wm=function(a,b){this.fg=[];this.re=[];this.sinkId=a;this.session=b;this.nt=this.pp=null;this.offTheRecord=this.$s=!1};d=wm.prototype;d.Vv=function(a){if(mb(this.fg,a))return!1;this.fg.push(a);return!0};d.SA=function(a){return rb(this.fg,a)};d.cf=function(a){if(mb(this.re,a))return!1;this.re.push(a);return!0};d.Yj=function(a){return rb(this.re,a)};d.S_=function(a,b){ul(a)?(this.nt=a,this.pp=b):ul(this.session)&&(this.nt=this.session,this.pp=this.sinkId,this.session=a,this.sinkId=b);return this};
var xm=function(){this.a=x("mr.cast.SessionRecords");this.Ib=[]};d=xm.prototype;d.init=function(){yh(this)};d.Wq=function(a,b){this.a.info("Adding new session: "+b+", "+a.sessionId);var c=this.Ge(a.sessionId);if(c)return c.S_(a,b);a=new wm(b,a);this.Ib.push(a);return a};d.Fm=function(a){this.a.info("Removing session "+a);this.Ib=gb(this.Ib,function(b){return b.session.sessionId!=a})};d.BG=function(a){return(a=this.Ge(a))?a.fg:[]};d.Ds=function(a){return(a=this.Po(a))?a.session:null};
d.Dd=function(a){return kb(this.Ib,function(b){return mb(b.fg,a)})};d.Ih=function(a){return kb(this.Ib,function(b){return mb(b.re,a)})};d.zZ=function(a){return kb(this.Ib,function(b){return null!=kb(b.re,function(b){return mm(b).qL==a})})};d.Po=function(a){return kb(this.Ib,function(b){return b.sinkId==a||b.pp==a})};d.Ge=function(a){return kb(this.Ib,function(b){return b.session.sessionId==a})};d.VH=function(a){return(a=this.Ge(a))?a.sinkId:null};d.uy=function(a){return(a=this.Ge(a))?a.session:null};
d.qba=function(a,b){var c=this.uy(a);c&&(a=gb(b,function(a){return a.playerState!=chrome.cast.media.Pq.IDLE}),a.forEach(function(a){if(!a.media){var b=kb(c.media,function(b){return b.mediaSessionId==a.mediaSessionId});b&&(a.media=b.media)}}),c.media=a)};d.w6=function(a){for(var b=0;b<this.Ib.length;b++)this.Ib[b].SA(a)};d.ma=function(){return"cast.SessionRecords"};d.getData=function(){return[new ym(this.Ib)]};
d.$a=function(){var a=vh(this);if(a)for(var b=0;b<a.iu.length;b++){var c=a.iu[b],e=new wm(c.sinkId,c.session);e.fg=c.fg;e.re=c.re;e.$s=c.$s;e.nt=c.nt;e.pp=c.pp;this.Ib.push(e)}};var ym=function(a){this.iu=a};var zm=function(a){this.Md="sender-"+Ya();this.nb=new I;this.wj=null;yh(this);this.C=a;this.Nb=new rm;this.va=new xm;this.dd=new cm(this.Md,this);this.ha=new Yk(this.dd,this);this.vU=new tm(this.ha);this.xd=new jl(this.dd,this.Md);this.ud=new gm(this.xd,this.ha);this.Vd=new Pl(this.xd,this.ha,this.Nb,this.va,this.dd,this);this.oE=new pl(this.ha,this.xd);this.Aca=this.ha.start.bind(this.ha)};d=zm.prototype;d.getName=function(){return"cast"};
d.Bc=function(){this.xd.init();this.va.init();this.Vd.init();this.dd.init();this.ha.init();this.vU.init();this.ud.init();this.C.NA(this.Aca)};d.Bg=function(){return this.nb.G()};d.xo=function(a){var b=this;if(this.ZI(a))return new jm([]);var c=new ne;this.wo(a).forEach(function(a){b.ha.f_(a).map(function(a){return a.Fh()}).forEach(function(a){c.add(a)})});return new jm(c.G(),-1!=a.indexOf("0F5096E8")?Yg:null)};
d.startObservingMediaSinks=function(a){var b=this,c=this.qG(a);c?(this.a.info("Received broadcast request "+a),be(this.ha.kj(),function(a){b.xd.B8(c,a).catch(function(a){b.a.error("Broadcast failed "+a.message)})})):(this.wo(a).forEach(function(a){b.ud.MA(a)}),this.C.Wy()&&this.ha.start())};d.stopObservingMediaSinks=function(a){var b=this;this.ZI(a)||this.wo(a).forEach(function(a){b.ud.yC(a)})};d.startObservingMediaRoutes=function(){};d.stopObservingMediaRoutes=function(){};
d.fa=function(a){return(a=this.ha.fa(a))?a.Fh():null};d.F8=function(a){var b=new ug(vm,"warning","dismiss");b.routeId=a;this.C.tg().send(b)};d.uI=function(a,b){this.a.error("Error launching.",b);this.Yj(a.id,!1,!0,"error");this.F8(a.id)};
d.Ur=function(a,b,c,e,f,g,k){var n=this;ak.Y().Wj=new Zj(b.Dc,b.ra);var q=pm(a,b,c,!0);q.forDisplay=!1;q.offTheRecord=e;this.nb.set(q.id,q);this.C.rm(this,q);this.C.gi(this.ma(),!0);(e=Nl(a))&&e.xc()&&this.vD(e,q.id,g,k);Wg(a)||Xg(a)?(q.Le={tabId:k,sessionId:"",yO:b.ra||"",zO:b.Dc||""},Xg(a)&&(q.isOffscreenPresentation=!0),this.C.tq(this,q,c,function(e){return yg(n.HJ(a,b,c,f,g,k,e))}).promise.then(function(){n.EN(q)},function(a){n.uI(q,a)})):this.HJ(a,b,c,f,g,k,q).then(null,function(a){n.uI(q,a)});
return Promise.resolve(q)};d.HJ=function(a,b,c,e,f,g,k){var n=this;return this.Vd.pz(this.xA(a,b,e),b).then(function(e){n.cf(a,b,c,e,f,g,k);return k})};
d.createRoute=function(a,b,c,e,f,g,k){var n=this,q=this.ha.fa(b);if(!q)return xg(Error("No sink with ID "+b));var y=Ll(a);if(y){setTimeout(function(){n.Vd.FM(y,q,chrome.cast.Fn.CAST)},0);var G=function(){return n.Ur(a,q,c,e,f,g,k)},O=this.Nb.Dd(y);if(O)return yg(this.terminateRoute(O.routeId).then(G,G));if(g&&k&&(b=this.YE(a,g,k,e,f,b)))return b}return yg(this.Ur(a,q,c,e,f,g,k))};d.LU=function(a,b){this.C.Hf(this,a,b)};d.KU=function(a,b){var c=this.nb.get(a);c&&c.gl&&this.C.Mt(this,a,b)};
d.Yj=function(a,b,c,e){c=void 0===c?!1:c;e=void 0===e?"closed":e;this.a.info("Remove route "+a);var f=this.Nb.Ih(a);if(f){b=b||f.dJ;var g=f.clientId;this.a.info("Remove client "+g);this.va.w6(g);this.Nb.SA(g)}if(g=this.va.Ih(a))g.Yj(a),this.QJ(g.re);var k=this.nb.get(a);if(k)if(k.gl&&g&&(this.dd.HE(k.sinkId,f?f.clientId:this.Md,g.session.transportId,b),k.forDisplay&&f&&(this.wj={Xk:f,KM:g})),this.nb.remove(a),this.C.Mj(this,k),this.Bg().some(function(a){return a.isLocal})||this.C.gi(this.ma(),!1),
c)this.C.onPresentationConnectionClosed(a,e,"Remove route");else this.C.onPresentationConnectionStateChanged(a,"terminated")};d.Kda=function(a){var b=this;a.re.forEach(function(c){if(c=b.nb.get(c)){var e=a.session;c.Le&&c.forDisplay?b.EN(c):(c.description=e.statusText||e.displayName,b.C.Vh(b,c))}})};
d.Eda=function(a){var b=this;hb(a,function(a){a=b.nb.get(a,null);if(!a||!a.mediaSource)return!1;var c=Nl(a.mediaSource),c=c?c.Qy:!1;return a.isLocal&&!c})&&A(a,function(a){if(a=b.nb.get(a,null))a.isLocal=!0})};
d.QJ=function(a){var b=this,c=[],e=[],f=null;a.forEach(function(a){if(a=b.nb.get(a)){a.forDisplay=!1;var g=Nl(a.mediaSource);g&&kb(g.vo(),Bl)||(a.gl?(g=g?g.Ix():null,f||g==chrome.cast.Xf.CUSTOM_CONTROLLER_SCOPED||(c.push(a),f=a.sinkId)):f&&f!=a.sinkId?c.push(a):e.push(a))}});A(0<c.length?c:e,function(a){a.forDisplay=!0})};d.vD=function(a,b,c,e){var f=a.xc();f&&!this.Nb.Dd(f)&&(this.a.info("Add client "+f),this.Nb.Vv(b,f,a.vo(),a.Ix(),c||null,l(e)?e:null))};
d.EN=function(a){var b=this.va.Ih(a.id);b&&(b=b.session,b.statusText=a.description||b.statusText)};
d.cf=function(a,b,c,e,f,g,k){var n=this.va.Po(b.getId());n||(n=this.va.Wq(e,b.getId()));var q=null!=a;if(!q&&Bl(e.appId))return null;var y;null==a?(y=new Hl([{appId:e.appId,capabilities:e.capabilities}]),a=y.toString()):y=Nl(a);var G=k;if(G){if(!this.nb.get(G.id))return this.a.l("Route "+G.id+" not added"),G}else G=pm(a,b,c||e.sessionId,q),this.nb.set(G.id,G);c=G.id;this.a.info("Add route "+c);a=null;y&&(a=y.xc(),this.vD(y,c,f,g));n.cf(c);G.gl&&this.dd.W4(b,a||this.Md,e.transportId,!(y&&y.Qy));n.offTheRecord=
G.offTheRecord;f=n.re;this.Eda(f);this.QJ(f);f=G;g=e.sessionId;y=e.appId;("0F5096E8"==y||"85CDB22F"==y)&&g&&f.Le&&(f.Le.sessionId=g);!zl(e,zk)||null!==e&&mb(Al,e.appId)||(f.customControllerPath="cast_route_details.html?"+["sessionId="+g,"appId="+y].join("&"));f.description=e.statusText||e.displayName;k?this.C.Vh(this,G):(this.C.rm(this,G),G.isLocal&&this.C.gi(this.ma(),!0));a&&n.Vv(a)&&this.Vd.e4(e,b,a);return G};
d.terminateRoute=function(a){var b=this,c=this.nb.get(a);if(!c)return Promise.reject(new im(3,"Route in Cast provider not found for routeId  "+a));var e=this.va.Ih(a);if(!e)return this.Yj(a,!0),Promise.resolve();var f=e.session.sessionId,g=this.ha.fa(c.sinkId);if(!g)return this.Vd.Fm(f),Promise.resolve();(a=this.Nb.Ih(a))&&this.Vd.FM(a.clientId,g,chrome.cast.Fn.STOP);Pk(0);return new Promise(function(a){var c=function(){b.Vd.ju(g.getId());a()};b.xd.O7(f,g).then(c,c)})};
d.LV=function(a){var b=this,c=null;ce(this.nb.Dy(),function(e){if(!e.gl)return!1;var f=b.ha.fa(e.sinkId);if(!f||!a.O1(b.xA(e.mediaSource,f)))return!1;c=e;return!0});if(!c||!c.mediaSource)return null;var e=Ol(c.mediaSource);if(!e)return null;var f=this.Nb.Dd(e);return f?(e=this.va.Dd(e))?{Xk:f,KM:e}:null:null};
d.jS=function(a,b,c){var e=this.LV(a);if(!e){if(!this.wj||this.wj.Xk.origin!=b||this.wj.Xk.tabId!=c)return null;e=this.wj}switch(a.Ix()){case chrome.cast.Xf.PAGE_SCOPED:return null;case chrome.cast.Xf.ORIGIN_SCOPED:if(b!=e.Xk.origin)return null;break;case chrome.cast.Xf.TAB_AND_ORIGIN_SCOPED:if(b!=e.Xk.origin||c!=e.Xk.tabId)return null}return this.va.Ge(e.KM.session.sessionId)};
d.YE=function(a,b,c,e,f,g){var k=this,n=null;ce(this.nb.Dy(),function(a){var b=a.Le;return b&&null!=b.tabId&&b.tabId==c&&Ug(a.mediaSource)?(n=a,!0):!1});if(!n)return null;var q=function(){return k.createRoute(a,g||n.sinkId,"",e,f,b,null==c?void 0:c)};return yg(this.terminateRoute(n.id).then(q,q))};
d.connectRouteByRouteId=function(a,b,c,e,f){if(!Nl(a))return xg(Error("Unsupported presentation URL"));b=mm(b);b=this.va.Ge(b.qL);if(!b)return xg(Error("No matching route"));var g=this.ha.fa(b.sinkId);return g?(a=this.cf(a,g,c,b.session,e,f))?wg(a):xg(Error("Failed to create route")):xg(Error("No sink"))};
d.joinRoute=function(a,b,c,e,f,g){var k=Nl(a);if(!k)return xg(Error("Unsupported presentation URL"));var n;if(b==chrome.cast.XP){if(n=this.jS(k,f,g),!n&&k.ZW()!=chrome.cast.Oq.CAST_THIS_TAB&&(e=this.YE(a,f,g,c,e)))return e}else n=0==b.indexOf(chrome.cast.jD)?this.va.Ge(b.substr(chrome.cast.jD.length)):this.va.zZ(b);if(!n)return xg(Error("No matching route"));if(n.offTheRecord!=c)return xg(Error("Off the record mismatch"));e=this.ha.fa(n.sinkId);if(!e)return xg(Error("No sink"));a=this.cf(a,e,b,n.session,
f,g);a.offTheRecord=c;return wg(a)};d.detachRoute=function(a){this.Yj(a,!1,!0)};d.wg=function(a){var b=!0,c=!0;if(a=this.ha.fa(a))b=a.wd,c=!!(b&1),b=!!(b&4);return Ph(b,c)};d.Jo=function(){return"cast_streaming"};
d.sendRouteMessage=function(a,b,c){var e=this;if(!c)return this.Vd.Hf(a,b),Promise.resolve();var f=this.va.Ih(a);if(!f)return Promise.reject(Error("Not managing the route "+a));var g=this.ha.fa(f.sinkId);if(!g)return Promise.reject(Error("Sink no longer accessible"));var k=(a=this.Nb.Ih(a))?a.clientId:this.Md;return new Promise(function(a){e.dd.uu(g,c.namespace,b,k,f.session.transportId).then(a,a)})};
d.Rn=function(a,b){var c=this.ha.fa(b);if(!c)return!1;a=this.xA(a,c);return(a=Ml(a))&&0!=a.length?hb(a,function(a){return Dk(c.Be(a))}):!1};d.Tk=function(a,b){var c=this.wo(a);return c&&0!=c.length?b&&b.mediaSource?(a=Ml(b.mediaSource),hb(a,function(a){return mb(c,a)})):!0:!1};d.xA=function(a,b,c){return Wg(a)||Xg(a)?(a={appId:0==(b.wd&1)?"85CDB22F":"0F5096E8",capabilities:wl(b.wd)},(new Hl([a],void 0,void 0,void 0,c)).toString()):a};
d.wo=function(a){var b=[];if(Wg(a)||Xg(a)){var c=Pg();Vg(a)&&"ChromeOS"!=c&&"Windows"!=c||b.push("85CDB22F");b.push("0F5096E8")}else(a=Ml(a))&&(b=ub(b,a));return b};d.ZI=function(a){return null!=this.qG(a)};d.qG=function(a){var b=Nl(a);if(!b)return null;a=this.wo(a);var c=b.vw||"",b=b.uw;return c&&b?new el(a,c,JSON.stringify(b)):null};d.Pz=function(a){this.ha.Pz(a.getId());Pk(2)};d.w3=function(a){this.Vd.AL(a,!0)};d.u3=function(a,b){this.oE.Y_(a,b);this.Vd.z4(a.getId(),b)};
d.Nj=function(a){this.C.onSinkAvailabilityUpdated(this,1);this.Hd(a);this.Vd.AL(a)};d.Ot=function(a){if(0==this.ha.xy())this.C.onSinkAvailabilityUpdated(this,0);this.Vd.Ot(a.getId());this.zI()};d.Hd=function(a){this.ud.Yp(a);this.zI()};d.zI=function(){this.oE.F0();this.C.Uc()};d.ma=function(){return"cast.Provider"};d.getData=function(){return[new Am(this.Md,this.nb.b(),this.wj)]};d.$a=function(){var a=vh(this);a&&(this.Md=a.IM,this.nb.addAll(a.routes),this.wj=a.Z1)};d.searchSinks=function(){return null};
d.a=x("mr.CastProvider");var Am=function(a,b,c){this.IM=a;this.routes=b;this.Z1=c};var Bm=function(){if(!$b)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(a){return!1}},Cm=$b&&Bm();var Dm=function(a,b){Dc.call(this);this.kK=a||0;this.Ej=b||10;if(this.kK>this.Ej)throw Error("[goog.structs.Pool] Min can not be greater than max");this.rc=new Qi;this.Kh=new ne;this.fx=0;this.cz=null;this.Zq()};w(Dm,Dc);d=Dm.prototype;d.getObject=function(){var a=v();if(!(null!=this.cz&&a-this.cz<this.fx)){var b=this.v7();b&&(this.cz=a,this.Kh.add(b));return b}};d.Xj=function(a){return this.Kh.remove(a)?(this.Wv(a),!0):!1};
d.v7=function(){for(var a;0<this.UG()&&(a=this.rc.xh(),!this.Nz(a));)this.Zq();!a&&this.W()<this.Ej&&(a=this.jg());return a};d.Wv=function(a){this.Kh.remove(a);this.Nz(a)&&this.W()<this.Ej?this.rc.enqueue(a):this.Ti(a)};d.Zq=function(){for(var a=this.rc;this.W()<this.kK;)a.enqueue(this.jg());for(;this.W()>this.Ej&&0<this.UG();)this.Ti(a.xh())};d.jg=function(){return{}};d.Ti=function(a){if("function"==typeof a.Ya)a.Ya();else for(var b in a)a[b]=null};
d.Nz=function(a){return"function"==typeof a.bT?a.bT():!0};d.contains=function(a){return this.rc.contains(a)||this.Kh.contains(a)};d.W=function(){return this.rc.W()+this.Kh.W()};d.cY=function(){return this.Kh.W()};d.UG=function(){return this.rc.W()};d.yb=function(){return this.rc.yb()&&this.Kh.yb()};d.V=function(){Dm.U.V.call(this);if(0<this.cY())throw Error("[goog.structs.Pool] Objects not released");delete this.Kh;for(var a=this.rc;!a.yb();)this.Ti(a.xh());delete this.rc};var Em=function(a,b){this.Df=a;this.Qd=b};Em.prototype.getKey=function(){return this.Df};Em.prototype.Ac=function(){return this.Qd};Em.prototype.clone=function(){return new Em(this.Df,this.Qd)};var Fm=function(a){this.le=[];a&&this.m1(a)};d=Fm.prototype;d.insert=function(a,b){var c=this.le;c.push(new Em(a,b));this.Y2(c.length-1)};d.m1=function(a){var b;if(a instanceof Fm){if(b=a.pb(),a=a.G(),0>=this.W()){for(var c=this.le,e=0;e<b.length;e++)c.push(new Em(b[e],a[e]));return}}else b=Hb(a),a=Gb(a);for(e=0;e<b.length;e++)this.insert(b[e],a[e])};d.remove=function(){var a=this.le,b=a.length,c=a[0];if(!(0>=b))return 1==b?nb(a):(a[0]=a.pop(),this.X2(0)),c.Ac()};
d.X2=function(a){for(var b=this.le,c=b.length,e=b[a];a<c>>1;){var f=this.lY(a),g=this.UZ(a),f=g<c&&b[g].getKey()<b[f].getKey()?g:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e};d.Y2=function(a){for(var b=this.le,c=b[a];0<a;){var e=this.fZ(a);if(b[e].getKey()>c.getKey())b[a]=b[e],a=e;else break}b[a]=c};d.lY=function(a){return 2*a+1};d.UZ=function(a){return 2*a+2};d.fZ=function(a){return a-1>>1};d.G=function(){for(var a=this.le,b=[],c=a.length,e=0;e<c;e++)b.push(a[e].Ac());return b};
d.pb=function(){for(var a=this.le,b=[],c=a.length,e=0;e<c;e++)b.push(a[e].getKey());return b};d.dl=function(a){return hb(this.le,function(b){return b.Ac()==a})};d.Aa=function(a){return hb(this.le,function(b){return b.getKey()==a})};d.clone=function(){return new Fm(this)};d.W=function(){return this.le.length};d.yb=function(){return 0==this.le.length};d.clear=function(){nb(this.le)};var Gm=function(){Fm.call(this)};w(Gm,Fm);Gm.prototype.enqueue=function(a,b){this.insert(a,b)};Gm.prototype.xh=function(){return this.remove()};var Hm=function(a,b){this.lF=void 0;this.nu=new Gm;Dm.call(this,a,b)};w(Hm,Dm);d=Hm.prototype;d.getObject=function(a,b){if(!a)return(a=Hm.U.getObject.call(this))&&this.fx&&(this.lF=h.setTimeout(u(this.Ns,this),this.fx)),a;this.nu.enqueue(l(b)?b:100,a);this.Ns()};d.Ns=function(){for(var a=this.nu;0<a.W();){var b=this.getObject();if(b)a.xh().apply(this,[b]);else break}};d.Wv=function(a){Hm.U.Wv.call(this,a);this.Ns()};d.Zq=function(){Hm.U.Zq.call(this);this.Ns()};
d.V=function(){Hm.U.V.call(this);h.clearTimeout(this.lF);this.nu.clear();this.nu=null};var Im=function(a,b,c,e){this.rj=a;this.fh=!!e;Hm.call(this,b,c)};w(Im,Hm);Im.prototype.jg=function(){var a=new tf,b=this.rj;b&&b.forEach(function(b,e){a.headers.set(e,b)});this.fh&&a.bC(!0);return a};Im.prototype.Nz=function(a){return!a.isDisposed()&&!a.Eg()};var Jm=function(a,b,c,e,f,g){F.call(this);this.Hg=l(a)?a:1;this.ah=l(f)?Math.max(0,f):0;this.fh=!!g;this.Cn=new Im(b,c,e,g);this.Gc=new I;this.La=new kk(this)};w(Jm,F);var Km="ready complete success error abort timeout".split(" ");d=Jm.prototype;d.Mu=function(a){this.ah=Math.max(0,a)};
d.send=function(a,b,c,e,f,g,k,n,q,y){if(this.Gc.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new Lm(b,u(this.e0,this,a),c,e,f,k,l(n)?n:this.Hg,q,l(y)?y:this.fh);this.Gc.set(a,b);a=u(this.V_,this,a);this.Cn.getObject(a,g);return b};d.abort=function(a,b){var c=this.Gc.get(a);if(c){var e=c.Cv;c.Y8(!0);b&&(e&&(this.YL(e,c.UC),dd(e,"ready",function(){this.Cn.Xj(e)},!1,this)),this.Gc.remove(a));e&&e.abort()}};
d.V_=function(a,b){var c=this.Gc.get(a);c&&!c.Cv?(this.ZR(b,c.UC),b.Mu(this.ah),b.dO(c.Gm),b.bC(c.fh),c.Cv=b,this.dispatchEvent(new Mm("ready",this,a,b)),this.iM(a,b),c.rD&&b.abort()):this.Cn.Xj(b)};d.e0=function(a,b){var c=b.target;switch(b.type){case "ready":this.iM(a,c);break;case "complete":return this.a0(a,c,b);case "success":this.O0(a,c);break;case "timeout":case "error":this.Xo(a,c);break;case "abort":this.T_(a,c)}return null};
d.iM=function(a,b){var c=this.Gc.get(a);!c||c.OE||c.Ly()?(c&&(this.YL(b,c.UC),this.Gc.remove(a)),this.Cn.Xj(b)):(c.c1(),b.send(c.getUrl(),c.S2,c.hc,c.us()))};d.a0=function(a,b,c){var e=this.Gc.get(a);if(7==b.Mh||b.ie()||e.Ly())if(this.dispatchEvent(new Mm("complete",this,a,b)),e&&(e.H9(!0),e.NE))return e.NE.call(b,c);return null};d.T_=function(a,b){this.dispatchEvent(new Mm("abort",this,a,b))};d.O0=function(a,b){this.dispatchEvent(new Mm("success",this,a,b))};
d.Xo=function(a,b){this.Gc.get(a).Ly()&&this.dispatchEvent(new Mm("error",this,a,b))};d.YL=function(a,b,c){this.La.Yc(a,c||Km,b)};d.ZR=function(a,b,c){this.La.listen(a,c||Km,b)};d.V=function(){Jm.U.V.call(this);this.Cn.Ya();this.Cn=null;this.La.Ya();this.La=null;this.Gc.clear();this.Gc=null};var Mm=function(a,b,c,e){E.call(this,a,b);this.id=c;this.Cv=e};w(Mm,E);
var Lm=function(a,b,c,e,f,g,k,n,q){this.qv=a;this.S2=c||"GET";this.hc=e;this.rj=f||null;this.Hg=l(k)?k:1;this.UD=0;this.rD=this.OE=!1;this.UC=b;this.NE=g;this.Gm=n||"";this.fh=!!q;this.Cv=null};d=Lm.prototype;d.getUrl=function(){return this.qv};d.us=function(){return this.rj};d.xs=function(){return this.Hg};d.c1=function(){this.UD++};d.Ly=function(){return this.UD>this.Hg};d.H9=function(a){this.OE=a};d.Y8=function(a){this.rD=a};var Nm=function(){this.name="unknown";this.state="error";this.q1=null;this.allowStop=!0;this.serviceData=this.Sg=null;this.extraData={}},Qm=function(a,b,c){this.Ue=a;(a=b)||(Om||(Om=new Jm(3,null,1,10,2E3)),a=Om);this.Bn=a;this.Dn=[];c||(Pm||(Pm=new Jm(0,null,1,10,15E3)),c=Pm);this.WP=c;this.a=x("mr.dial.Client")};d=Qm.prototype;d.abort=function(){var a=this;this.Dn.forEach(function(b){a.Bn.abort(b,!0);a.WP.abort(b,!0)})};
d.launchApp=function(a,b){var c=new xc,e=(++Rm).toString();this.Dn.push(e);this.WP.send(e,this.Hx(a),"POST",b,null,0,this.VF("launchApp","POST",e,c));return c.promise};d.IO=function(a){var b=new xc,c=(++Rm).toString();this.Dn.push(c);this.Bn.send(c,this.Hx(a),"DELETE",null,null,0,this.VF("stopApp","DELETE",c,b),0);return b.promise};d.Gx=function(a){var b=this;return new Promise(function(c){var e=(++Rm).toString();b.Dn.push(e);b.Bn.send(e,b.Hx(a),"GET",null,null,0,u(b.N3,b,e,c))})};
d.N3=function(a,b,c){rb(this.Dn,a);a=c.target;qe(this.a,"GetAppInfo","GET",a,!0);if(a.ie()){c=a.NH();if(!c)if(c=a.hj(),"undefined"!=typeof DOMParser)c=(new DOMParser).parseFromString(c,"application/xml");else if(Cm){var e=new ActiveXObject("MSXML2.DOMDocument");e.resolveExternals=!1;e.validateOnParse=!1;try{e.setProperty("ProhibitDTD",!0),e.setProperty("MaxXMLSize",2048),e.setProperty("MaxElementDepth",256)}catch(n){}e.loadXML(c);c=e}else throw Error("Your browser does not support loading xml documents");
if(c)if((e=c.getElementsByTagName("service"))&&1==e.length){c=new Nm;for(var f=0,g=e[0].childNodes.length;f<g;f++){var k=e[0].childNodes[f];if("state"==k.nodeName){a:switch(k.textContent){case "running":k="running";break a;case "stopped":k="stopped";break a;default:k="error"}c.state=k}else"name"==k.nodeName?c.name=k.textContent:"link"==k.nodeName?c.Sg=k.getAttribute("href"):"options"==k.nodeName?c.allowStop="false"!=k.getAttribute("allowStop"):c.extraData[k.nodeName]=k.innerHTML}if("unknown"==c.name)this.a.info("GET response missing name value"),
b(new Sm(a,null));else if("error"==c.state)this.a.info("GET response missing state value"),b(new Sm(a,null));else{if((e=/installable=(.+)/.exec(c.state))&&e[1])c.state="installable",c.q1=e[1];else if("running"!=c.state&&"stopped"!=c.state){this.a.info("GET response has invalid state value");b(new Sm(a,null));return}b(new Sm(a,c))}}else this.a.info("Invalid GET response (invalid service)"),b(new Sm(a,null));else this.a.info("Empty response"),b(new Sm(a,null))}else this.a.info("Request to "+a.ws()+
" failed"),b(new Sm(a,null))};d.Hx=function(a){var b=this.Ue.yh;"/"!=b.charAt(b.length-1)&&(b+="/");return b+a};d.VF=function(a,b,c,e){var f=this;return function(g){rb(f.Dn,c);g=g.target;qe(f.a,a,b,g,!0);g.ie()?e.resolve(void 0):e.reject(Error(Re(g.Mh)))}};var Om=null,Pm=null,Rm=999,Sm=function(a,b){this.VP=a;this.$f=b;this.v8=!!b&&"running"==b.state};var Tm=function(a,b,c){this.appName=b;this.launchParameter=c||""},Vm=function(a){if(Ka(a,"urn:dial-multiscreen-org:dial:application:")){var b=a.indexOf("?"),c=a.substring(42,0<b?b:void 0);a=c&&0<c.length?new Tm(a,c,0<b?a.substring(b+1):void 0):null}else a=Um(a);return a},Um=function(a){var b=(new Ej(a)).$i;if(!b)return null;var c=Wm.exec(b),c=c?c[1]:null;if(!c)return null;c=decodeURIComponent(c);if(b=(b=Xm.exec(b))?b[1]:void 0)try{b=uj(b)}catch(e){return Ym.l("Invalid base64 encoded postData:"+b),
null}return new Tm(a,c,b)},Ym=x("mr.DialProvider"),Wm=/__dialAppName__=([A-Za-z0-9-._~!$&'()*+,;=%]+)/,Xm=/__dialPostData__=([A-Za-z0-9]+={0,2})/;var Zm=function(a,b){this.bb=a;this.appName=b};var $m=function(a){this.Kd=new Map;this.Tv=a};d=$m.prototype;d.init=function(){yh(this)};d.clear=function(){this.Kd.clear()};d.add=function(a){this.sG(a.bb.id)||(this.Kd.set(a.bb.id,a),this.Tv.f3(a))};d.sG=function(a){return this.Kd.get(a)||null};d.tG=function(a){for(var b=ia(this.Kd),c=b.next();!c.done;c=b.next())if(c=ia(c.value),c.next(),c=c.next().value,c.bb.sinkId==a)return c;return null};d.r7=function(a){if(a=this.tG(a))this.Kd.delete(a.bb.id),this.Tv.wK(a)};
d.TL=function(a){var b=this.Kd.get(a);b&&(this.Kd.delete(a),this.Tv.wK(b))};d.Bg=function(){return Array.from(this.Kd.values(),function(a){return a.bb})};d.$V=function(){return Array.from(this.Kd.values())};d.ma=function(){return"dial.ActivityRecords"};d.getData=function(){return[Array.from(this.Kd)]};d.$a=function(){var a=vh(this);a&&(this.Kd=new Map(a))};var an={Lfa:0,eia:1,kha:2,Kfa:3},bn={ERROR:0,Cha:1,EMPTY:2},cn=function(a){Jg("MediaRouter.Dial.Create.Route",a,an)},dn=function(a){Jg("MediaRouter.Dial.Device.Description.Failure",a,bn)};var en=function(a,b){this.a=x("mr.dial.AppDiscoveryService");this.Fc=new Set;this.ha=a;this.rd=b;this.bc=new Map;this.Pw=new Map;this.We=null;this.Im=!1};d=en.prototype;d.init=function(){yh(this)};d.start=function(){this.a.info("Starting periodic scanning.");this.Im||(this.Im=!0,this.yF())};d.stop=function(){this.a.info("Stopping periodic scanning.");this.Im&&(this.Im=!1,this.We&&(clearTimeout(this.We),this.We=null),this.bc.clear(),this.Pw.forEach(function(a){a.abort()}))};
d.MA=function(a){if(!this.Fc.has(a)||this.cS(a))this.Fc.add(a),0!=this.ha.Kc.size&&(this.Im?this.ha.fe().forEach(this.xF.bind(this,a)):this.start())};d.yC=function(a){this.Fc.delete(a)};d.DZ=function(){return Array.from(this.Fc)};
d.yF=function(){var a=this;this.a.info("Start app status scan.");var b=[];this.ha.fe().forEach(function(c){b.push.apply(b,a.Yp(c))});this.rd.$V().forEach(function(c){b.push(a.x8(c))});var c=function(){a.Im&&!a.We&&(a.a.o("Scan complete; scheduling for next scan."),a.We=setTimeout(a.UU.bind(a),6E4))};ii(b).then(c,c)};d.UU=function(){this.a.o("Start app status scan (timer-based)");this.We=null;this.yF()};
d.Yp=function(a){if(!a.cn)return[];for(var b=[],c=ia(this.Fc),e=c.next();!e.done;e=c.next())b.push(this.xF(e.value,a));return b};d.xF=function(a,b){if("unknown"!=b.Be(a)&&36E5>Date.now()-b.bW(a)||!b.cn)return Promise.resolve();this.a.o("Querying "+b.getId()+" for "+a+" to update app status");return this.lG(b,a).then(this.G2.bind(this,b,a))};
d.x8=function(a){var b=this.ha.fa(a.bb.sinkId);if(!b)return this.a.l("Activity refers to nonexistent sink: "+a.bb.id),Promise.resolve();if(!b.cn)return Promise.resolve();a=a.appName;this.a.o("Querying "+b.getId()+" for "+a+" to update activity");return this.lG(b,a).then(this.F2.bind(this,b,a))};d.lX=function(a){var b=this.Pw.get(a.getId());b||(b=new Qm(a),this.a.o("Created DIAL client for "+a.getId()),this.Pw.set(a.getId(),b));return b};
d.lG=function(a,b){var c=this,e=fn(a,b),f=this.bc.get(e);if(f)return f;f=this.lX(a).Gx(b);this.bc.set(e,f);a=function(){c.bc.delete(e)};f.then(a,a);return f};d.lW=function(a,b){if(404==b.VP.Sa())return"unavailable";b=b.$f;if("Netflix"==a)return this.SU(b);switch(b.state){case "running":case "stopped":return"available";default:return"unavailable"}};
d.SU=function(a){return a.extraData&&l(a.extraData.capabilities)&&"websocket"==a.extraData.capabilities&&("running"==a.state||"stopped"==a.state)?"available":"unavailable"};var fn=function(a,b){return a.getId()+":"+b};d=en.prototype;d.G2=function(a,b,c){if(404==c.VP.Sa()||c.$f){c=this.lW(b,c);this.a.o("Got app status "+c+" from "+a.getId()+" for "+b);var e=a.Be(b);a.cq(b,c);c!=e&&this.ha.o3(b,a)}else this.a.l("Failed to process app availability; "+a.getId()+" does not support app availability"),a.oO(!1)};
d.F2=function(a,b,c){(a=this.rd.tG(a.getId()))&&a.appName==b&&!c.v8&&this.rd.TL(a.bb.id)};d.cS=function(a){return this.ha.fe().some(function(b){return"unknown"==b.Be(a)})};d.ma=function(){return"dial.AppDiscoveryService"};d.getData=function(){return[this.DZ()]};d.$a=function(){var a=vh(this);this.Fc=new Set(a||[])};var gn=function(){this.configId=this.modelName=this.deviceType=this.expireTimeMillis=this.fetchTimeMillis=this.appUrl=this.ipAddress=this.friendlyName=this.deviceLabel=this.uniqueId=null};gn.prototype.HP=function(){return this.deviceLabel?this.uniqueId?this.friendlyName?this.ipAddress?this.appUrl?this.fetchTimeMillis?this.expireTimeMillis?null:"Missing expireTimeMillis":"Missing fetchTimeMillis":"Missing appUrl":"Missing ipAddress":"Missing friendlyName":"Missing uniqueId":"Missing deviceLabel"};
gn.prototype.toString=function(){return JSON.stringify(this,function(a,b){return r(b)&&0==b.indexOf("uuid:")?"***":b})};
var hn=function(a){var b=new gn;b.uniqueId=a.uniqueId;b.deviceLabel=a.deviceLabel;b.friendlyName=a.friendlyName;b.ipAddress=a.ipAddress;b.appUrl=a.appUrl;b.fetchTimeMillis=a.fetchTimeMillis;b.expireTimeMillis=a.expireTimeMillis;b.deviceType=a.deviceType;b.modelName=a.modelName;b.configId=a.configId;return b},ln=function(a){this.Qn=new Map;this.bc=new Map;this.qA=new Map;var b;(b=a)||(jn||(jn=new Jm(3,null,1,10,2E3)),b=jn);this.Bn=b;a||(kn||(kn=new Jm(2,null,1,10,3E3)),a=kn);this.yR=a;this.a=x("mr.dial.DeviceDescriptionService");
yh(this)};d=ln.prototype;d.ma=function(){return"mr.dial.DeviceDescriptionService"};d.getData=function(){return[Array.from(this.Qn)]};d.$a=function(){var a=vh(this);if(a)for(var a=ia(a),b=a.next();!b.done;b=a.next()){var c=ia(b.value),b=c.next().value,c=c.next().value;null!=hn(c).HP()?this.a.error("Dropping invalid description "+b+" loaded from storage."):this.Qn.set(b,hn(c))}};d.iX=function(a){var b=this.pT(a);return b?(Ig("MediaRouter.Dial.Device.Description.Cached"),Promise.resolve(b)):this.BV(a)};
d.xR=function(a){var b=this.bc.get(a);b&&(this.Bn.abort(a,!0),b.sb.reject(Error("Aborted")))};d.pT=function(a){var b=this.Qn.get(a.deviceLabel);return b?b.configId!=a.configId||Date.now()>=b.expireTimeMillis?(this.a.o("Removing invalid entry "+b.toString()),this.Qn.delete(a.deviceLabel),null):b:null};
d.BV=function(a){var b=this,c=this.bc.get(a.deviceLabel);if(c){if(c.deviceDescriptionUrl==a.deviceDescriptionUrl)return c.sb.promise;this.xR(a.deviceLabel)}var e=new xc,c={deviceDescriptionUrl:a.deviceDescriptionUrl,sb:e};this.bc.set(a.deviceLabel,c);this.Bn.send(a.deviceLabel,a.deviceDescriptionUrl,"GET",null,null,0,function(c){b.bc.delete(a.deviceLabel);(c=b.n6(a,c))?e.resolve(c):e.reject(Error("Failed to get device description"))});return e.promise};
d.n6=function(a,b){b=b.target;qe(this.a,"fetchDeviceDescription","GET",b);if(!b.ie())return this.a.info("Request to "+b.ws()+" failed"),dn(0),null;var c=b.NH();if(!c)return this.a.info("Invalid or empty response"),dn(2),null;b=this.r5(b,a,c);if(!b)return dn(1),this.a.info("Invalid device description"),null;this.a.info("Got device description for "+b.deviceLabel);this.a.o("... device description was: "+b.toString());null!=b.configId&&(this.a.o("Caching device description for "+b.deviceLabel),this.Qn.set(a.deviceLabel,
b));return b};
d.r5=function(a,b,c){var e=new gn;e.fetchTimeMillis=Date.now();e.expireTimeMillis=e.fetchTimeMillis+18E5;e.deviceLabel=b.deviceLabel;e.configId=b.configId;e.appUrl=a.getResponseHeader("Application-URL")||null;e.ipAddress=Nj(e.appUrl).sg();e.deviceType=mn(c,"deviceType");e.modelName=mn(c,"modelName");e.friendlyName=mn(c,"friendlyName");e.uniqueId=mn(c,"UDN");!e.friendlyName&&e.modelName&&(e.friendlyName=e.modelName,e.uniqueId&&(e.friendlyName+="["+e.uniqueId.slice(-4)+"]"),this.a.l("Fixed device description: created friendlyName from modelName."));a=
e.HP();this.a.o(function(){return"Device description: "+nn(c)});return a?(this.a.l(function(){return"Device description failed to validate: "+e},a),null):e};var mn=function(a,b){return(a=a.getElementsByTagName(b))&&0!=a.length?a[0].textContent:null},nn=function(a){var b=function(a){for(var b=0,c=a.length;b<c;b++)a[b].textContent="***"};b(a.getElementsByTagName("UDN"));b(a.getElementsByTagName("serialNumber"));return(new XMLSerializer).serializeToString(a)};
ln.prototype.Tn=function(a){var b=this,c=this.qA.get(a);if(c)return c.promise;c=new xc;this.qA.set(a,c);this.yR.send(a,a,"GET",null,null,0,function(e){b.qA.delete(a);e=e.target;qe(b.a,"checkAccess","GET",e,!1);c.resolve(e.ie())});return c.promise};var jn=null,kn=null;var on=null,pn=null,qn=function(){on||(on=new Ki(3,"dial.DialOnDeviceListEventListener","mr.dial.SinkDiscoveryService",chrome.dial.onDeviceList));pn||(pn=new Ki(4,"dial.DialOnErrorEventListener","mr.dial.SinkDiscoveryService",chrome.dial.onError));return[on,pn]};var rn=function(a,b){this.mq=a;this.oF=b||new ln;this.a=x("mr.dial.SinkDiscoveryService");this.Kc=new Map;this.It=this.sz=!1;this.mf={Qk:0,am:0};this.Qr=0};ja(rn,$g);d=rn.prototype;d.init=function(){yh(this);jh("mr.dial.SinkDiscoveryService",this)};d.start=function(){this.sz||(this.a.info("Starting..."),this.sz=!0,qn().forEach(function(a){return a.addListener()}),this.refresh())};
d.refresh=function(){var a=this;this.sz?chrome.dial.discoverNow(function(b){a.a.info("chrome.dial.discoverNow = "+b)}):this.a.info("Not started. Ignoring discover().")};
d.J3=function(a){var b=this;this.a.info("onDeviceList returned "+a.length+" devices");this.a.o(function(){return"....the list is: "+JSON.stringify(a)});this.It=!1;var c=0,e=[],f=new Set;a.forEach(function(a){e.push(b.o6(a).then(function(a){f.add(a.getId());b.z2(a)},function(){c++}))});ii(e).then(function(){b.It||b.Zt(f).then(function(){var a=b.Kc.size;b.JL(a,a+c)})})};
d.JL=function(a,b){this.mf={Qk:a,am:b};36E5>Date.now()-this.Qr||(a=this.mf,Kg("MediaRouter.Dial.AvailableDevicesCount",a.Qk),Kg("MediaRouter.Dial.KnownDevicesCount",a.am),this.Qr=Date.now())};d.z2=function(a){if(!this.It){this.a.o("mayAddSink, id = "+a.getId());var b=this.Kc.get(a.getId());b?b.update(a)&&(this.a.o("Updated sink "+b.getId()),this.mq.Hd(b)):(this.a.o("Adding new sink "+a.getId()+": "+a.XO()),this.Kc.set(a.getId(),a),this.mq.Nj(a))}};
d.Zt=function(a){var b=this,c=[],e=[];this.Kc.forEach(function(f){a.has(f.getId())||e.push(b.oT(f).then(function(a){a||(b.Kc.delete(f.getId()),c.push(f))}))});return ii(e).then(function(){0<c.length&&b.mq.Ne(c)})};d.oT=function(a){return a.kg?this.oF.Tn(a.kg):Promise.resolve(!1)};
d.o6=function(a){return this.oF.iX(a).then(function(b){var c;b.uniqueId?(c=b.uniqueId,0==c.indexOf("uuid:")&&(c=c.substr(5)),c=c.replace(/-/g,"").toLowerCase()):c="";var e=b.uniqueId?ak.Y().wl(c):a.deviceLabel,f=sn.test(b.modelName);return(new Ek(b.friendlyName,c)).Eu(e).z$(b.ipAddress).X9(b.appUrl).V9(a.deviceDescriptionUrl).aaa(b.modelName).oO(!f)})};
d.I4=function(a){switch(a.code){case "no_valid_network_interfaces":case "network_disconnected":this.a.l("DIAL error: "+a.code+". Clear device list now.");a=Array.from(this.Kc.values());this.Kc.clear();this.mq.Ne(a);this.JL(0,0);this.It=!0;break;case "no_listeners":case "socket_error":case "cellular_network":case "unknown":this.a.l("DIAL error: "+a.code+". Keep device list.");break;default:this.a.l("Unhandled DIAL error: "+a.code)}};d.fa=function(a){return this.Kc.get(a)||null};
d.g_=function(a){var b=[];this.Kc.forEach(function(c){"available"==c.Be(a)&&b.push(c.Fh())});var c=tn[a];return new jm(b,c?[c]:void 0)};d.fe=function(){return Array.from(this.Kc.values())};d.o3=function(a,b){this.mq.Hd(b)};d.handleEvent=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];if(a==chrome.dial.onDeviceList)this.J3.apply(this,[].concat(ka(c)));else if(a==chrome.dial.onError)this.I4.apply(this,[].concat(ka(c)));else throw Error("Unhandled event");};d.ma=function(){return"dial.DialSinkDiscoveryService"};
d.getData=function(){return[new un(Array.from(this.Kc),this.mf),{deviceCountMetricsRecordTime:this.Qr}]};d.$a=function(){var a=vh(this);if(a){for(var b=ia(a.sinks),c=b.next();!c.done;c=b.next())c=c.value,this.Kc.set(c[0],Fk(c[1]));this.mf=a.deviceCounts}if(a=wh(this))this.Qr=a.deviceCountMetricsRecordTime};
var tn={YouTube:"https://www.youtube.com",Netflix:"https://www.netflix.com",Pandora:"https://www.pandora.com",Radio:"https://www.pandora.com",Hulu:"https://www.hulu.com",Vimeo:"https://www.vimeo.com",Dailymotion:"https://www.dailymotion.com","com.dailymotion":"https://www.dailymotion.com"},sn=/Eureka Dongle|Chromecast Audio/i,un=function(a,b){this.sinks=a;this.deviceCounts=b};var vn=function(a,b,c){this.C=a;this.Jc=b||new rn(this);this.rd=new $m(this);this.ud=c||new en(this.Jc,this.rd);this.l8=new Qh("dial.RouteIdGenerator")};d=vn.prototype;d.getName=function(){return"dial"};d.Bc=function(){this.l8.DF();this.rd.init();this.Jc.init();this.ud.init();this.vp()};d.xo=function(a){this.a.o("GetAvailableSinks for "+a);return(a=Vm(a))?this.Jc.g_(a.appName):km};d.startObservingMediaSinks=function(a){if(a=Vm(a))this.ud.MA(a.appName),this.vp()};
d.stopObservingMediaSinks=function(a){if(a=Vm(a))this.ud.yC(a.appName),this.xt()};d.startObservingMediaRoutes=function(){this.vp()};d.stopObservingMediaRoutes=function(){this.xt()};d.xt=function(){(0==this.Jc.Kc.size||0==this.ud.Fc.size&&0==this.rd.Kd.size)&&this.ud.stop()};d.vp=function(){this.Jc.start();0<this.Jc.Kc.size&&(0<this.ud.Fc.size||0<this.rd.Kd.size)&&this.ud.start()};d.fa=function(a){return(a=this.Jc.fa(a))?a.Fh():null};d.Bg=function(){return this.rd.Bg()};
d.createRoute=function(a,b,c,e){var f=this,g=this.Jc.fa(b);if(!g)return cn(0),xg(Error("Unkown sink: "+b));ak.Y().Wj=new Zj(g.Dc,g.ra);var k=Vm(a);if(!k)return xg(Error("No app name set."));var n=k.appName,q=new Qm(g);return yg(q.Gx(n).then(function(a){if(!a.$f)throw Error("Failed to get app info");if("running"==a.$f.state)return q.IO(n)}).then(function(){return q.launchApp(n,k.launchParameter)}).then(function(){return f.cf(b,a,!0,n,c,e)}).catch(function(a){cn(3);throw a;}))};d.joinRoute=function(){return xg(Error("no supported"))};
d.connectRouteByRouteId=function(){return xg(Error("no supported"))};d.detachRoute=function(){};d.cf=function(a,b,c,e,f,g){cn(1);a=om(f,this.getName(),a,b,c,e,null);a.offTheRecord=g;this.rd.add(new Zm(a,e));return a};d.Nj=function(a){this.C.onSinkAvailabilityUpdated(this,1);this.vp();this.ud.Yp(a);this.C.Uc();ak.Y().Vj=new Zj(a.Dc,a.ra)};d.Ne=function(a){var b=this;if(0==this.Jc.Kc.size)this.C.onSinkAvailabilityUpdated(this,0);this.xt();a.forEach(function(a){b.rd.r7(a.getId())});this.C.Uc()};
d.Hd=function(){this.C.Uc()};d.f3=function(a){this.vp();this.C.rm(this,a.bb)};d.wK=function(a){a=a.bb;if(a.isLocal)this.C.onPresentationConnectionStateChanged(a.id,"terminated");this.xt();this.C.Mj(this,a)};d.terminateRoute=function(a){var b=this.rd.sG(a);if(!b)return Promise.reject(new im(3,"Route in DIAL provider not found for routeId "+a));this.rd.TL(a);return(a=this.Jc.fa(b.bb.sinkId))?(new Qm(a)).IO(b.appName):Promise.reject(new im(3,"Sink in DIAL provider not found for sinkId "+b.bb.sinkId))};
d.wg=function(){return null};d.Jo=function(){return null};d.sendRouteMessage=function(){return Promise.reject(Error("DIAL sending message is not supported"))};d.Rn=function(a,b){b=this.Jc.fa(b);return!b||Wg(a)?!1:(a=Vm(a))?"available"==b.Be(a.appName):!1};d.Tk=function(){return!1};d.searchSinks=function(){return null};d.a=x("mr.DialProvider");var wn=function(a,b){this.jT=a;this.ix=b;this.oh=this.jT.ha;this.a=x("mr.cast.CastDialSinkDiscoveryCallbacks")};d=wn.prototype;d.XU=function(a){return this.oh.Tn(a)};d.TH=function(a){var b=this.oh.fa(a.getId());return b?b:(a=a.ra)?this.oh.e_(a,ak.Y().Uk||8009):null};d.Nj=function(a){this.TH(a)?Rk(2):this.jP(a);this.ix.Nj(a)};d.jP=function(a){var b=this,c=Hk(a);c&&this.XU(c).then(function(e){e?b.TH(a)?Rk(2):(b.oh.Hn(c),Rk(0)):Ig("MediaRouter.Dial.Sink.Discovered.NonCast")},p)};
d.Ne=function(a){var b=this;A(a,function(a){var c=b.oh.fa(a.getId());c&&c.ol&&b.oh.Zj(a.getId())});this.ix.Ne(a)};d.Hd=function(a){var b=this.oh.fa(a.getId());b?b.ol&&(b.update(a.Dl(),a.ra,b.Za(),b.wd)&&this.a.info("Updated Cast sink with DIAL sink: "+a.getId()),this.oh.Hd(b)):this.jP(a);this.ix.Hd(a)};var xn=function(a,b){this.ha=new rn(new wn(b,this));this.dk=new I;this.C=a;this.bq=this.ik=0;this.op=new ne;this.kb=new vn(this,this.ha)};d=xn.prototype;d.ma=function(){return"cast.DialProviderWrapper"};d.getData=function(){return[new yn(this.dk.b(),this.ik,this.bq,this.op.G())]};d.$a=function(){var a=vh(this);a&&(this.dk.addAll(a.n8),this.ik=a.sequenceNumber,this.bq=a.X8,this.op.addAll(a.c2))};d.getName=function(){return this.kb.getName()};d.Bc=function(){this.kb.Bc();yh(this)};d.Bg=function(){return this.kb.Bg()};
d.KK=function(){};d.xo=function(a){return this.kb.xo(a)};d.startObservingMediaSinks=function(a){this.kb.startObservingMediaSinks(a)};d.stopObservingMediaSinks=function(a){this.kb.stopObservingMediaSinks(a)};d.startObservingMediaRoutes=function(a){this.kb.startObservingMediaRoutes(a)};d.stopObservingMediaRoutes=function(a){this.kb.stopObservingMediaRoutes(a)};d.fa=function(a){return this.kb.fa(a)};d.ps=function(a){return new Qm(a)};d.Rx=function(a){return this.ha.fa(a)};
d.RU=function(a,b,c,e){var f=this,g=Vm(a),k=this.Rx(b);if(!k)return Promise.reject(Error("Attempting custom launch with closed route"));var n=g.appName;if(!n)return Promise.reject(Error("No app name given"));var q=Ll(a);if(!q)return Promise.reject(Error("No client ID"));var y=null;return this.ps(k).Gx(n).then(function(a){if(!a.$f)return Promise.reject(Error("Failed to get app info"));y=a.$f}).then(function(){return f.kb.cf(b,a,!0,n,e||"",c)}).then(function(a){var b={routeId:a.id,sinkId:k.getId(),
appName:n,$f:y,launchParameter:g.launchParameter,session:null,clientId:null};f.dk.set(a.id,b);f.eU(b,q);return a})};d.x1=function(a){return zn.test(a)};d.createRoute=function(a,b,c,e,f,g,k){return this.x1(a)?yg(this.RU(a,b,e,c)):this.kb.createRoute(a,b,c,e,f,g,k)};
d.terminateRoute=function(a){var b=this.dk.get(a);if(b&&b.session&&b.clientId){var c={receiver:this.Xw(b.sinkId),action:chrome.cast.Fn.STOP},c=new Dl("receiver_action",c);c.clientId=b.clientId;this.C.Hf(this,b.routeId,c);this.C.onPresentationConnectionStateChanged(b.routeId,"terminated")}return this.kb.terminateRoute(a)};
d.sendRouteMessage=function(a,b,c){var e=JSON.parse(b);switch(e.type){case "client_connect":return this.J7(a,e.clientId);case "custom_dial_launch":if(this.op.contains(e.sequenceNumber))return this.A3(a,e);break;case "v2_message":if("STOP"==e.message.type)return this.terminateRoute(a),Promise.resolve()}return this.kb.sendRouteMessage(a,b,c)};d.$Y=function(){var a=String(this.bq);this.bq=(this.bq+1)%9007199254740992;return a};
d.eU=function(a,b){var c=this.Xw(a.sinkId),e=new Dl("receiver_action",{receiver:c,action:chrome.cast.Fn.CAST});e.clientId=b;this.C.Hf(this,a.routeId,e);c=new chrome.cast.F(this.$Y(),"",a.appName,[],c);a.session=c;a.clientId=b;c=new Dl("new_session",c);c.clientId=b;this.C.Hf(this,a.routeId,c)};
d.A3=function(a,b){this.op.remove(b.sequenceNumber);b=b.message;a=this.dk.get(a);if(!a)return Promise.reject(Error("Unknown route"));if(b&&!b.doLaunch)return Promise.resolve();var c=this.Rx(a.sinkId);if(!c)return Promise.reject(Error("Custom launch response for sink that no longer exists"));var c=new Qm(c),e=a.launchParameter,e=(b?b.launchParameter:null)||e;return c.launchApp(a.appName,e)};
d.Xw=function(a){var b=this.Rx(a);a=new chrome.cast.Lv(a,b.Dl());a.ipAddress=b.ra;a.receiverType=chrome.cast.Qq.DIAL;return a};d.ZY=function(){var a=this.ik;this.ik=(this.ik+1)%9007199254740992;return a};
d.J7=function(a,b){a=this.dk.get(a);if(!a)return Promise.reject(Error("Unknown route"));var c=this.Xw(a.sinkId);c.receiverType=chrome.cast.Qq.DIAL;c=new Dl("custom_dial_launch",new chrome.cast.eD(c,a.$f.state,a.$f.extraData));c.clientId=b;c.sequenceNumber=this.ZY();this.op.add(c.sequenceNumber);this.C.Hf(this,a.routeId,c);return Promise.resolve()};d.wg=function(a){return this.kb.wg(a)};d.Jo=function(a){return this.kb.Jo(a)};d.Rn=function(a,b){return this.kb.Rn(a,b)};
d.Tk=function(a,b){return this.kb.Tk(a,b)};d.connectRouteByRouteId=function(a,b,c,e,f){return this.kb.connectRouteByRouteId(a,b,c,e,f)};d.joinRoute=function(a,b,c,e,f,g){return this.kb.joinRoute(a,b,c,e,f,g)};d.detachRoute=function(a){this.dk.remove(a);this.kb.detachRoute(a)};d.Uc=function(){this.C.Uc()};d.onSinkAvailabilityUpdated=function(a,b){this.C.onSinkAvailabilityUpdated(a,b)};d.rm=function(a,b){this.C.rm(this,b)};d.Mj=function(a,b){this.C.Mj(this,b)};d.Vh=function(a,b){this.C.Vh(this,b)};
d.Hf=function(a,b,c){this.C.Hf(this,b,c)};d.onPresentationConnectionStateChanged=function(a,b){this.C.onPresentationConnectionStateChanged(a,b)};d.onPresentationConnectionClosed=function(a,b,c){this.C.onPresentationConnectionClosed(a,b,c)};d.ny=function(a){return this.C.ny(a)};d.sy=function(){return this.C.sy()};d.tg=function(){return this.C.tg()};d.Mt=function(a,b,c){this.C.Mt(this,b,c)};d.Wz=function(a){this.C.Wz(a)};d.Nj=function(a){this.kb.Nj(a)};d.Ne=function(a){this.kb.Ne(a)};d.Hd=function(a){this.kb.Hd(a)};
d.tq=function(){};d.mv=function(){};d.searchSinks=function(a,b){return this.kb.searchSinks(a,b)};d.NA=function(a){this.C.NA(a)};d.Wy=function(){return this.C.Wy()};d.gi=function(a,b){return this.C.gi(a,b)};var yn=function(a,b,c,e){this.n8=a;this.sequenceNumber=b;this.X8=c;this.c2=e},zn=/__dialAppName__/;var An=function(a,b){this.routeId=a;this.message=b},Bn=function(a){return"string"!=typeof a.message};var Cn=function(a){if(0>=a)throw Error("invalid buffer size");this.ge=[];this.en=[];this.gm=a};d=Cn.prototype;d.enqueue=function(a){this.W()>=this.gm&&this.xh();this.en.push(a)};d.xh=function(){if(this.yb())throw Error("Empty queue");0==this.ge.length&&(this.ge=this.en,this.ge.reverse(),this.en=[]);return this.ge.pop()};d.DU=function(){var a=this.G();this.clear();return a};d.W=function(){return this.ge.length+this.en.length};d.z1=function(){return this.W()==this.gm};d.yb=function(){return 0==this.W()};
d.G=function(){var a=this.ge.slice();a.reverse();a.push.apply(a,[].concat(ka(this.en)));return a};d.clear=function(){this.ge=[];this.en=[]};var Dn=function(a){this.Fd=a;this.Xe=this.gt=null};d=Dn.prototype;d.DT=function(){null!=this.Xe&&(clearTimeout(this.Xe),this.Xe=null)};d.uM=function(){if(null==this.Xe)if(null==this.gt||Date.now()-this.gt>=this.Fd)this.ec();else{var a=Math.max(this.gt+this.Fd-Date.now(),5);this.Xe=setTimeout(this.ec.bind(this),a)}};d.zM=function(){this.ec()};d.ec=function(){this.DT();this.zF();this.gt=Date.now()};d.zF=function(){};var En=function(a,b){Dn.call(this,20);this.Lf=new Map;this.Ph=new Set;this.jB=null;this.or=this.bh=0;this.wO=!1;this.C=a;this.R2=b;this.a=x("mr.RouteMessageSender")};ja(En,Dn);d=En.prototype;d.init=function(a){this.jB=a;yh(this)};d.f2=function(a){this.Ph.has(a)||(this.Ph.add(a),this.U0(a)&&this.uM())};d.stopListeningForRouteMessages=function(a){this.Ph.delete(a)};
d.send=function(a,b){var c=this.Lf.get(a);c||(c=new Cn(50),this.Lf.set(a,c));if(c.z1()){this.a.l("Queue is full; dropping oldest message");this.a.o("   for route "+a);var e=c.xh();this.bh-=Bn(e)?0:e.message.length;Bn(e)&&this.or--}b=new An(a,b);c.enqueue(b);this.bh+=Bn(b)?0:b.message.length;Bn(b)&&this.or++;this.GC();this.Ph.has(a)&&this.uM()};d.Mj=function(a){this.Ph.delete(a);var b=this.Lf.get(a);b&&(this.Lf.delete(a),this.JK(b.G()),this.GC())};
d.JK=function(a){if(0!=a.length){a=ia(a);for(var b=a.next();!b.done;b=a.next())b=b.value,this.bh-=Bn(b)?0:b.message.length,Bn(b)&&this.or--}};d.U0=function(a){return this.Lf.has(a)&&!this.Lf.get(a).yb()};d.GC=function(){var a=0<this.or||this.bh>this.R2;a!=this.wO&&(this.wO=a,this.C.gi(this.ma(),a))};d.zF=function(){if(this.jB){for(var a=ia(this.Ph),b=a.next();!b.done;b=a.next()){var b=b.value,c=this.Lf.get(b);c&&!c.yb()&&(c=c.DU(),this.jB(b,c),this.JK(c))}this.GC()}else this.a.error("sendMessagesCallback not set. Messages not delivered.")};
d.ma=function(){return"mr.RouteMessageSender"};d.getData=function(){var a=Array.from(this.Lf,function(a){return[a[0],a[1].G()]}),b=Array.from(this.Ph);return[new Fn(a,b,this.bh)]};d.$a=function(){var a=this,b=vh(this);b&&(this.Lf=new Map,b.P6.forEach(function(b){var c=b[0];b=b[1];var f=new Cn(50);a.Lf.set(c,f);b.forEach(function(a){f.enqueue(a)})}),this.Ph=new Set(b.j2),this.bh=b.jda)};var Fn=function(a,b,c){this.P6=a;this.j2=b;this.jda=c};var Gn=function(a,b,c){Dc.call(this);this.Gg=null!=c?u(a,c):a;this.Fd=b;this.Hi=u(this.dA,this);this.Di=[]};w(Gn,Dc);d=Gn.prototype;d.Te=!1;d.Oe=0;d.cb=null;d.to=function(a){this.Di=arguments;this.cb||this.Oe?this.Te=!0:this.ql()};d.stop=function(){this.cb&&(Xd(this.cb),this.cb=null,this.Te=!1,this.Di=[])};d.pause=function(){this.Oe++};d.resume=function(){this.Oe--;this.Oe||!this.Te||this.cb||(this.Te=!1,this.ql())};d.V=function(){Gn.U.V.call(this);this.stop()};
d.dA=function(){this.cb=null;this.Te&&!this.Oe&&(this.Te=!1,this.ql())};d.ql=function(){this.cb=Wd(this.Hi,this.Fd);this.Gg.apply(null,this.Di)};var Hn=function(a){this.xm=a;this.a=x("mr.ExternalMessageHandler")};
Hn.prototype.onMessage=function(a,b,c){this.a.info("Received a message from "+b.id+" type: "+a.type);var e=chrome.runtime.id;"start"==a.type?(a=a.message,a=this.xm.searchSinks("pseudo:cloud","urn:x-org.chromium.media:source:desktop",new Uh(a.meetingName,a.domain)),b="PresentationId"+b.id+In++,this.xm.createRoute("urn:x-org.chromium.media:source:desktop",a,b).then(function(a){c(new Bf(e,"route",a.id))}).catch(function(a){c(new Bf(e,"error",a))})):"stop"==a.type?this.xm.terminateRoute(a.message.routeId).then(function(){c(new Bf(e,
"stopped"))}):(c(new Bf(e,"error",Error("Unhandled message type"))),this.a.error("Unhandled message type "+a.type))};var In=0;var Jn=function(){this.cg=new Cn(1E3);this.ni=Date.now()};d=Jn.prototype;d.init=function(){Ca=1;var a=x("browser"),b=window.onerror;window.onerror=function(c,f,g,k,n){b&&b(c,f,g,k,n);a.error("Error: "+c+" ("+f+" @ Line: "+g+")",n)};Da.push(this.d4.bind(this));var c=window.localStorage["debug.logs"];c&&(Ca=Ga(c.toUpperCase(),0));window.localStorage["debug.console"]&&Da.push(this.xz.bind(this))};d.d4=function(a){this.cg.enqueue(this.aG(a,!1));a=a.og;a instanceof Error&&a.stack&&this.cg.enqueue(a.stack)};
d.xz=function(a){var b=[this.aG(a,!0)];a.og&&b.push(a.og);switch(a.level){case 3:console.error.apply(console,[].concat(ka(b)));break;case 2:console.warn.apply(console,[].concat(ka(b)));break;case 1:console.log.apply(console,[].concat(ka(b)));break;default:console.debug.apply(console,[].concat(ka(b)))}};
d.aG=function(a,b){var c=["["];if(b)c.push(("       "+((Date.now()-this.ni)/1E3).toFixed(3)).slice(-7));else{var e=new Date(a.time),f=function(a){return 10>a?"0"+a:a};c.push(e.getFullYear().toString(),"-",f(e.getMonth()+1),"-",f(e.getDate())," ",f(e.getHours()),":",f(e.getMinutes()),":",f(e.getSeconds()),".",f(Math.floor(e.getMilliseconds()/10)))}c.push("][",Fa[a.level],"][",a.m,"] ",a.message);if(!b&&null!=a.og)if(c.push("\n"),a.og instanceof Error)c.push(a.og.message);else try{c.push(JSON.stringify(a.og))}catch(g){c.push(a.og.toString())}c.push("\n");
return c.join("")};d.getLogs=function(){return 0==this.cg.W()?"NA":this.cg.G().join("")};d.f7=function(){yh(this)};d.ma=function(){return"LogManager"};d.getData=function(){return[this.cg.G()]};d.$a=function(){var a=this.cg.G();this.cg.clear();for(var b=ia(vh(this)||[]),c=b.next();!c.done;c=b.next())this.cg.enqueue(c.value);a=ia(a);for(c=a.next();!c.done;c=a.next())this.cg.enqueue(c.value)};na(Jn);var Kn=function(a){this.xm=a;this.a=x("mr.InternalMessageHandler")};
Kn.prototype.onMessage=function(a,b,c){var e=this;if("retrieve_log_data"!=a.type)c(new Bf(chrome.runtime.id,"error",Error("Unhandled message type")));else{var f={logs:Jn.Y().getLogs(),device:ak.Y().yZ()};b=[];var g=Gf(f.device.ip).then(function(a){a&&(f.device.version=a)});b.push(g);var k=this.xm.mp;k&&(a=this.o2(k,a.source).then(function(a){a&&(f.castStreamingLogs=a)},function(){e.a.error("Log upload failed for service: "+k)}),b.push(a));b.push(this.xD(f,"mr.cast.SinkDiscoveryService","castDeviceCounts"));
b.push(this.xD(f,"mr.dial.SinkDiscoveryService","dialDeviceCounts"));ii(b).then(function(){c(f)})}};Kn.prototype.xD=function(a,b,c){var e=this;return eh(b).then(function(b){b=b.mf;a[c]=b.am+"."+b.Qk},function(){e.a.error("Failed to get device counts for "+c+".")})};Kn.prototype.o2=function(a,b){return this.xm.ys(a).then(function(a){return a.Qg(b)})};var Ln=function(){this.Cc=null;this.a=x("mr.IssueSenderImpl")};Ln.prototype.init=function(a){this.Cc=a};Ln.prototype.send=function(a){if(this.Cc)if(this.Cc.onIssue)this.Cc.onIssue(a);else this.a.error("MediaRouterService.onIssue not defined.");else this.a.error("MediaRouterService is not set.")};var Mn=new Set;var Nn=function(a,b){E.call(this,"internal_message");this.routeId=a;this.message=b};ja(Nn,E);var On=function(a,b,c){this.lM=a;this.Mf=b;this.P2=c;this.onMessage=function(){};c.listen("internal_message",this.Nt,!1,this)};On.prototype.sendMessage=function(a,b){return this.Mf(this.lM,a,b)};On.prototype.Nt=function(a){if(a.routeId==this.lM)this.onMessage(a.message)};On.prototype.Ya=function(){this.P2.Yc("internal_message",this.Nt,!1,this)};var Pn=new On("",function(){return Promise.resolve()},new F),Qn=function(a){this.C=a};
Qn.prototype.vs=function(a){var b=this.C.ny(a);return b?new On(a,b.sendRouteMessage.bind(b),this.C.sy()):Pn};var Rn=function(){this.a=x("mr.ProviderManager");this.ne=[];this.qe=new Map;this.Hm=new Map;this.Yg=new Set;this.ek=new Set;this.Et=new Map;this.Cc=this.mp=null;this.Um=!1;this.mM=new F;this.nM=new Gn(this.M8,500,this);this.nca=new Gn(this.sV,500,this);this.Jj=new En(this,524288);this.uA=0;this.lJ=new Ln;this.Vm=new Map;this.zt=-1==window.navigator.userAgent.indexOf("Windows");this.yt=[];this.dt=[];this.VI=new Kn(this);this.MF=new Hn(this);this.onBeforeInvokeHandler=this.r3;this.createRoute=this.createRoute;
this.joinRoute=this.joinRoute;this.connectRouteByRouteId=this.connectRouteByRouteId;this.terminateRoute=this.terminateRoute;this.startObservingMediaSinks=this.startObservingMediaSinks;this.stopObservingMediaSinks=this.stopObservingMediaSinks;this.sendRouteMessage=this.sendRouteMessage;this.sendRouteBinaryMessage=this.sendRouteBinaryMessage;this.startListeningForRouteMessages=this.startListeningForRouteMessages;this.stopListeningForRouteMessages=this.stopListeningForRouteMessages;this.startObservingMediaRoutes=
this.startObservingMediaRoutes;this.stopObservingMediaRoutes=this.stopObservingMediaRoutes;this.onPresentationSessionDetached=this.detachRoute=this.detachRoute;this.enableMdnsDiscovery=this.enableMdnsDiscovery;this.searchSinksAndCreateRoute=this.searchSinksAndCreateRoute;this.searchSinks=this.searchSinks;this.updateMediaSinks=this.updateMediaSinks};ja(Rn,$g);d=Rn.prototype;
d.handleEvent=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];if(a==chrome.runtime.onMessage)this.VI.onMessage.apply(this.VI,[].concat(ka(c)));else if(a==chrome.runtime.onMessageExternal)this.MF.onMessage.apply(this.MF,[].concat(ka(c)));else throw Error("Unhandled event");};d.ys=function(a){var b=this;a=this.Et.get(a);return eh(a).then(function(a){a.Bc(b);return a})};d.e7=function(a){a.forEach(this.j7,this)};
d.Bc=function(a,b){this.Et.set("webrtc","mr.mirror.webrtc.WebRtcService");this.Et.set("cast_streaming","mr.mirror.cast.Service");this.Et.set("hangouts","mr.mirror.hangouts.HangoutsService");var c=new Qn(this);tg||(tg=c);this.Cc=a;this.lJ.init(a);this.Jj.init(this.Cc.onRouteMessagesReceived.bind(this.Cc));this.e7(b);yh(this);jh("mr.ProviderManager",this)};
d.j7=function(a){if(this.Bs(a.getName()))this.a.l("Provider "+a.getName()+" already registered.");else try{a.Bc(),this.ne.push(a),this.Vm.set(a.getName(),0)}catch(b){this.a.l("Provider "+a.getName()+" failed to initialize.",b)}};
d.Xq=function(a,b){var c=this;return new Promise(function(e,f){var g=null;c.l6();var g=window.setTimeout(function(){g=null;a.cancel(new im(2,"timeout after "+b+" ms."))},b),k=function(){c.$R();null!=g&&window.clearTimeout(g)};a.promise.then(function(a){k();e(a)},function(a){k();f(a instanceof im?a:a instanceof Error?new im(0,a.message,a.stack):new im(0))})})};d.JR=function(a,b){return this.Xq(yg(a),b)};d.l6=function(){this.uA++;this.Az()};d.$R=function(){this.uA--;this.Az()};d.r3=function(){Tg(0)};
d.createRoute=function(a,b,c,e,f,g,k){var n=this,q=this.vZ(a,b);if(!q)return Promise.reject(new im(7,"No provider supports createRoute with source: "+a+" and sink: "+b));Mn.add(b);this.Uc();g=g&&0<g?g:6E4;a=q.createRoute(a,b,c,k||!1,g,e,f);return this.Xq(a,g).then(function(a){Mn.delete(b);n.Uc();return a},function(a){n.a.error("Error creating route.",a);Mn.delete(b);n.Uc();throw a;})};
d.connectRouteByRouteId=function(a,b,c,e,f,g){var k=this.qe.get(b);if(!k)return Promise.reject(new im(7,"No provider supports join "+b));a=k.connectRouteByRouteId(a,b,c,e,f);return this.Xq(a,g&&0<g?g:3E4)};d.joinRoute=function(a,b,c,e,f,g){var k=this.uZ(a);if(!k)return Promise.reject(new im(7,"No provider supports join "+b));f=f&&0<f?f:3E4;a=k.joinRoute(a,b,g||!1,f,c,e);return this.Xq(a,f)};
d.terminateRoute=function(a){var b=this.qe.get(a);return b?this.ZJ(a).then(function(){return b.terminateRoute(a)}):Promise.reject(new im(3,"Route not found for routeId "+a))};d.startObservingMediaSinks=function(a){this.Yg.has(a)||(this.Yg.add(a),this.ne.forEach(function(b){b.startObservingMediaSinks(a)}));this.GA(a)};d.stopObservingMediaSinks=function(a){this.Yg.delete(a)?this.AF(a):this.a.info("No existing query "+a)};d.AF=function(a){this.ne.forEach(function(b){b.stopObservingMediaSinks(a)})};
d.GA=function(a){var b=this;if("urn:x-org.chromium.media:source:tab:-1"==a)this.a.l("No sinks for sourceUrn: "+a);else{var c=new Map,e=[];this.ne.forEach(function(f){var g=f.xo(a);0<g.sinks.length&&(e=g.origins);g.sinks.forEach(function(a){c.has(a.id)?b.a.l("Detected duplicate sink "+a.id+" from provider: "+f.getName()):c.set(a.id,a)})});this.N8(a,Array.from(c.values()),e||[])}};d.N8=function(a,b,c){this.a.info("Sending "+b.length+" sinks to MR for "+a);Sn(b);this.Cc.onSinksReceived(a,b,c)};
var Sn=function(a){a.forEach(function(a){a.isLaunching_=Mn.has(a.id)})};d=Rn.prototype;d.sendRouteMessage=function(a,b,c){var e=this.qe.get(a);return e?this.JR(e.sendRouteMessage(a,b,c),3E4):Promise.reject(Error("Invalid route ID "+a))};d.sendRouteBinaryMessage=function(a){return Promise.reject(Error("Route "+a+" does not support sending binary data"))};d.startListeningForRouteMessages=function(a){this.Jj.f2(a)};d.stopListeningForRouteMessages=function(a){this.Jj.stopListeningForRouteMessages(a)};
d.detachRoute=function(a){var b=this.qe.get(a);b?b.detachRoute(a):this.a.info("Route "+a+" does not exist.")};d.enableMdnsDiscovery=function(){this.zt=!0;this.yt.forEach(function(a){a()});this.yt.length=0};d.vZ=function(a,b){return this.ne.find(function(c){return c.Rn(a,b)})||null};d.uZ=function(a){return this.ne.find(function(b){return b.Tk(a)})||null};d.sV=function(){var a=this;this.Yg.forEach(function(b){a.GA(b)})};d.Az=function(){this.Cc.setKeepAlive(0<this.uA||0<this.dt.length)};
d.startObservingMediaRoutes=function(a){this.ek.has(a)||(this.Um=!0,this.ek.add(a),this.ne.forEach(function(b){b.startObservingMediaRoutes(a)}));this.nM.to()};d.stopObservingMediaRoutes=function(a){this.ek.delete(a)?(0==this.ek.size&&(this.Um=!1),this.ne.forEach(function(b){b.stopObservingMediaRoutes(a)})):this.a.info("No existing route query "+a)};
d.M8=function(){var a=this;if(this.Um){var b=[];this.ne.forEach(function(a){b=b.concat(a.Bg())});this.ek.forEach(function(c){var e=[];a.ne.forEach(function(a){a.Bg().forEach(function(b){!b.gl&&a.Tk(c,b)&&e.push(b.id)})});a.Cc.onRoutesUpdated(b,c,e)})}};d.ma=function(){return"ProviderManager"};
d.getData=function(){return[new Tn(this.ne.map(function(a){return a.getName()}),Array.from(this.Yg),Array.from(this.ek),this.Um,Array.from(this.qe,function(a){var b=ia(a);a=b.next().value;b=b.next().value;return[a,b.getName()]}),Array.from(this.Vm),this.zt,this.mp)]};
d.$a=function(){var a=vh(this);if(a){this.Yg=new Set(a.mca);this.ek=new Set(a.o8);this.Um=a.jca;for(var b=ia(a.m8),c=b.next();!c.done;c=b.next()){var e=ia(c.value),c=e.next().value,e=e.next().value,e=this.Bs(e);this.qe.set(c,e)}this.Vm=new Map(a.lca);this.mp=a.b2||null;a.H2&&this.enableMdnsDiscovery()}};d.ny=function(a){return this.qe.get(a)};d.rm=function(a,b){this.qe.set(b.id,a);this.Vh(a,b)};d.Mj=function(a,b){this.ZJ(b.id);this.qe.delete(b.id);this.Jj.Mj(b.id);this.Vh(a,b)};
d.Vh=function(){this.Um&&this.nM.to()};d.KK=function(a){var b=this.qe.get(a.id);b&&this.Vh(b,a)};d.Hf=function(a,b,c){this.qe.has(b)?("string"!=typeof c&&(c=JSON.stringify(c)),this.Jj.send(b,c)):this.a.l("Got route message for closed route "+b)};d.onPresentationConnectionStateChanged=function(a,b){"terminated"==b&&this.Jj.zM();this.Cc.onPresentationConnectionStateChanged(a,b)};d.onPresentationConnectionClosed=function(a,b,c){this.Jj.zM();this.Cc.onPresentationConnectionClosed(a,b,c)};
d.Wz=function(a){this.Hm.delete(a);var b=this.qe.get(a);b&&b.terminateRoute(a)};d.Mt=function(a,b,c){this.mM.dispatchEvent(new Nn(b,c))};d.Uc=function(){this.nca.to()};d.onSinkAvailabilityUpdated=function(a,b){var c=this;if(this.Vm.get(a.getName())!=b){var e=this.PE();this.Vm.set(a.getName(),b);a=this.PE();e!=a&&(this.Cc.onSinkAvailabilityUpdated(a),0==a&&(this.Yg.forEach(function(a){c.AF(a)}),this.Yg.clear()))}};
d.PE=function(){return Array.from(this.Vm.values()).reduce(function(a,b){return Math.max(a,b)},0)};d.sy=function(){return this.mM};d.tg=function(){return this.lJ};d.ZJ=function(a){var b=this;return this.Hm.has(a)?this.ys(this.Hm.get(a)).then(function(c){b.Hm.delete(a);return c.JO()}):Promise.resolve(!1)};
d.tq=function(a,b,c,e){var f=this,g=a.Jo(b.sinkId);this.Hm.set(b.id,g);return zg(this.ys(g),function(k){f.mp=g;return k.tq(b,b.mediaSource,a.wg(b.sinkId),c,e).catch(function(a){if(a instanceof Mg&&3==a.reason)throw new im(8);throw a;})})};d.mv=function(a,b,c,e,f,g){var k=this,n=this.Hm.get(b.id);return n?zg(this.ys(n),function(q){k.mp=n;return q.mv(b,c,a.wg(b.sinkId),e,f,g)}):xg(Error("Route "+b.id+" is not mirroring"))};d.NA=function(a){this.zt?a():-1==this.yt.indexOf(a)&&this.yt.push(a)};d.Wy=function(){return this.zt};
d.gi=function(a,b){var c=this.dt.indexOf(a),e=0<=c;b&&!e?this.dt.push(a):!b&&e&&this.dt.splice(c,1);this.Az()};d.Bs=function(a){return this.ne.find(function(b){return b.getName()==a})||null};d.CH=function(a){return a.startsWith("pseudo:")?a.substring(7):null};
d.searchSinksAndCreateRoute=function(a,b,c,e,f,g,k,n){var q=this.CH(a),q=q?this.Bs(q):null,y=null;q&&(y=q.searchSinks(b,c));if(y)return this.Cc.onSearchSinkIdReceived(a,y.id),this.createRoute(b,y.id,e,f,g,k,n);this.Cc.onSearchSinkIdReceived(a,"");return Promise.reject(new im(0,"No sink found for search input: "+c.input+" and source: "+b))};d.searchSinks=function(a,b,c){a=(a=this.CH(a))?this.Bs(a):null;var e=null;a&&(e=a.searchSinks(b,c));return e?e.id:""};
d.updateMediaSinks=function(a){this.Yg.has(a)||this.GA(a)};var Tn=function(a,b,c,e,f,g,k,n){this.mca=b;this.o8=c;this.jca=e;this.m8=f;this.lca=g;this.H2=k;this.b2=n};var Un=function(a,b){this.bb=a;this.vca=b;this.Fp=new xc;this.D=this.Fp.promise;this.jd=tg.vs(a.id);this.ya=new xc;this.Kb=!1;this.lq();this.WB();this.Jb(new nh("GET_TURN_CREDENTIALS"))};d=Un.prototype;d.start=function(){var a=this;return this.D.then(function(b){if(b.Zs())return Promise.reject(Error("Presentation already started"));b.start();return a.ya.promise})};d.stop=function(){var a=this;this.Kb=!1;return this.D.then(function(b){b.stop();a.D=Promise.reject(Error("Peer connection has already been stopped"))})};
d.lq=function(){var a=this;this.jd.onMessage=function(b){if(b.type)switch(b.type){case "TURN_CREDENTIALS":a.Fp.resolve(new rh(a.bb.id,b.data.credentials));break;case "ANSWER":a.D.then(function(a){a.setRemoteDescription(b.data)});break;case "STOP":a.ya.reject("Stop signal received");a.stop();break;default:throw Error("Unknown message type: "+b.type);}else a.D.then(function(a){a.E8({type:"PRESENTATION_CONNECTION_MESSAGE",data:b})})}};
d.WB=function(){var a=this;this.D.then(function(b){b.NN(function(b){a.Jb(new nh("OFFER",new ph(b,null,null,a.vca)))});b.MN(function(b){b=oh(b);"STOP"==b.type&&a.stop();a.Jb(b)});b.LN(function(){a.Kb=!0;a.Jb(new nh("SESSION_START_SUCCESS"));a.ya.resolve(a)});b.JN(function(){a.Jb(new nh("SESSION_END"))});b.KN(function(b){a.Kb||a.ya.reject(b);a.Jb(new nh("SESSION_FAILURE"))})})};d.Jb=function(a){this.jd.sendMessage(a,Vn)};var Vn={channelType:"cloud"};var Wn=function(a){this.C=a;this.nb=new I;this.ru=new Map;this.nq=[];this.Se=this.jm=this.gd=this.rg=this.Pl=null;this.pm=this.Ni=this.rh=!1;this.oq=new I;this.jn=new I;yh(this)};d=Wn.prototype;d.getName=function(){return"cloud"};
d.Bc=function(){var a=this;this.a.info("Initializing Cloud MRP");var b=uk.Y(),c=b.QW(this);this.nq.push(c);this.Pl=b.WX(this);this.nq.push(this.Pl);this.rg=b.VG();this.gd=b.Fl();this.jm=b.OY(this);this.Se=b.b_();this.Se.NW().then(function(b){a.rh=b;a.a.info("Cloud enabled setting: "+a.rh)});this.Se.PW().then(function(b){a.Ni=b;a.a.info("Cloud on setting: "+a.Ni)});this.Se.saa(function(b){a.rh=b;a.a.info("Cloud enabled setting: "+a.rh);a.rh&&a.RI()});this.Se.cZ().then(function(b){a.pm=b;a.a.info("Privacy notified setting: "+
a.pm)})};d.Bg=function(){return this.nb.G()};
d.xo=function(a){var b=this;if(!this.Sy(a))return km;this.a.o("GetAvailableSinks for "+a);var c=[];if(this.Ni||this.hca())c=this.RI();this.jn.clear();this.oq.G().forEach(function(a){var e=!1;c.forEach(function(b){b.eb.id==a.eb.id&&(e=!0,b.eb.friendlyName=a.eb.friendlyName)});e||b.jn.set(a.eb.id,a)});c=c.concat(this.jn.G());this.a.o(function(){return"Available sinks are..."+JSON.stringify(c)});var e=c.map(function(a){return a.eb});this.Pl&&(e=e.concat(Xn));return new jm(e,-1!=a.indexOf("0F5096E8")?
Yg:null)};d.RI=function(){var a=[];this.a.info("Checking cloud discovery services");ak.Y().ft=v();this.nq.forEach(function(b){b=b.fe();a=a.concat(b)});return a};d.startObservingMediaSinks=function(){};d.stopObservingMediaSinks=function(){};d.startObservingMediaRoutes=function(){};d.stopObservingMediaRoutes=function(){};d.fa=function(a){return(a=this.zo(a))?a.eb:null};
d.createRoute=function(a,b,c,e,f,g,k){var n=this;this.a.info("createRoute called");this.a.o("urn: "+a+" sinkId:"+b);if(f=this.ru.get(b))return this.C.mv(this,f,a,c,k,function(b){b.mediaSource=a;b.Le.tabId=k;return wg(b)}).Hw(function(a){n.C.Vh(n,a);return a});f=this.zo(b);return this.Ur(a,f,b,c,e,g,k)};
d.fF=function(a,b,c,e){a instanceof im&&2==a.errorCode?this.Bk(b,6,null):(this.a.error("Error on start session",a instanceof Error?a:Error("Expected an Error value, got "+a)),this.Bk(b,e,new ug(ej,"warning","dismiss")));this.Pl&&this.Pl.w7(c)&&this.Ne([c.eb])};
d.Ur=function(a,b,c,e,f,g,k){var n=this;if(f)return xg(Error("not supported"));f=!1;switch(this.my(b)){case "cloud":Ei(1);break;case "mesi":f=!0,this.pm||(this.pm=!0,this.Se.qaa(),g=new ug(hj,"notification","learn_more"),g.iba(["dismiss"]),g.v$(6320939),this.C.tg().send(g)),Ei(0)}ak.Y().Wj=new Zj(b.model,null);var q=om(e,this.getName(),c,a,!0,"",null);f&&(q.customControllerPath="cloud_route_details/view.html?routeId="+q.id);this.nb.set(q.id,q);this.ru.set(c,q);this.oq.set(q.id,b);this.C.rm(this,q);
this.C.gi(this.ma(),!0);if(Xg(a)&&!f)return this.a.info("starting presentation on route: "+q.id),this.Dca(q,a).catch(function(a){n.fF(a,q,b,7);throw a;});this.a.info("starting mirroring on route: "+q.id);q.Le={tabId:k,sessionId:"",yO:"",zO:b.model};Xg(a)&&(q.isOffscreenPresentation=!0);return this.C.tq(this,q,e).catch(function(a){n.fF(a,q,b,5);throw a;})};
d.terminateRoute=function(a){var b=this.nb.get(a);return b?this.Bk(b,0,null):Promise.reject(new im(3,"Route in cloud provider not found for routeId "+a))};
d.Bk=function(a,b,c){this.a.info("terminating route: "+a.id);this.nb.remove(a.id);this.ru.delete(a.sinkId);var e=this.oq.get(a.id);this.oq.remove(a.id);c&&this.tg().send(c);Jg("MediaRouter.Cloud.Session.End",b,zi);switch(b){case 1:break;default:this.HT(e)}this.C.Mj(this,a);this.nb.yb()&&this.C.gi(this.ma(),!1);this.C.onPresentationConnectionStateChanged(a.id,"terminated");this.jn.Aa(a.sinkId)&&(b=this.jn.get(a.sinkId),this.Ne([b.eb]),this.jn.remove(a.sinkId));return Promise.resolve()};
d.sendRouteMessage=function(a,b,c){if(c&&c.channelType){c=c.channelType;var e=(a=this.nb.get(a)||void 0)?this.zo(a.sinkId):void 0;return this.jm.p6(c,b,a,e)}return r(b)?(this.Ld(b,a),Promise.resolve()):Promise.reject(Error("Channel type missing"))};d.wg=function(){return Ph(!0,!0)};d.Jo=function(a){var b=null;a=this.zo(a);switch(this.my(a)){case "cloud":b="webrtc";break;case "mesi":b="hangouts"}this.a.info("mirror service: "+b);return b};
d.Rn=function(a,b){this.a.o("Checking canRoute: "+a+" for sinkId: "+b);return this.Sy(a)&&!!this.fa(b)};d.Tk=function(a){return"chrome://media-router/cloudmrp-mirroring"==a};d.joinRoute=function(a,b){return(a=this.nb.get(b))?wg(a):xg(Error("not supported"))};d.connectRouteByRouteId=function(){return xg(Error("not supported"))};d.detachRoute=function(){};
d.bA=function(a){this.a.info(a.length+" sinks added");0<a.length&&!this.Ni&&(this.Se.oda(),this.Ni=!0);a=this.zo(a[0].id);ak.Y().Vj=new Zj(a.model,null);this.C.Uc();this.C.onSinkAvailabilityUpdated(this,2);this.a.info("sinkAvailability changed to AVAILABLE")};d.Ne=function(a){this.a.info(a.length+" sinks removed");this.nq.some(function(a){return 0<a.fe().length})||(this.C.onSinkAvailabilityUpdated(this,0),this.a.info("sinkAvailability changed to UNAVAILABLE"));this.C.Uc()};
d.Uc=function(a){this.a.info(a.length+" sinks updated");this.C.Uc()};d.tg=function(){return this.C.tg()};d.Ld=function(a,b,c){c?this.C.Hf(this,b,a):this.C.Mt(this,b,a)};d.zo=function(a){var b=this.mX(a);b||(b=this.VZ(a));return b};d.mX=function(a){var b=null;this.nq.some(function(c){b=c.fa(a);return!!b});return b};d.VZ=function(a){var b=null;(a=this.ru.get(a))&&(b=this.oq.get(a.id));return b};d.HT=function(a){switch(this.my(a)){case "cloud":this.rg.O8(a.deviceId)}};
d.my=function(a){return a.PO("cloud")?"cloud":a.PO("mesi")?"mesi":null};d.hca=function(){var a=ak.Y().ft;return 3E5<=Date.now()-a};d.Sy=function(a){var b=Wg(a);a=Xg(a);if(this.gd.$l&&!this.gd.Rf&&b)return this.C.onSinkAvailabilityUpdated(this,2),!0;var c=!1;this.rh&&this.gd.Rf&&(c=!0);return chrome.declarativeWebRequest||this.gd.T1()||!a?c&&(b||a):!1};d.searchSinks=function(a,b){if(!this.Sy(a))return null;(a=this.Pl.LR(b))&&this.bA([a]);return a};d.ma=function(){return"CloudProvider"};
d.getData=function(){return[void 0,{cloudEnabled:this.rh,cloudOn:this.Ni,notifiedHangoutsPrivacy:this.pm}]};d.$a=function(){var a=wh(this);a&&(a.cloudEnabled&&(this.rh=a.cloudEnabled),a.cloudOn&&(this.Ni=a.cloudOn),a.notifiedHangoutsPrivacy&&(this.pm=a.notifiedHangoutsPrivacy))};d.Dca=function(a,b){a=new Un(a,b);return yg(a.start())};d.a=x("mr.CloudProvider");var Xn=new Th("pseudo:cloud","","hangout","Add a hangout","default");var Yn=function(){Ki.call(this,12,"ExternalMessageListener","mr.ProviderManager",chrome.runtime.onMessageExternal)};ja(Yn,Ki);Yn.prototype.tv=function(a,b){return b.id&&-1!=Zn.indexOf(b.id)?"start"==a.type||"stop"==a.type:!1};Yn.prototype.ex=function(){return!0};var ao=function(){$n||($n=new Yn);return $n},$n=null,Zn=["idmofbkcelhplfjnmmdolenpigiiiecc","ggedfkijiiammpnbdadhllnehapomdge","njjegkblellcjnakomndbaloifhcoccg"];var bo=function(){Ki.call(this,11,"InternalMessageListener","mr.ProviderManager",chrome.runtime.onMessage)};ja(bo,Ki);bo.prototype.tv=function(a,b){return"retrieve_log_data"==a.type&&b.id==chrome.runtime.id&&b.url=="chrome-extension://"+b.id+"/feedback.html"};bo.prototype.ex=function(){return!0};var eo=function(){co||(co=new bo);return co},co=null;var fo,go,ho=x("mr.Init"),io=function(a){var b=new zm(a),c=new xn(a,b),b=[b,c];b.push(new Wn(a));return b};Jn.Y().init();fo=new Dg("MediaRouter.Provider.WakeDuration");go=new Rn;
var jo=(new Promise(function(a,b){switch(window.location.host){case "enhhojjnijigcajfphajepfemndkmdlo":a();break;case "pkedcjkdefgpdelpbcmbmeomcjbeemfm":chrome.management.get("enhhojjnijigcajfphajepfemndkmdlo",function(c){chrome.runtime.lastError||!c.enabled?a():b(Error("Dev extension is enabled"))});break;default:b(Error("Unknown extension id"))}})).then(function(){return chrome.mojoPrivate&&chrome.mojoPrivate.requireAsync?new Promise(function(a){chrome.mojoPrivate.requireAsync("media_router_bindings").then(function(b){b.start().then(function(c){a({mrService:b,mrInstanceId:c})})})}):
Promise.reject(Error("No mojo service loaded"))}).then(function(a){if(!a.mrService)throw Error("Failed to get MR service");var b=a.mrInstanceId;if(!b)throw Error("Failed to get MR instance ID.");ho.info("MR instance ID: "+b);a=a.mrService;if(!go)throw Error("providerManager not initialized.");a.setHandlers(go);Ah(b)&&fo.Pm("MediaRouter.Provider.FirstWakeDuration");chrome.runtime.onSuspend.addListener(fo.end.bind(fo));Eh(b);Jn.Y().f7();b=io(go);window.addEventListener("unhandledrejection",function(a){a=
a.reason;a.stack||(a=Error(a));ho.error("Unhandled promise rejection.",a)});go.Bc(a,b)}).then(void 0,function(a){ho.l(a.message);throw a;});[].concat([ao(),eo()],ka(qn()),ka([Vk(),Xk()]),ka([Ti()])).forEach(function(a){return a.QR()});ao().addListener();eo().addListener();jo.then(void 0,function(){return window.close()});
