'use strict';var tg;m("mr.IssueSeverity",{Qfa:"fatal",Yia:"warning",fha:"notification"},void 0);m("mr.IssueAction",{Ffa:"dismiss",Iga:"learn_more"},void 0);var ug=function(a,b,c){this.routeId=null;this.severity=b;this.isBlocking="fatal"==this.severity?!0:!1;this.title=a;this.message=null;this.defaultAction=c;this.helpPageId=this.secondaryActions=null};ug.prototype.v$=function(a){this.helpPageId=a;return this};ug.prototype.iba=function(a){this.secondaryActions=a;return this};
ug.prototype.A$=function(a){if(!a&&"fatal"==this.severity)throw Error("All FATAL issues must be blocking.");this.isBlocking=a;return this};var vg=function(a,b){var c=this;this.zp=void 0===b?null:b;this.promise=new Promise(function(b,f){var e=function(a){c.zp=null;f(a)};c.n7=e;a(function(a){c.zp=null;b(a)},e)})};vg.prototype.cancel=function(a){this.n7(a);if(this.zp){var b=this.zp;this.zp=null;setTimeout(function(){return b(a)},0)}};
vg.prototype.Hw=function(a,b){b=void 0===b?null:b;var c=this;return new vg(function(e,f){c.promise.then(function(b){if(a)try{e(a(b))}catch(k){f(k)}else e(b)},function(a){if(b)try{e(b(a))}catch(k){f(k)}else f(a)})},function(a){c.cancel(a)})};vg.prototype.then=function(a,b){return this.Hw(a,void 0===b?null:b)};vg.prototype.catch=function(a){return this.Hw(null,a)};
var wg=function(a){return new vg(function(b){b(a)})},xg=function(a){return new vg(function(b,c){c(a)})},yg=function(a){return new vg(function(b,c){a.then(b,c)})},zg=function(a,b){var c=!1,e=null;return new vg(function(f,g){a.then(function(a){c||(e=b(a),e.promise.then(f,g))},g)},function(a){e?e.cancel(a):c=!0})};var Ag=function(a){this.ua=a;this.ni=Date.now()};Ag.prototype.Yx=function(a,b){null!=b&&(a+="_"+b);return a};Ag.prototype.Pm=function(a){this.ua=a};Ag.prototype.end=function(a){Bg(this.Yx(this.ua,a),Date.now()-this.ni)};var Bg=function(a,b){0>b&&(Cg.l("Timing analytics event with negative time"),b=0);1E4<b&&(b=1E4);try{chrome.metricsPrivate.recordTime(a,b)}catch(c){Cg.l("Failed to record time "+b+" in "+a)}},Cg=x("mr.Timing"),Dg=function(a){Ag.call(this,a)};ja(Dg,Ag);
Dg.prototype.end=function(a){a=this.Yx(this.ua,a);var b=Date.now()-this.ni;if(0>b)Eg.l("Timing analytics event with negative time");else{1E4>b&&(b=1E4);18E4<b&&(b=18E4);try{chrome.metricsPrivate.recordMediumTime(a,b)}catch(c){Eg.l("Failed to record time "+b+" in "+a)}}};var Eg=x("mr.MediumTiming"),Fg=function(a){Ag.call(this,a)};ja(Fg,Ag);
Fg.prototype.end=function(a){a=this.Yx(this.ua,a);var b=Date.now()-this.ni;if(0>b)Gg.l("Timing analytics event with negative time");else{18E4>b&&(b=18E4);36E5<b&&(b=36E5);try{chrome.metricsPrivate.recordLongTime(a,b)}catch(c){Gg.l("Failed to record time "+b+" in "+a)}}};
var Gg=x("mr.LongTiming"),Hg=x("mr.Analytics"),Ig=function(a){try{chrome.metricsPrivate.recordUserAction(a)}catch(b){Hg.l("Failed to record event "+a)}},Jg=function(a,b,c){var e,f=0,g;for(g in c)f++,c[g]==b&&(e=g);if(e){c={metricName:a,type:"histogram-linear",min:1,max:f,buckets:f+1};try{chrome.metricsPrivate.recordValue(c,b)}catch(k){Hg.l("Failed to record enum value "+e+" ("+b+") in "+a,k)}}else Hg.error("Unknown analytics value, "+b+" for histogram, "+a,Error())},Kg=function(a,b){try{if(0>b)throw Error("Invalid count for "+
a+": "+b);100<b&&Hg.l("Small count for "+a+" exceeded limits: "+b,Error());chrome.metricsPrivate.recordSmallCount(a,b)}catch(c){Hg.l("Failed to record small count "+a+" ("+b+")",c)}};var Lg={hfa:0,ffa:1,jfa:2,gfa:3,Nea:4,ifa:5,lga:6,Bia:7,zfa:8,qD:9},Mg=function(a,b){a=Error.call(this,a);this.message=a.message;"stack"in a&&(this.stack=a.stack);this.reason=0<=b&&9>=b?b:9};ja(Mg,Error);var Ng=function(){return null!=Rb&&-1!=Rb.indexOf("CrOS")},Og=function(){var a=Rb;if("string"!=typeof a)return!1;a=a.match(/Windows NT \d+.\d+/);if(!(a instanceof Array))return!1;a=a[0];a=a.match(/\d+.\d+/);if(!(a instanceof Array))return!1;a=a[0];return 6.2<=parseFloat(a)},Pg=function(){return Ng()?"ChromeOS":hc?"Windows":gc?"Mac":ic?"Linux":"Other"};var Qg=function(a){this.Ji=a;this.tc=this.sm=null;this.a=x("mr.mirror.MirrorMediaStream")};d=Qg.prototype;d.ON=function(a){this.sm=a};d.Kx=function(){return this.Ji};d.start=function(){return this.Ji.jJ()?this.Ica():this.Ji.fJ()?this.Bca():this.zca()};
d.Ica=function(){var a=this,b=this.Ji.sC();this.a.info("Starting tab capture with constraints "+JSON.stringify(b));return new Promise(function(c,e){chrome.tabCapture.capture(b,function(b){b?(a.TB(b),c(a)):e(a.gF())});window.setTimeout(function(){e(new Mg("chrome.tabCapture.capture failed to call its callback",2))},5E3)})};d.R0=function(a){a&&this.a.info(function(){return"Track "+JSON.stringify(a.target)+" ended"});this.stop()};
d.gF=function(){return chrome.runtime.lastError&&chrome.runtime.lastError.message?new Mg(chrome.runtime.lastError.message,7):new Mg("empty_stream",0)};
d.zca=function(){var a=this;return(new Promise(function(a,c){var b=["screen","audio"];"Linux"==Pg()&&b.push("window");var f=chrome.desktopCapture.chooseDesktopMedia(b,a);window.setTimeout(function(){chrome.desktopCapture.cancelChooseDesktopMedia(f);c(new Mg("timeout",1))},6E4)})).then(function(b){if(!b)throw new Mg("User cancelled capture dialog",3);var c=a.Ji.sC(b);a.a.info(function(){return"Starting desktop capture with constraints "+JSON.stringify(c)});return new Promise(function(a,b){navigator.webkitGetUserMedia(c,
a,function(a){var c=8;if("PermissionDeniedError"==a.name||"NotAllowedError"==a.name)c=3;b(new Mg(a.name+" "+a.constraintName+": "+a.message,c))})})}).then(function(b){if(b)a.TB(b);else throw new Mg("empty_stream",8);return a})};d.Bca=function(){var a=this,b=this.Ji.sC();this.a.info(function(){return"Starting offscreen tab capture with constraints "+JSON.stringify(b)});return new Promise(function(c,e){chrome.tabCapture.captureOffscreenTab(a.Ji.d3.toString(),b,function(b){b?(a.TB(b),c(a)):e(a.gF())})})};
d.TB=function(a){var b=this;this.tc=a;a.getTracks().forEach(function(a){a.onended=b.R0.bind(b)})};d.stop=function(){this.tc&&(this.tc.getTracks().forEach(function(a){a.onended=null;a.stop()}),this.tc=null,this.sm&&this.sm())};var Rg,Sg={Oga:0,kfa:1,lfa:2,Bfa:3,Cfa:4,Vfa:5,mga:6,Nga:7,Yga:8,Zga:9,Qha:10,fia:11,gia:12,pia:13,Aia:14},Tg=function(a){void 0==Rg&&(Jg("MediaRouter.Provider.WakeEvent",a,Sg),Rg=a)};var Wg=function(a){return Ug(a)||Vg(a)},Xg=function(a){if(!Ka(a,"http:")&&!Ka(a,"https:"))return!1;var b=document.createElement("a");b.href=a;return"http:"!=b.protocol&&"https:"!=b.protocol?!1:-1==b.hash.indexOf("__castAppId__")},Yg=["https://docs.google.com"],Ug=function(a){return Ka(a,"urn:x-org.chromium.media:source:tab:")||-1!=a.indexOf("0F5096E8")},Vg=function(a){return"urn:x-org.chromium.media:source:desktop"==a};var Zg=function(a){return(new Promise(function(b){chrome.tabs.get(a,b)})).then(function(b){if(!b)throw Error("No such tab "+a);return b})};var $g=function(){},eh=function(a){ah.info("Loading module "+a);var b=bh.get(a)||null;if(b)return Promise.resolve(b);b=ch.get(a);b||(b=new xc,ch.set(a,b),dh(a,b));return b.promise},dh=function(a,b){var c=fh.get(a)||null;if(!c)b.reject(Error("No corresponding bundle for "+a));else if(!gh.has(c)){var e=hh.get(c);e||(ah.info("Loading bundle "+c+" for module "+a),e=ih(c),hh.set(c,e));e.catch(function(a){b.reject(a)})}},ih=function(a){var b=new xc;b.promise.then(function(){ah.info("Bundle "+a+" loaded")},
function(b){ah.error("Failed to load bundle "+a);throw b;});var c=document.createElement("script");c.src=chrome.extension.getURL(a);c.setAttribute("type","text/javascript");c.async=!0;c.onload=function(){return b.resolve(void 0)};c.onerror=function(){return b.reject(Error("Failed to load bundle "+a))};document.head.appendChild(c);return b.promise},jh=function(a,b){if(bh.has(a))throw Error("Duplicate module "+a);bh.set(a,b);(a=ch.get(a))&&a.resolve(b)};
$g.prototype.handleEvent=function(a,b){for(var c=1;c<arguments.length;++c);throw Error("Not implemented");};
var fh=new Map([["mr.cast.SinkDiscoveryService","background_script.js"],["mr.mirror.cast.Service","mirroring_cast_streaming.js"],["mr.cloud.discovery.CloudSinkDiscoveryService","background_script.js"],["mr.dial.SinkDiscoveryService","background_script.js"],["mr.mirror.hangouts.HangoutsService","mirroring_hangouts.js"],["mr.ProviderManager","background_script.js"],["mr.mirror.webrtc.WebRtcService","mirroring_webrtc.js"]]),gh=new Set(["background_script.js"]),ah=x("mr.Module"),bh=new Map,ch=new Map,
hh=new Map;var kh=chrome.i18n.getMessage("545449835455981095");var lh=function(a,b){this.T8=a;this.Dt=b||null;this.jf=this.Ka=null;this.m=x("mr.mirror.Service."+a);this.cA=u(this.P0,this);this.ap=this.Un=!1};ja(lh,$g);d=lh.prototype;d.Bc=function(a){this.ap||(this.Dt=a,this.ap=!0,this.vF())};d.vF=function(){};d.getName=function(){return this.T8};
d.tq=function(a,b,c,e,f){var g=this;this.m.info("Start mirroring on route "+a.id);if(!this.ap)return xg(Error("Not initialized"));var k=this.vg(b,c,e);return yg(this.EF(b,a.Le.tabId).then(function(){return g.JO()}).then(function(){return(new Qg(k.Kx())).start()}).then(function(b){g.jf=b;b.ON(function(){g.sm(b)});return f?f(a).promise:a}).then(function(a){g.Ka=g.Ir(k,a);return g.Ka.start(g.jf.tc)}).then(function(){k.Yy()&&!chrome.tabs.onUpdated.hasListener(g.cA)&&chrome.tabs.onUpdated.addListener(g.cA);
return g.oL(a,k,c)}).then(null,function(a){g.ZK(a);g.qh();throw a;}))};d.mv=function(a,b,c,e,f,g){this.m.info("Update mirroring on route "+a.id);return this.ap?yg(this.EF(b,f).then(this.WU.bind(this,a,b,c,e,g))):xg(Error("Not initialized"))};d.EF=function(a,b){return Ug(a)?b?Zg(b).then(function(a){if(!a.active)throw new Mg("Tab to be mirrored is not active",7);}):Promise.reject(new Mg("BUG: Tab ID is required.")):Promise.resolve()};
d.WU=function(a,b,c,e,f){var g=this;b=this.vg(b,c,e);if(!this.Ka.QO())return Promise.reject(new Mg("Session does not support updating stream",7));var k=!1;return(new Qg(b.Kx())).start().then(function(b){var c=g.jf;g.jf=b;b.ON(u(g.sm,g,b));k=!0;c.stop();return f?f(a).promise:a}).then(function(a){g.Ka.dba(a);return g.Ka.sP(g.jf.tc)}).then(this.oL.bind(this,a,b,c)).then(null,function(a){g.ZK(a);k&&g.qh();throw a;})};
d.oL=function(a,b,c){var e=this;return new Promise(function(f,g){if(b.Yy())e.Ka.Oda(a.Le.tabId).then(function(){e.Ka.tu();e.hu();f(e.Ka.bb)},function(a){e.m.error("Failed to obtain initial tab info.",a);g(a)});else{if(b.gJ()){var k="Capturing "+a.mediaSource;e.Ka.KB(k,k,null);e.Ka.tu();e.LA()}else e.Ka.KB("Capturing Desktop","Capturing Desktop",null),e.Ka.tu(),e.du();e.rT(c,e.jf);f(e.Ka.bb)}})};
d.ZK=function(a){a.reason=null!=a.reason?a.reason:9;this.m.error("Failed to start mirroring: "+a.message+",  reason = "+a.reason+": "+a.stack);this.fu(a.reason)};d.sm=function(a){this.jf==a&&(this.gu(),this.qh())};d.JO=function(){var a=this;return this.ap?this.qh().then(function(b){b&&a.eu();return b}):Promise.reject("Not initialized")};
d.qh=function(){var a=this;if(this.Un)return Promise.resolve(!1);this.Un=!0;chrome.tabs.onUpdated.removeListener(this.cA);this.jf&&(this.jf.stop(),this.jf=null);if(this.Ka)return this.lw().then(function(){a.Ka&&(a.Ka.stop(),a.Dt.Wz(a.Ka.bb.id),a.Ka=null);a.Un=!1;return!0},function(b){a.m.error("Error cleaning up",b);a.Un=!1});this.Un=!1;return Promise.resolve(!1)};d.lw=function(){return Promise.resolve()};
d.P0=function(a,b,c){Tg(14);this.Ka&&this.Ka.tabId&&this.Ka.tabId==a&&("complete"==b.status||b.favIconUrl&&"complete"==c.status)&&(this.Ka.tP(c),this.Dt.KK(this.Ka.bb),this.Ka.tu())};d.rT=function(a,b){a.captureAudio&&b.tc&&!b.tc.getAudioTracks().length&&this.Dt.tg().send(new ug(kh,"notification","dismiss"))};d.vg=function(){};d.Ir=function(){};d.hu=function(){};d.du=function(){};d.LA=function(){};d.eu=function(){};d.fu=function(){};d.gu=function(){};d.Qg=function(){return Promise.reject("Not implemented")};var mh=function(a){this.bb=a;this.Ws=!1;this.tabId=this.QA=this.iconUrl=null};d=mh.prototype;d.KB=function(a,b,c){this.bb.description=a;this.Ws||this.bb.offTheRecord?this.iconUrl=this.QA=null:(this.QA=b,this.iconUrl=c)};d.tu=function(){this.Ws||this.bb.offTheRecord||this.CM()};d.Oda=function(a){this.tabId=a;return Zg(a).then(this.tP.bind(this))};d.tP=function(a){this.Ws=a.incognito;this.KB(a.title,Ka(a.url,"file://")?"Local content (Tab)":zc(a.url.match(yc)[3]||null,!0)+" (Tab)",a.favIconUrl)};
d.dba=function(a){this.bb=a};d.vg=function(){};d.start=function(){};d.QO=function(){return!1};d.sP=function(){};d.stop=function(){return!1};d.CM=function(){};var nh=function(a,b){this.type=a;this.data=b},oh=function(a){a=JSON.parse(a);if(!a.type)throw Error("Invalid message");return new nh(a.type,a.data)},ph=function(a,b,c,e){this.description=a;this.settings=b||null;this.mediaConstraints=c||null;this.presentationUrl=e||null};var rh=function(a,b){this.a=x("cv2.PeerConnection");this.I2=qh;this.D=this.fU(b);this.ax=this.$T(a);this.eV=!0;this.JM=new xc;this.nB=!1;this.Jt=0;this.Qs=null;this.uJ=this.Oz=0;this.Kb=!1;this.BK=this.CK=this.Rz=this.LK=this.y3=p};d=rh.prototype;d.LN=function(a){this.Rz=a};d.KN=function(a){this.CK=a};d.JN=function(a){this.BK=a};d.NN=function(a){this.LK=a};d.MN=function(a){this.ax.onmessage=function(b){a(b.data)}};d.Zs=function(){return this.Kb};
d.jZ=function(a){var b={};b.iceServers=[{url:"stun:stun.l.google.com:19302"}].concat(a);return b};d.fU=function(a){var b=this.jZ(a);a=new webkitRTCPeerConnection(b);a.onicecandidate=u(this.Tz,this);a.Mqa=u(this.S3,this);a.oniceconnectionstatechange=u(this.R3,this);this.a.info(function(){return"Created webkitRTCPeerConnnection with config: "+JSON.stringify(b)});return a};d.$T=function(a){return this.D.createDataChannel(a,{reliable:!1})};d.E8=function(a){"string"==typeof a?this.ax.send(a):this.ax.send(JSON.stringify(a))};
d.start=function(){this.Kb||(this.Kb=!0,this.$n())};d.stop=function(){this.a.info("Stopping peer connection...");this.Kb&&(this.Kb=!1,"closed"!=this.D.signalingState&&this.D.close());this.D=null};d.addStream=function(a){this.D.addStream(a)};d.removeStream=function(a){this.Kb&&this.D.removeStream(a)};d.$n=function(){var a=this;this.a.info("Sending offer to peer.");this.Oz=Date.now();this.D.createOffer(u(this.uN,this),function(b){a.a.l("Error creating offer.",b)},this.I2);this.JM.promise.then(function(b){a.LK(b)})};
d.uN=function(a){var b=this;this.a.info(function(){return"Setting local description: "+JSON.stringify(a)});this.D.setLocalDescription(a,function(){b.a.info("Local description set successfully")},function(a){b.a.l("Error setting local description.",a)})};d.SV=function(a){return{type:a.type,sdp:a.sdp}};
d.setRemoteDescription=function(a){var b=this;this.a.o(function(){return"<===: "+JSON.stringify(a)});var c=new RTCSessionDescription(a);this.a.info(function(){return"Setting remote description: "+JSON.stringify(c)});this.D.setRemoteDescription(c,function(){b.a.info("Remote description set successfully.")},function(a){b.a.l("Error setting remote description.",a)})};
d.Tz=function(a){var b=this;a.candidate?(this.Jt++,this.uJ=Date.now(),1==this.Jt?this.Qs=Wd(function(){b.a.info("ICE candidate gathering timed out.");b.Qs=null;b.bB()},5E3):this.nB&&this.a.l("Received ICE candidate after resolving session description.")):(this.a.info("End of ICE candidates."),Bg("MediaRouter.WebRtc.IceCandidateGathering.Duration.Reported",Date.now()-this.Oz),this.bB(),0<this.Jt&&Bg("MediaRouter.WebRtc.IceCandidateGathering.Duration.Real",this.uJ-this.Oz))};
d.S3=function(){"completed"==this.D.iceGatheringState&&this.bB()};d.bB=function(){Xd(this.Qs);this.Qs=null;this.nB||(this.a.info("Resolving sesion description after gathering "+this.Jt+" ICE candidates."),this.JM.resolve(this.SV(this.D.localDescription)),this.nB=!0)};
d.R3=function(a){var b=this;if(this.D){var c=this.D.iceConnectionState;this.a.info("New ICE connection state: "+c+".");"connected"==c?this.Rz("iceconnected"):"completed"==c?this.Rz("icecompleted"):"failed"==c?(this.a.l(function(){return"Ice connection failed: "+JSON.stringify(a)}),this.CK("icefailed")):"closed"==c?this.BK("iceclosed"):"disconnected"==c&&(this.a.l("Ice connection state is bad."),this.eV&&this.Zs()?(this.a.info("Restarting ICE."),this.D.createOffer(u(this.uN,this),function(a){b.a.l("Error creating new offer.",
a)},sh)):this.y3())}};var qh={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},sh={mandatory:{IceRestart:!0,OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};p.KO=window.localStorage;
var th=0,vh=function(a){return(a=window.localStorage.getItem(uh(a,!1)))?JSON.parse(a):null},wh=function(a){return(a=window.localStorage.getItem(uh(a,!0)))?JSON.parse(a):null},yh=function(a){if(xh.has(a.ma()))throw Error("Duplicate instance name "+a.ma());xh.set(a.ma(),a);a.$a()},Eh=function(a){for(var b=0,c=ia(Object.keys(p.KO)),e=c.next();!e.done;e=c.next()){var e=e.value,f=e.length+window.localStorage.getItem(e).length;e.startsWith("mr.")?th+=f:b+=f}zh=a;(window.localStorage.getItem("version")&&window.localStorage.getItem("version")!==
chrome.runtime.getManifest().version||Ah(a))&&Bh();Ch.info("initialize: "+th+" bytes used, "+b+" other bytes");chrome.runtime.onSuspend.addListener(Dh)},zh=null,Ch=x("mr.PersistentDataManager"),xh=new Map,uh=function(a,b){return"mr."+(b?"persistent.":"temp.")+a.ma()},Ah=function(a){return!!window.localStorage.getItem("mrInstanceId")&&window.localStorage.getItem("mrInstanceId")!==a},Dh=function(){Ch.info("onSuspend");Fh("version",chrome.runtime.getManifest().version);zh&&Fh("mrInstanceId",zh);xh.forEach(Gh)},
Gh=function(a){var b=a.getData();b&&void 0!=b[0]&&Fh(uh(a,!1),JSON.stringify(b[0]));b&&void 0!=b[1]&&Fh(uh(a,!0),JSON.stringify(b[1]))},Fh=function(a,b){var c;c=window.localStorage.getItem(a);c=void 0!=c?b.length-c.length:a.length+b.length;52E5<=th+c&&(Ch.l("Unable to write "+c+" bytes"),Bh());52E5<=th+c?Ch.error("Unable to write "+c+" bytes after clearing temporary"):(window.localStorage.setItem(a,b),th+=c)},Bh=function(){for(var a=ia(Object.keys(p.KO)),b=a.next();!b.done;b=a.next())b=b.value,b.startsWith("mr.temp.")&&
(th-=b.length+window.localStorage.getItem(b).length,delete window.localStorage[b]);Ch.info("removeTemporary_: "+th+" bytes used")};var Hh=D("Firefox"),Ih=Vb()||D("iPod"),Jh=D("iPad"),Kh=D("Android")&&!(Ub()||D("Firefox")||D("Opera")||D("Silk")),Lh=Ub(),Mh=D("Safari")&&!(Ub()||D("Coast")||D("Opera")||D("Edge")||D("Silk")||D("Android"))&&!(Vb()||D("iPad")||D("iPod"));var Oh=function(){var a=this;this.maxWidth=1920;this.maxHeight=1080;this.minWidth=320;this.minHeight=180;this.maxFrameRate=30;this.minVideoBitrate=300;this.maxVideoBitrate=5E3;this.audioBitrate=0;this.maxLatencyMillis=800;this.animatedLatencyMillis=this.minLatencyMillis=400;this.dscpEnabled=gc||ic||Ng()||Og();this.enableLogging=!0;this.useTdls=!1;this.captureAudio=this.captureVideo=!0;this.a=x("mr.mirror.Settings");var b=window.localStorage?window.localStorage.getItem(Nh):null;if(r(b))try{var c=JSON.parse(b);
c&&(this.wP(c),this.a.l(function(){return"Initial mr.mirror.Settings overridden to: "+a.rC()}))}catch(e){throw this.a.error(Nh+' must be of the form \'{"maxWidth":640, "maxHeight":360}\'.',e),Error("Overrides not parseable.  See ERROR log for details.");}},Nh="mr.mirror.Settings.Overrides";d=Oh.prototype;d.clone=function(){var a=new Oh;a.wP(this);return a};d.rC=function(){return JSON.stringify(this,function(a,b){if(0==a.length||"boolean"==typeof b||"number"==typeof b||"string"==typeof b)return b})};
d.wP=function(a){for(var b in this){var c=a[b];if(null!=c){var e=this[b];"boolean"!=typeof e&&"number"!=typeof e&&"string"!=typeof e||typeof e!=typeof c||(this[b]=c)}}};
d.xT=function(){var a=screen.width,b=screen.height;this.maxHeight*a<this.maxWidth*b?(a=Math.min(this.maxWidth,a),a-=a%160,b=90*a/160):(b=Math.min(this.maxHeight,b),b-=b%90,a=160*b/90);if(a<Math.max(160,this.minWidth)||b<Math.max(90,this.minHeight))a=Math.max(160,this.minWidth),b=Math.max(90,this.minHeight);this.maxWidth=a;this.maxHeight=b};d.IU=function(){this.minHeight=this.minWidth=0};
var Ph=function(a,b){var c=new Oh;c.captureAudio=a;c.captureVideo=b;c.xT();c.a.info(function(){return"mr.mirror.Settings after screen size adjustments: "+c.rC()});return c};Oh.prototype.PY=function(){return String(this.minWidth+"x"+this.minHeight)};Oh.prototype.zY=function(){return String(this.maxWidth+"x"+this.maxHeight)};Oh.prototype.LZ=function(){return this.minWidth==this.maxWidth&&this.minHeight==this.maxHeight?"fixed":0<this.minWidth&&0<this.minHeight?"fixed-aspect-ratio":"variable"};var Qh=function(a){this.Oca=a;this.nm=1E3*Math.floor(1E6*Math.random())};d=Qh.prototype;d.DF=function(){yh(this)};d.zs=function(){var a=this.nm++;0==a&&(a=this.nm++);return a};d.ma=function(){return"IdGenerator."+this.Oca};d.getData=function(){return[this.nm]};d.$a=function(){var a=vh(this);a&&(this.nm=a)};var Rh=function(a){return B(a,function(a){a=a.toString(16);return 1<a.length?a:"0"+a}).join("")},Sh=function(a){for(var b=[],c=0,e=0;e<a.length;e++){var f=a.charCodeAt(e);128>f?b[c++]=f:(2048>f?b[c++]=f>>6|192:(55296==(f&64512)&&e+1<a.length&&56320==(a.charCodeAt(e+1)&64512)?(f=65536+((f&1023)<<10)+(a.charCodeAt(++e)&1023),b[c++]=f>>18|240,b[c++]=f>>12&63|128):b[c++]=f>>12|224,b[c++]=f>>6&63|128),b[c++]=f&63|128)}return b};chrome.cast.VERSION=[1,2];m("chrome.cast.VERSION",chrome.cast.VERSION,void 0);chrome.cast.Xda=!0;m("chrome.cast.usingPresentationApi",chrome.cast.Xda,void 0);chrome.cast.Error=function(a,b,c){this.code=a;this.description=b||null;this.details=c||null};m("chrome.cast.Error",chrome.cast.Error,void 0);chrome.cast.eR=function(a){this.platform=a;this.packageId=this.url=null};m("chrome.cast.SenderApplication",chrome.cast.eR,void 0);chrome.cast.Image=function(a){this.url=a;this.width=this.height=null};
m("chrome.cast.Image",chrome.cast.Image,void 0);chrome.cast.Volume=function(a,b){this.level=l(a)?a:null;this.muted=l(b)?b:null};m("chrome.cast.Volume",chrome.cast.Volume,void 0);var Th=function(a,b,c,e,f){this.id=a;this.friendlyName=b;this.iconType=c||"generic";this.description=e||null;this.domain=f||null;this.isLaunching_=!1};var Uh=function(a,b){this.input=a;this.domain=b};var Vh=function(a,b){this.ih=a;this.pda=b},Wh=new Vh("https://www.googleapis.com/clouddevices/v1","AIzaSyAOZM8ZYeov685QMjXT3sC7XNizfrTEKjA"),Xh=new Vh("https://www.googleapis.com/calendar/v3",""),Yh=new Vh("https://www.googleapis.com/hangouts/v1",""),Zh=new Vh("https://networktraversal.googleapis.com/v1alpha","AIzaSyAOZM8ZYeov685QMjXT3sC7XNizfrTEKjA");var $h=function(a,b){this.email=a;this.imageUrl=null!=b?b:null},ai=function(a){this.type=a},bi=function(a,b,c){this.type="__cloud_webrtc_session_message__";this.sessionDescription=a;this.user=null!=b?b:null;this.flungUrl=null!=c?c:null};ja(bi,ai);
var ci=function(a,b,c){this.name=a;this.parameters=b;this.minimalRole=null!=c?c:"user"},di={_settings:{type:"string"},_presentationRequest:{type:"string"},_optMediaConstraints:{type:"string"},_webrtcMessage:{type:"string"},_user:{type:"string"}},ei=new ci("_knockingStartWebrtcSession",di,"viewer"),fi=new ci("_startWebrtcSession",di),gi=new ci("_stopSession",{},"viewer");var hi=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];for(var e=a,c=ia(c),f=c.next();!f.done;f=c.next()){if(void 0==e||"object"!=typeof e)return;e=e[f.value]}return e};var ii=function(a){return Promise.all(a.map(function(a){return a.then(function(a){return{hs:!0,value:a}},function(a){return{hs:!1,reason:a}})}))};var ji=function(){this.vc=-1};var ki={$C:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},aQ:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},li=ki,li=ki;var ni=function(a,b){var c=["0"];b=mi[b][0]&7;if(0<b){c.push(".");for(var e=0;e<b;e++)c.push("0")}return a.replace(/0.00/g,c.join(""))},mi={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[32,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[50,"kr.","kr."],DOP:[2,"RD$","RD$"],EGP:[2,
"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[34,"Ft","Ft"],IDR:[0,"Rp","Rp"],ILS:[34,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],MNT:[0,"\u20ae","MN\u20ae"],MVR:[2,"Rf","MVR"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.",
"S/."],PHP:[2,"\u20b1","PHP"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u20bd","RUB"],SAR:[2,"Rial","Rial"],SEK:[50,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u0433\u0440\u043d.","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[48,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};var oi={cD:".",Hv:",",hD:"%",Qv:"0",FQ:"+",wQ:"-",fD:"E",iD:"\u2030",Iv:"\u221e",BQ:"NaN",bD:"#,##0.###",aR:"#E0",EQ:"#,##0%",bQ:"\u00a4#,##0.00",eQ:"USD"},pi=oi,pi=oi;var qi=function(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"},ri=qi,ri=qi;var si=function(a,b){if(void 0===b){b=a+"";var c=b.indexOf(".");b=Math.min(-1==c?0:b.length-c-1,3)}return 1==(a|0)&&0==b?"one":"other"},ti=si,ti=si;var ui=function(a,b){this.width=a;this.height=b};d=ui.prototype;d.clone=function(){return new ui(this.width,this.height)};d.toString=function(){return"("+this.width+" x "+this.height+")"};d.hS=function(){return this.width*this.height};d.yb=function(){return!this.hS()};d.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};d.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
d.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};d.scale=function(a,b){b=t(b)?b:a;this.width*=a;this.height*=b;return this};var vi=function(a){this.om=0;this.gm=a||100;this.bg=[]};d=vi.prototype;d.add=function(a){var b=this.bg[this.om];this.bg[this.om]=a;this.om=(this.om+1)%this.gm;return b};d.get=function(a){a=this.sK(a);return this.bg[a]};d.set=function(a,b){a=this.sK(a);this.bg[a]=b};d.W=function(){return this.bg.length};d.yb=function(){return 0==this.bg.length};d.clear=function(){this.om=this.bg.length=0};d.G=function(){return this.YY(this.W())};
d.YY=function(a){var b=this.W(),c=[];for(a=this.W()-a;a<b;a++)c.push(this.get(a));return c};d.pb=function(){for(var a=[],b=this.W(),c=0;c<b;c++)a[c]=c;return a};d.Aa=function(a){return a<this.W()};d.dl=function(a){for(var b=this.W(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};d.sK=function(a){if(a>=this.bg.length)throw Error("Out of bounds exception");return this.bg.length<this.gm?a:(this.om+Number(a))%this.gm};var wi=function(){this.vc=64;this.ja=[];this.ww=[];this.vR=[];this.Qt=[];this.Qt[0]=128;for(var a=1;a<this.vc;++a)this.Qt[a]=0;this.iv=this.Ul=0;this.reset()};w(wi,ji);wi.prototype.reset=function(){this.ja[0]=1732584193;this.ja[1]=4023233417;this.ja[2]=2562383102;this.ja[3]=271733878;this.ja[4]=3285377520;this.iv=this.Ul=0};
wi.prototype.sh=function(a,b){b||(b=0);var c=this.vR;if(r(a))for(var e=0;16>e;e++)c[e]=a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|a.charCodeAt(b+3),b+=4;else for(e=0;16>e;e++)c[e]=a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3],b+=4;for(e=16;80>e;e++){var f=c[e-3]^c[e-8]^c[e-14]^c[e-16];c[e]=(f<<1|f>>>31)&4294967295}a=this.ja[0];b=this.ja[1];for(var g=this.ja[2],k=this.ja[3],n=this.ja[4],q,e=0;80>e;e++)40>e?20>e?(f=k^b&(g^k),q=1518500249):(f=b^g^k,q=1859775393):60>e?(f=b&g|k&(b|g),q=2400959708):
(f=b^g^k,q=3395469782),f=(a<<5|a>>>27)+f+n+q+c[e]&4294967295,n=k,k=g,g=(b<<30|b>>>2)&4294967295,b=a,a=f;this.ja[0]=this.ja[0]+a&4294967295;this.ja[1]=this.ja[1]+b&4294967295;this.ja[2]=this.ja[2]+g&4294967295;this.ja[3]=this.ja[3]+k&4294967295;this.ja[4]=this.ja[4]+n&4294967295};
wi.prototype.update=function(a,b){if(null!=a){l(b)||(b=a.length);for(var c=b-this.vc,e=0,f=this.ww,g=this.Ul;e<b;){if(0==g)for(;e<=c;)this.sh(a,e),e+=this.vc;if(r(a))for(;e<b;){if(f[g]=a.charCodeAt(e),++g,++e,g==this.vc){this.sh(f);g=0;break}}else for(;e<b;)if(f[g]=a[e],++g,++e,g==this.vc){this.sh(f);g=0;break}}this.Ul=g;this.iv+=b}};
wi.prototype.digest=function(){var a=[],b=8*this.iv;56>this.Ul?this.update(this.Qt,56-this.Ul):this.update(this.Qt,this.vc-(this.Ul-56));for(var c=this.vc-1;56<=c;c--)this.ww[c]=b&255,b/=256;this.sh(this.ww);for(c=b=0;5>c;c++)for(var e=24;0<=e;e-=8)a[b]=this.ja[c]>>e&255,++b;return a};var xi={ACCEPTED:0,DENIED:1,TIMEOUT:2},yi={SUCCESS:0,kQ:1},zi={tR:0,SQ:1,bja:2,hga:3,gga:4,Uga:5,TIMEOUT:6,Nha:7},Ai={ega:0,wia:1},Bi={wha:0,Kga:1,Sia:2,$fa:3},Ci=function(a){Jg("MediaRouter.Cloud.Knock.Result",a,xi)},Di=function(a){Jg("MediaRouter.Cloud.Session.Start",a,yi)},Ei=function(a){Jg("MediaRouter.Cloud.Session.Type",a,Ai)},Fi=function(a){Jg("MediaRouter.Cloud.Device.UserRole",a,Bi)};var Gi=function(a){this.Mb=a;this.id=a.id;this.a=x("mr.cloud.devices.CloudDevice")};d=Gi.prototype;d.isAvailable=function(){if(this.getState().appStatus){var a=this.A1(),b=this.u1(),c=this.zE(864E5);this.a.o("Device id: "+this.id+", availability: GCM connected "+a+", app Available: "+b+", checked in: "+c);return a&&b&&c}a=this.zE(9E5);this.a.info("Availability for legacy receiver app: "+a);return a};d.zE=function(a){var b=this.jY();return!!(b&&b>Date.now()-a)};d.u1=function(){return"available"==this.getState().appStatus};
d.A1=function(){return"online"==this.Mb.connectionStatus};d.jY=function(){return this.Mb.lastUpdateTimeMs?Number(this.Mb.lastUpdateTimeMs):null};d.Ah=function(){return this.getState().settings.receiverName};d.getId=function(){return this.id};d.getState=function(){return this.Mb.state._cloudCast};d.H1=function(){return this.Mb.invitations?0!=this.Mb.invitations.length:!1};var Hi=function(a,b,c,e,f,g){this.nJ=a;this.Nd=b;this.sl=e||null;this.im=c||null;this.Ye=f||null;this.ak=g||null};d=Hi.prototype;d.Ah=function(){var a="";this.Ye?a=this.Ye:this.im&&(a=this.im);return a};d.getId=function(){return this.nJ+"@"+this.Nd};d.getService=function(){return this.Nd};d.sg=function(){return this.sl};d.merge=function(a){!this.ak&&a.ak&&(this.ak=a.ak);!this.Ye&&a.Ye&&(this.Ye=a.Ye);this.Ye&&a.Ye&&this.ak&&(this.Ye=a.Ye)};var Ii=function(a,b,c){this.state=a;this.type=null!=b?b:null;this.results=null!=c?c:null},Ji=function(a){this.wb=a};d=Ji.prototype;d.I8=function(a,b,c){var e=this;return this.DM(ei,a,b,c,35E3).then(function(a){return e.tI(a)})};d.L8=function(a,b,c){var e=this;return this.DM(fi,a,b,c,23E3).then(function(a){var b=a.state;return"done"==b?(a=e.iL(a),new Ii(b,a.type,new bi(a.sessionDescription))):new Ii(b)})};d.O8=function(a){return this.Mf(a,gi,{})};
d.DM=function(a,b,c,e,f){var g={_webrtcMessage:JSON.stringify(c.presentationUrl?new bi(c.description,null,c.presentationUrl):new bi(c.description))};c.settings&&(g._settings=c.settings.rC());c.mediaConstraints&&(g._optMediaConstraints=JSON.stringify(c.mediaConstraints));e&&(g._user=JSON.stringify(e));return this.Mf(b,a,g,f)};
d.tI=function(a){var b=this,c=a.state;switch(c){case "done":return Promise.resolve(this.o5(a));case "queued":case "inProgress":return this.$da(a).then(function(a){return b.tI(a)});default:return Promise.resolve(new Ii(c))}};d.$da=function(a){var b=this;return new Promise(function(c){var e=setInterval(function(){b.AV(a.id).then(function(a){"queued"!=a.state&&"inProgress"!=a.state&&(clearInterval(e),c(a))})},2E3)})};
d.o5=function(a){a=this.iL(a);return"__cloud_webrtc_session_message__"==a.type?new Ii("done","knocking_cloud_webrtc_session_message",new bi(a.sessionDescription)):new Ii("done",a.type)};d.Mf=function(a,b,c,e){a={deviceId:a,name:"_cloudCast."+b.name,parameters:c,expirationTimeoutMs:e||1E4};b={};e&&(b.responseAwaitMs=Math.min(e+5E3,25E3));e=this.wb.Zi(Wh.ih,["commands"],b);return this.wb.mh(e,"POST",a)};d.iL=function(a){return a.results&&a.results.results?JSON.parse(a.results.results):null};
d.AV=function(a){a=this.wb.Zi(Wh.ih,["commands",a]);return this.wb.mh(a,"GET")};Ji.$inject=["gapiService"];var Ki=function(a,b,c,e,f){for(var g=[],k=4;k<arguments.length;++k)g[k-4]=arguments[k];var n=this;this.tl=a;this.ua=b;this.Ft=c;this.La=e;this.i2=g;this.Rl=!1;this.Gg=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];return n.JU.apply(n,[].concat(ka(b)))}};d=Ki.prototype;d.QR=function(){yh(this)};d.PU=function(){this.La.addListener.apply(this.La,[].concat([this.Gg],ka(this.i2)))};d.addListener=function(){this.Rl||(this.Rl=!0,this.PU())};
d.removeListener=function(){this.Rl&&(this.La.removeListener(this.Gg),this.Rl=!1)};d.tv=function(a){for(var b=0;b<arguments.length;++b);return!0};d.JU=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];var e=this;Tg(this.tl);if(!this.tv.apply(this,[].concat(ka(b))))return!1;eh(this.Ft).then(function(a){return a.handleEvent.apply(a,[].concat([e.La],ka(b)))});return this.ex()};d.tj=function(){return this.Rl};d.ma=function(){return"mr.EventListener."+this.ua};d.getData=function(){return[this.Rl]};
d.$a=function(){vh(this)&&this.addListener()};d.ex=function(){};var Li=function(a){this.wb=a;this.vl=this.cm=this.yj=null;this.at=this.Ys=!1;this.a=x("mr.cloud.devices.CloudDevicesService");yh(this)};d=Li.prototype;d.getDevice=function(a){a=this.wb.Zi(Wh.ih,["devices",a]);return this.wb.mh(a,"GET").then(function(a){return new Gi(a)})};d.e2=function(){return this.IJ({descriptionSubstring:"Chrome Streaming Receiver"})};
d.IJ=function(a){var b=this,c=this.wb.Zi(Wh.ih,["devices"],a);return this.wb.mh(c,"GET").then(function(c){var e=(c.devices||[]).filter(function(a){return null!=a.commandDefs&&null!=a.commandDefs._cloudCast}).map(function(a){return new Gi(a)});if(c=c.nextPageToken){var g=Mb(a);g.token=c;return b.IJ(g).then(function(a){return e.concat(a)})}return e})};d.ma=function(){return"CloudDevicesService"};d.getData=function(){return[new Mi(this.yj,this.vl,this.cm)]};
d.$a=function(){var a=vh(this);a&&(this.yj=a.a2,this.vl=a.gcmRegistrationId,this.cm=a.Y1)};d.i7=function(){var a=this;return new Promise(function(b,c){a.Ys?c(Error("Registering...")):(a.Ys=!0,a.vl&&a.cm&&a.cm+864E5>=Date.now()?(a.Ys=!1,b(a.vl)):chrome.gcm.register(["919648714761"],function(e){a.Ys=!1;e?(a.a.o("Got GCM ID: "+e),a.vl=e,a.cm=Date.now(),a.yj=null,b(e)):(a.a.l("Error: "+chrome.runtime.lastError.message),a.vl=null,a.cm=null,a.yj=null,c(Error(chrome.runtime.lastError.message)))}))})};
d.gca=function(){return!this.yj||this.yj+864E5<Date.now()};d.subscribe=function(a){var b=this;if(this.at)return Promise.resolve();this.at=!0;if(!a||!this.gca())return Promise.resolve();a={filters:["myDevices"],gcmRegistrationId:a,gcmSenderId:"919648714761",expirationTimeMs:864E5};var c=this.wb.Zi(Wh.ih,["subscriptions","subscribe"],{});return this.wb.mh(c,"POST",a).then(function(){b.a.o("Subscribed on: "+Date.now());b.yj=Date.now();b.at=!1;return Promise.resolve()},function(a){b.at=!1;throw a;})};
var Mi=function(a,b,c){this.a2=a;this.gcmRegistrationId=b;this.Y1=c};var Ni=function(){this.Rf=!1;this.Ze=null;this.$l=!1;this.a=x("mr.cloud.identity.IdentityService");yh(this);this.g2();this.gO()};d=Ni.prototype;d.B1=function(){return"google.com"==this.kI()};d.T1=function(){return this.$l||this.Rf&&!!this.Ze&&(-1!=Oi.indexOf(this.Ze)||-1!=Oi.indexOf(this.kI()))};d.kI=function(){return this.Ze?this.Ze.substr(this.Ze.indexOf("@")+1):""};
d.getAuthToken=function(){return chrome.identity?new Promise(function(a,b){chrome.identity.getAuthToken({interactive:!1},function(c){chrome.runtime.lastError?b(Error("Unable to get user auth token: "+chrome.runtime.lastError.message)):null==c?b(Error("User is not logged in (no token found)")):a(c)})}):Promise.reject(Error("chrome.identity permission required for auth."))};d.vV=function(a){return new Promise(function(b){chrome.identity.removeCachedAuthToken({token:a},function(){b()})})};
d.gO=function(){var a=this;this.getAuthToken().then(function(b){chrome.identity.getProfileUserInfo(function(c){a.Rf=!!c.email||!!c.id;a.Ze=c.email||null;b&&!a.Rf&&(a.$l=!0)})},function(b){a.a.o("Unable to set sign in and email.",b)})};d.g2=function(){var a=this;chrome.identity.onSignInChanged.addListener(function(b,c){Tg(6);a.Rf=c;a.a.info("Signed in change: "+a.Rf);a.Rf?a.gO():(a.Ze=null,a.$l=!1)})};
d.c7=function(){var a=this;return this.getAuthToken().then(function(b){var c=window.gapi;if(!c)return a.a.error("gapi not loaded."),!1;a.a.info("Setting gapi auth token");c.auth.setToken({access_token:b});return!0})};d.ma=function(){return"IdentityService"};d.getData=function(){return[null,{signedIn:this.Rf,userEmail:this.Ze,kioskAuth:this.$l}]};d.$a=function(){var a=wh(this);a&&(a.signedIn&&(this.Rf=a.signedIn),a.userEmail&&(this.Ze=a.userEmail),a.kioskAuth&&(this.$l=a.kioskAuth))};var Oi="cloudview.test@gmail.com castouts.qa.nohangouts@gmail.com castouts.qa@gmail.com castouts-qa.com castouts-test.com google.com youtube.com nest.com waze.com netflix.com twitter.com yahoo.com salesforce.com whirlpool.com nytimes.com kohls.com squareup.com ivci.com".split(" ");var Pi=function(){var a=this;this.a=x("mr.cloud.settings.SettingsService");this.Qz=null;chrome.settingsPrivate.onPrefsChanged.addListener(function(b){Tg(13);if(a.Qz){b=ia(b);for(var c=b.next();!c.done;c=b.next())if(c=c.value,"media_router.cloudservices.enabled"==c.key){a.Qz.call(null,c.value);break}}})};d=Pi.prototype;d.saa=function(a){this.Qz=a};
d.oda=function(){var a=this.a;chrome.storage.sync.set({"mr.cloud.cloudEnabled":!0},function(){chrome.runtime.lastError&&a.l("Error setting cloud setting: "+JSON.stringify(chrome.runtime.lastError))})};d.PW=function(){var a=this;return this.DG().catch(function(){return a.DG().catch(function(b){a.a.l("Error retrieving cloud on setting.",b);return!1})})};d.DG=function(){return this.dH("mr.cloud.cloudEnabled").then(function(a){return!!a["mr.cloud.cloudEnabled"]})};
d.dH=function(a){return new Promise(function(b,c){chrome.storage.sync.get(a,function(a){chrome.runtime.lastError?c(chrome.runtime.lastError):b(a)})})};d.NW=function(){var a=this;return this.CG().catch(function(){return a.CG().catch(function(b){a.a.l("Error retrieving cloud enabled setting.",b);return!1})})};d.CG=function(){return this.qZ("media_router.cloudservices.enabled").then(function(a){return!!a.value})};
d.qZ=function(a){return new Promise(function(b,c){chrome.settingsPrivate.getPref(a,function(a){chrome.runtime.lastError?c(chrome.runtime.lastError):b(a)})})};d.qaa=function(){var a=this.a;chrome.storage.sync.set({"mr.cloud.notifiedHangouts":!0},function(){chrome.runtime.lastError&&a.l("Error setting notified Hangout privacy.",chrome.runtime.lastError)})};
d.cZ=function(){var a=this;return this.wH().catch(function(){return a.wH().catch(function(b){a.a.l("Error retrieving hangouts notified setting.",b);return!1})})};d.wH=function(){return this.dH("mr.cloud.notifiedHangouts").then(function(a){return!!a["mr.cloud.notifiedHangouts"]})};var Qi=function(){this.Ae=[];this.ef=[]};d=Qi.prototype;d.B2=function(){0==this.Ae.length&&(this.Ae=this.ef,this.Ae.reverse(),this.ef=[])};d.enqueue=function(a){this.ef.push(a)};d.xh=function(){this.B2();return this.Ae.pop()};d.W=function(){return this.Ae.length+this.ef.length};d.yb=function(){return 0==this.Ae.length&&0==this.ef.length};d.clear=function(){this.Ae=[];this.ef=[]};d.contains=function(a){return mb(this.Ae,a)||mb(this.ef,a)};
d.remove=function(a){var b;b=this.Ae;var c=eb(b,a);0<=c?(qb(b,c),b=!0):b=!1;return b||rb(this.ef,a)};d.G=function(){for(var a=[],b=this.Ae.length-1;0<=b;--b)a.push(this.Ae[b]);for(var c=this.ef.length,b=0;b<c;++b)a.push(this.ef[b]);return a};var Ri=function(){Ki.call(this,5,"cloud.GcmEventListener","mr.cloud.discovery.CloudSinkDiscoveryService",chrome.gcm.onMessage);this.a=x("mr.CloudGcmEventListener")};ja(Ri,Ki);Ri.prototype.tv=function(a){a=hi(a,"data","notification");if(!a)return this.a.error("Notification json not found"),!1;try{var b=JSON.parse(a);return!!b&&Array.isArray(b.events)&&0<b.events.length}catch(c){return this.a.error("Invalid json: "+a),!1}};var Ti=function(){Si||(Si=new Ri);return Si},Si=null;var Ui=function(a,b,c){this.bp=b||pi.eQ;this.tU=c||0;this.vt=40;this.Ke=1;this.sk=0;this.Gj=3;this.Ct=this.Ig=0;this.xO=this.DP=!1;this.Jp=this.Sj="";this.Th="-";this.mm="";this.ke=1;this.Kj=!1;this.oj=[];this.rv=this.jF=!1;this.Wn=0;this.aE=null;"number"==typeof a?this.gS(a):this.Mk(a)};d=Ui.prototype;d.$$=function(a){if(0<this.sk&&0<a)throw Error("Can't combine significant digits and minimum fraction digits");this.Ig=a;return this};d.Q$=function(a){this.Gj=a;return this};
d.tba=function(a){if(0<this.Ig&&0<=a)throw Error("Can't combine significant digits and minimum fraction digits");this.sk=a;return this};d.Mk=function(a){a.replace(/ /g,"\u00a0");var b=[0];this.Sj=this.Rt(a,b);var c=b[0];this.T5(a,b);c=b[0]-c;this.Jp=this.Rt(a,b);b[0]<a.length&&";"==a.charAt(b[0])?(b[0]++,1!=this.ke&&(this.Kj=!0),this.Th=this.Rt(a,b),b[0]+=c,this.mm=this.Rt(a,b)):(this.Th=this.Sj+this.Th,this.mm+=this.Jp)};
d.gS=function(a){switch(a){case 1:this.Mk(pi.bD);break;case 2:this.Mk(pi.aR);break;case 3:this.Mk(pi.EQ);break;case 4:this.Mk(ni(pi.bQ,this.bp));break;case 5:this.QD(1);break;case 6:this.QD(2);break;default:throw Error("Unsupported pattern type.");}};d.QD=function(a){this.Wn=a;this.Mk(pi.bD);this.$$(0);this.Q$(2);this.tba(2)};
d.parse=function(a,b){b=b||[0];if(0!=this.Wn)throw Error("Parsing of compact numbers is unimplemented");var c;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.Sj,b[0])==b[0],f=a.indexOf(this.Th,b[0])==b[0];e&&f&&(this.Sj.length>this.Th.length?f=!1:this.Sj.length<this.Th.length&&(e=!1));e?b[0]+=this.Sj.length:f&&(b[0]+=this.Th.length);a.indexOf(pi.Iv,b[0])==b[0]?(b[0]+=pi.Iv.length,c=Infinity):c=this.D5(a,b);if(e){if(a.indexOf(this.Jp,b[0])!=b[0])return NaN;b[0]+=this.Jp.length}else if(f){if(a.indexOf(this.mm,
b[0])!=b[0])return NaN;b[0]+=this.mm.length}return f?-c:c};
d.D5=function(a,b){var c=!1,e=!1,f=!1,g=1,k=pi.cD,n=pi.Hv,q=pi.fD;if(0!=this.Wn)throw Error("Parsing of compact style numbers is not implemented");for(var y="";b[0]<a.length;b[0]++){var G=a.charAt(b[0]),O=this.QG(G);if(0<=O&&9>=O)y+=O,f=!0;else if(G==k.charAt(0)){if(c||e)break;y+=".";c=!0}else if(G==n.charAt(0)&&("\u00a0"!=n.charAt(0)||b[0]+1<a.length&&0<=this.QG(a.charAt(b[0]+1)))){if(c||e)break}else if(G==q.charAt(0)){if(e)break;y+="E";e=!0}else if("+"==G||"-"==G)y+=G;else if(1==this.ke&&G==pi.hD.charAt(0)){if(1!=
g)break;g=100;if(f){b[0]++;break}}else if(1==this.ke&&G==pi.iD.charAt(0)){if(1!=g)break;g=1E3;if(f){b[0]++;break}}else break}1!=this.ke&&(g=this.ke);return parseFloat(y)/g};d.format=function(a){if(isNaN(a))return pi.BQ;var b=[],c=this.B_(null===this.aE?a:this.aE,a);a/=Math.pow(10,c.jx);b.push(c.prefix);var e=0>a||0==a&&0>1/a;b.push(e?this.Th:this.Sj);isFinite(a)?(a=a*(e?-1:1)*this.ke,this.rv?this.Rca(a,b):this.nC(a,this.Ke,b)):b.push(pi.Iv);b.push(e?this.mm:this.Jp);b.push(c.OO);return b.join("")};
d.kM=function(a){var b=Math.pow(10,this.Gj),c=0>=this.sk?Math.round(a*b):Math.round(this.k8(a*b,this.sk,this.Gj));isFinite(c)?(a=Math.floor(c/b),b=Math.floor(c-a*b)):b=0;return{UI:a,WV:b}};
d.nC=function(a,b,c){if(this.Ig>this.Gj)throw Error("Min value must be less than max value");c||(c=[]);a=this.kM(a);var e=Math.pow(10,this.Gj),f=a.UI,g=a.WV,k=0==f?0:this.Vs(f)+1,n=0<this.Ig||0<g||this.xO&&k<this.sk;a=this.Ig;n&&(a=this.xO&&0<this.sk?this.sk-k:this.Ig);for(var q="",k=f;1E20<k;)q="0"+q,k=Math.round(k/10);var q=k+q,y=pi.cD,k=pi.Qv.charCodeAt(0),G=q.length,O=0;if(0<f||0<b){for(f=G;f<b;f++)c.push(String.fromCharCode(k));if(2<=this.oj.length)for(b=1;b<this.oj.length;b++)O+=this.oj[b];
b=G-O;if(0<b)for(var f=this.oj,O=G=0,ua,ze=pi.Hv,sd=q.length,Kc=0;Kc<sd;Kc++){if(c.push(String.fromCharCode(k+1*Number(q.charAt(Kc)))),1<sd-Kc)if(ua=f[O],Kc<b){var vA=b-Kc;(1===ua||0<ua&&1===vA%ua)&&c.push(ze)}else O<f.length&&(Kc===b?O+=1:ua===Kc-b-G+1&&(c.push(ze),G+=ua,O+=1))}else{b=q;q=this.oj;f=pi.Hv;ua=b.length;ze=[];for(G=q.length-1;0<=G&&0<ua;G--){O=q[G];for(sd=0;sd<O&&0<=ua-sd-1;sd++)ze.push(String.fromCharCode(k+1*Number(b.charAt(ua-sd-1))));ua-=O;0<ua&&ze.push(f)}c.push.apply(c,ze.reverse())}}else n||
c.push(String.fromCharCode(k));(this.jF||n)&&c.push(y);e=""+(g+e);for(g=e.length;"0"==e.charAt(g-1)&&g>a+1;)g--;for(f=1;f<g;f++)c.push(String.fromCharCode(k+1*Number(e.charAt(f))))};d.yD=function(a,b){b.push(pi.fD);0>a?(a=-a,b.push(pi.wQ)):this.DP&&b.push(pi.FQ);a=""+a;for(var c=pi.Qv,e=a.length;e<this.Ct;e++)b.push(c);b.push(a)};d.yY=function(a,b){var c=Math.pow(10,b);if(isFinite(c)&&0!==c)return a/c;c=Math.pow(10,Math.floor(b/2));a=a/c/c;1==b%2&&(a=0<b?a/10:10*a);return a};
d.Rca=function(a,b){if(0==a)this.nC(a,this.Ke,b),this.yD(0,b);else{var c=Math.floor(Math.log(a)/Math.log(10)+2E-15);a=this.yY(a,c);var e=this.Ke;if(1<this.vt&&this.vt>this.Ke){for(;0!=c%this.vt;)a*=10,c--;e=1}else 1>this.Ke?(c++,a/=10):(c-=this.Ke-1,a*=Math.pow(10,this.Ke-1));this.nC(a,e,b);this.yD(c,b)}};d.QG=function(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=pi.Qv.charCodeAt(0);return b<=a&&a<b+10?a-b:-1};
d.Rt=function(a,b){for(var c="",e=!1,f=a.length;b[0]<f;b[0]++){var g=a.charAt(b[0]);if("'"==g)b[0]+1<f&&"'"==a.charAt(b[0]+1)?(b[0]++,c+="'"):e=!e;else if(e)c+=g;else switch(g){case "#":case "0":case ",":case ".":case ";":return c;case "\u00a4":if(b[0]+1<f&&"\u00a4"==a.charAt(b[0]+1))b[0]++,c+=this.bp;else switch(this.tU){case 0:c+=mi[this.bp][1];break;case 2:var g=this.bp,k=mi[g],c=c+(g==k[1]?g:g+" "+k[1]);break;case 1:c+=mi[this.bp][2]}break;case "%":if(!this.Kj&&1!=this.ke)throw Error("Too many percent/permill");
if(this.Kj&&100!=this.ke)throw Error("Inconsistent use of percent/permill characters");this.ke=100;this.Kj=!1;c+=pi.hD;break;case "\u2030":if(!this.Kj&&1!=this.ke)throw Error("Too many percent/permill");if(this.Kj&&1E3!=this.ke)throw Error("Inconsistent use of percent/permill characters");this.ke=1E3;this.Kj=!1;c+=pi.iD;break;default:c+=g}}return c};
d.T5=function(a,b){for(var c=-1,e=0,f=0,g=0,k=-1,n=a.length,q=!0;b[0]<n&&q;b[0]++)switch(a.charAt(b[0])){case "#":0<f?g++:e++;0<=k&&0>c&&k++;break;case "0":if(0<g)throw Error('Unexpected "0" in pattern "'+a+'"');f++;0<=k&&0>c&&k++;break;case ",":0<k&&this.oj.push(k);k=0;break;case ".":if(0<=c)throw Error('Multiple decimal separators in pattern "'+a+'"');c=e+f+g;break;case "E":if(this.rv)throw Error('Multiple exponential symbols in pattern "'+a+'"');this.rv=!0;this.Ct=0;b[0]+1<n&&"+"==a.charAt(b[0]+
1)&&(b[0]++,this.DP=!0);for(;b[0]+1<n&&"0"==a.charAt(b[0]+1);)b[0]++,this.Ct++;if(1>e+f||1>this.Ct)throw Error('Malformed exponential pattern "'+a+'"');q=!1;break;default:b[0]--,q=!1}0==f&&0<e&&0<=c&&(f=c,0==f&&f++,g=e-f,e=f-1,f=1);if(0>c&&0<g||0<=c&&(c<e||c>e+f)||0==k)throw Error('Malformed pattern "'+a+'"');a=e+f+g;this.Gj=0<=c?a-c:0;0<=c&&(this.Ig=e+f-c,0>this.Ig&&(this.Ig=0));this.Ke=(0<=c?c:a)-e;this.rv&&(this.vt=e+this.Ke,0==this.Gj&&0==this.Ke&&(this.Ke=1));this.oj.push(Math.max(0,k));this.jF=
0==c||c==a};var Vi={prefix:"",OO:"",jx:0};Ui.prototype.fI=function(a,b){var c=1==this.Wn?li.$C:li.aQ;null==c&&(c=li.$C);if(3>a)return Vi;a=Math.min(14,a);var e=c[Math.pow(10,a)];for(--a;!e&&3<=a;)e=c[Math.pow(10,a)],a--;if(!e)return Vi;b=e[b];return b&&"0"!=b?(b=/([^0]*)(0+)(.*)/.exec(b))?{prefix:b[1],OO:b[3],jx:a+1-(b[2].length-1)}:Vi:Vi};
Ui.prototype.B_=function(a){if(0==this.Wn)return Vi;a=Math.abs(a);var b=this.fI(1>=a?0:this.Vs(a),"other").jx;return this.fI(b+this.Vs(this.kM(a/Math.pow(10,b)).UI),"other")};Ui.prototype.Vs=function(a){for(var b=0;1<=(a/=10);)b++;return b};Ui.prototype.k8=function(a,b,c){if(!a)return a;b=b-this.Vs(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};var Wi=!bc&&!$b||$b&&9<=Number(vc)||bc&&uc("1.9.1");$b&&uc("9");var Xi=function(a){this.em=[];this.nA=[];this.Mz=new Ui(1);this.F5(a)},Yi=/'([{}#].*?)'/g,Zi=/''/g;d=Xi.prototype;d.format=function(a){return this.gs(a,!1)};d.gs=function(a,b){if(0==this.nA.length)return"";var c=[];this.Dx(this.nA,a,b,c);for(a=c.join("");0<this.em.length;)a=a.replace(this.xw(this.em),this.em.pop());return a};
d.Dx=function(a,b,c,e){for(var f=0;f<a.length;f++)switch(a[f].type){case 4:e.push(a[f].value);break;case 3:var g=a[f].value;this.VV(g,b,e);break;case 2:g=a[f].value;this.UV(g,b,c,e);break;case 0:g=a[f].value;this.$F(g,b,ti,c,e);break;case 1:g=a[f].value;this.$F(g,b,ri,c,e);break;default:z("Unrecognized block type: "+a[f].type)}};d.VV=function(a,b,c){b=b[a];l(b)?(this.em.push(b),c.push(this.xw(this.em))):c.push("Undefined parameter - "+a)};
d.UV=function(a,b,c,e){var f=a.gr;l(b[f])?(f=a[b[f]],l(f)||(f=a.other),this.Dx(f,b,c,e)):e.push("Undefined parameter - "+f)};d.$F=function(a,b,c,e,f){var g=a.gr,k=a.SD,n=+b[g];isNaN(n)?f.push("Undefined or invalid parameter - "+g):(k=n-k,g=a[b[g]],l(g)||(c=this.Mz.QY?c(k,this.Mz.QY()):c(k),g=a[c],l(g)||(g=a.other)),a=[],this.Dx(g,b,e,a),b=a.join(""),e?f.push(b):(e=this.Mz.format(k),f.push(b.replace(/#/g,e))))};d.F5=function(a){a&&(a=this.n1(a),this.nA=this.St(a))};
d.n1=function(a){var b=this.em,c=u(this.xw,this);a=a.replace(Zi,function(){b.push("'");return c(b)});return a=a.replace(Yi,function(a,f){b.push(f);return c(b)})};d.$r=function(a){var b=0,c=[],e=[],f=/[{}]/g;f.lastIndex=0;for(var g;g=f.exec(a);){var k=g.index;"}"==g[0]?(c.pop(),0==c.length&&(g={type:1},g.value=a.substring(b,k),e.push(g),b=k+1)):(0==c.length&&(b=a.substring(b,k),""!=b&&e.push({type:0,value:b}),b=k+1),c.push("{"))}b=a.substring(b);""!=b&&e.push({type:0,value:b});return e};
var $i=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,aj=/^\s*(\w+)\s*,\s*selectordinal\s*,/,bj=/^\s*(\w+)\s*,\s*select\s*,/;d=Xi.prototype;d.c5=function(a){return $i.test(a)?0:aj.test(a)?1:bj.test(a)?2:/^\s*\w+\s*/.test(a)?3:5};
d.St=function(a){var b=[];a=this.$r(a);for(var c=0;c<a.length;c++){var e={};if(0==a[c].type)e.type=4,e.value=a[c].value;else if(1==a[c].type)switch(this.c5(a[c].value)){case 2:e.type=2;e.value=this.L5(a[c].value);break;case 0:e.type=0;e.value=this.G5(a[c].value);break;case 1:e.type=1;e.value=this.E5(a[c].value);break;case 3:e.type=3;e.value=a[c].value;break;default:z("Unknown block type for pattern: "+a[c].value)}else z("Unknown part of the pattern.");b.push(e)}return b};
d.L5=function(a){var b="";a=a.replace(bj,function(a,c){b=c;return""});var c={};c.gr=b;a=this.$r(a);for(var e=0;e<a.length;){var f=a[e].value;e++;if(1==a[e].type)var g=this.St(a[e].value);else z("Expected block type.");c[f.replace(/\s/g,"")]=g;e++}return c};
d.G5=function(a){var b="",c=0;a=a.replace($i,function(a,e,f){b=e;f&&(c=parseInt(f,10));return""});var e={};e.gr=b;e.SD=c;a=this.$r(a);for(var f=0;f<a.length;){var g=a[f].value;f++;if(1==a[f].type)var k=this.St(a[f].value);else z("Expected block type.");e[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=k;f++}return e};
d.E5=function(a){var b="";a=a.replace(aj,function(a,c){b=c;return""});var c={};c.gr=b;c.SD=0;a=this.$r(a);for(var e=0;e<a.length;){var f=a[e].value;e++;if(1==a[e].type)var g=this.St(a[e].value);else z("Expected block type.");c[f.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=g;e++}return c};d.xw=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};var cj="undefined"!=typeof chrome&&!!chrome.networkingPrivate&&!!chrome.networkingPrivate.setWifiTDLSEnabledState&&Ng(),dj=Ng()||hc;var ej=chrome.i18n.getMessage("1522140683318860351"),fj=chrome.i18n.getMessage("4246483347873264186"),gj=chrome.i18n.getMessage("5991427458288444010"),hj=chrome.i18n.getMessage("6063910461797960050"),ij=chrome.i18n.getMessage("7735695102441495789"),jj=chrome.i18n.getMessage("4575332923598659024"),kj=chrome.i18n.getMessage("2297080986956220930"),lj=new Xi(kj),mj=function(a,b){return lj.format({ORGANIZER:a,PARTICIPANTS:b})};var nj=null,oj=null,pj=null,qj=bc||cc&&!Mh||Zb||!Mh&&!$b&&"function"==typeof h.atob,sj=function(a,b){rj();b=b?pj:nj;for(var c=[],e=0;e<a.length;e+=3){var f=a[e],g=e+1<a.length,k=g?a[e+1]:0,n=e+2<a.length,q=n?a[e+2]:0,y=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|q>>6,q=q&63;n||(q=64,g||(k=64));c.push(b[y],b[f],b[k],b[q])}return c.join("")},uj=function(a,b){if(qj&&!b)return h.atob(a);var c="";tj(a,function(a){c+=String.fromCharCode(a)});return c},vj=function(a){var b=new Uint8Array(Math.ceil(3*a.length/4)),c=
0;tj(a,function(a){b[c++]=a});return b.subarray(0,c)},tj=function(a,b){function c(b){for(;e<a.length;){var c=a.charAt(e++),f=oj[c];if(null!=f)return f;if(!Na(c))throw Error("Unknown base64 encoding at char: "+c);}return b}rj();for(var e=0;;){var f=c(-1),g=c(0),k=c(64),n=c(64);if(64===n&&-1===f)break;b(f<<2|g>>4);64!=k&&(b(g<<4&240|k>>2),64!=n&&b(k<<6&192|n))}},rj=function(){if(!nj){nj={};oj={};pj={};for(var a=0;65>a;a++)nj[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),
oj[nj[a]]=a,pj[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),62<=a&&(oj["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};var wj={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},xj=function(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new ui(a.clientWidth,a.clientHeight)},yj=function(a){return a?a.parentWindow||a.defaultView:window},Aj=function(a,b,c,e){function f(c){c&&b.appendChild(r(c)?a.createTextNode(c):
c)}for(;e<c.length;e++){var g=c[e];!ra(g)||ta(g)&&0<g.nodeType?f(g):A(zj(g)?C(g):g,f)}},Bj=function(a){return 9==a.nodeType?a:a.ownerDocument||a.document},Cj=function(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild(Bj(a).createTextNode(String(b)))}},zj=function(a){if(a&&"number"==typeof a.length){if(ta(a))return"function"==
typeof a.item||"string"==typeof a.item;if(sa(a))return"function"==typeof a.item}return!1},Dj=function(a){this.lo=a||h.document||document};d=Dj.prototype;d.getElementsByTagName=function(a,b){return(b||this.lo).getElementsByTagName(String(a))};d.setProperties=function(a,b){Eb(b,function(b,e){"style"==e?a.style.cssText=b:"class"==e?a.className=b:"for"==e?a.htmlFor=b:wj.hasOwnProperty(e)?a.setAttribute(wj[e],b):Ka(e,"aria-")||Ka(e,"data-")?a.setAttribute(e,b):a[e]=b})};d.createElement=function(a){return this.lo.createElement(String(a))};
d.createTextNode=function(a){return this.lo.createTextNode(String(a))};d.getWindow=function(){var a=this.lo;return a.parentWindow||a.defaultView};d.appendChild=function(a,b){a.appendChild(b)};d.append=function(a,b){Aj(Bj(a),a,arguments,1)};d.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
d.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null};d.getChildren=function(a){return Wi&&void 0!=a.children?a.children:gb(a.childNodes,function(a){return 1==a.nodeType})};d.isElement=function(a){return ta(a)&&1==a.nodeType};d.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};var Ej=function(a,b){this.sl=this.Vf=this.Ug="";this.Ma=null;this.$i=this.Jd="";this.he=this.I1=!1;var c;a instanceof Ej?(this.he=l(b)?b:a.he,this.Lu(a.Ug),this.ZB(a.Vo()),this.Om(a.sg()),this.Rm(a.Za()),this.ki(a.Jd),this.Iu(a.Kg.clone()),this.Du(a.$i)):a&&(c=String(a).match(yc))?(this.he=!!b,this.Lu(c[1]||"",!0),this.ZB(c[2]||"",!0),this.Om(c[3]||"",!0),this.Rm(c[4]),this.ki(c[5]||"",!0),this.Iu(c[6]||"",!0),this.Du(c[7]||"",!0)):(this.he=!!b,this.Kg=new Fj(null,null,this.he))};d=Ej.prototype;
d.toString=function(){var a=[],b=this.Ug;b&&a.push(Gj(b,Hj,!0),":");var c=this.sg();if(c||"file"==b)a.push("//"),(b=this.Vo())&&a.push(Gj(b,Hj,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.Za(),null!=c&&a.push(":",String(c));if(c=this.Jd)this.Os()&&"/"!=c.charAt(0)&&a.push("/"),a.push(Gj(c,"/"==c.charAt(0)?Ij:Jj,!0));(c=this.wX())&&a.push("?",c);(c=this.$i)&&a.push("#",Gj(c,Kj));return a.join("")};
d.resolve=function(a){var b=this.clone(),c=a.X0();c?b.Lu(a.Ug):c=a.Y0();c?b.ZB(a.Vo()):c=a.Os();c?b.Om(a.sg()):c=a.II();var e=a.Jd;if(c)b.Rm(a.Za());else if(c=a.HI()){if("/"!=e.charAt(0))if(this.Os()&&!this.HI())e="/"+e;else{var f=b.Jd.lastIndexOf("/");-1!=f&&(e=b.Jd.substr(0,f+1)+e)}f=e;if(".."==f||"."==f)e="";else if(-1!=f.indexOf("./")||-1!=f.indexOf("/.")){for(var e=Ka(f,"/"),f=f.split("/"),g=[],k=0;k<f.length;){var n=f[k++];"."==n?e&&k==f.length&&g.push(""):".."==n?((1<g.length||1==g.length&&
""!=g[0])&&g.pop(),e&&k==f.length&&g.push("")):(g.push(n),e=!0)}e=g.join("/")}else e=f}c?b.ki(e):c=a.W0();c?b.Iu(a.Kg.clone()):c=a.T0();c&&b.Du(a.$i);return b};d.clone=function(){return new Ej(this)};d.Lu=function(a,b){this.Xi();if(this.Ug=b?Lj(a,!0):a)this.Ug=this.Ug.replace(/:$/,"");return this};d.X0=function(){return!!this.Ug};d.Vo=function(){return this.Vf};d.ZB=function(a,b){this.Xi();this.Vf=b?Lj(a):a;return this};d.Y0=function(){return!!this.Vf};d.sg=function(){return this.sl};
d.Om=function(a,b){this.Xi();this.sl=b?Lj(a,!0):a;return this};d.Os=function(){return!!this.sl};d.Za=function(){return this.Ma};d.Rm=function(a){this.Xi();if(a){a=Number(a);if(isNaN(a)||0>a)throw Error("Bad port number "+a);this.Ma=a}else this.Ma=null;return this};d.II=function(){return null!=this.Ma};d.ki=function(a,b){this.Xi();this.Jd=b?Lj(a,!0):a;return this};d.HI=function(){return!!this.Jd};d.W0=function(){return""!==this.Kg.toString()};
d.Iu=function(a,b){this.Xi();a instanceof Fj?(this.Kg=a,this.Kg.GB(this.he)):(b||(a=Gj(a,Mj)),this.Kg=new Fj(a,null,this.he));return this};d.wX=function(){return this.Kg.toString()};d.Du=function(a,b){this.Xi();this.$i=b?Lj(a):a;return this};d.T0=function(){return!!this.$i};d.Xi=function(){if(this.I1)throw Error("Tried to modify a read-only Uri");};d.GB=function(a){this.he=a;this.Kg&&this.Kg.GB(a);return this};
var Nj=function(a,b){return a instanceof Ej?a.clone():new Ej(a,b)},Lj=function(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""},Gj=function(a,b,c){return r(a)?(a=encodeURI(a).replace(b,Oj),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null},Oj=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)},Hj=/[#\/\?@]/g,Jj=/[\#\?:]/g,Ij=/[\#\?]/g,Mj=/[\#\?@]/g,Kj=/#/g,Fj=function(a,b,c){this.Xa=this.zb=null;this.zh=a||null;this.he=!!c};
Fj.prototype.mg=function(){if(!this.zb&&(this.zb=new I,this.Xa=0,this.zh)){var a=this;Ac(this.zh,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)})}};var Pj=function(a,b,c){b=ie(a);if("undefined"==typeof b)throw Error("Keys are undefined");c=new Fj(null,null,c);a=he(a);for(var e=0;e<b.length;e++){var f=b[e],g=a[e];qa(g)?c.tO(f,g):c.add(f,g)}return c};d=Fj.prototype;d.W=function(){this.mg();return this.Xa};
d.add=function(a,b){this.mg();this.Vl();a=this.Hl(a);var c=this.zb.get(a);c||this.zb.set(a,c=[]);c.push(b);this.Xa+=1;return this};d.remove=function(a){this.mg();a=this.Hl(a);return this.zb.Aa(a)?(this.Vl(),this.Xa-=this.zb.get(a).length,this.zb.remove(a)):!1};d.clear=function(){this.Vl();this.zb=null;this.Xa=0};d.yb=function(){this.mg();return 0==this.Xa};d.Aa=function(a){this.mg();a=this.Hl(a);return this.zb.Aa(a)};d.dl=function(a){var b=this.G();return mb(b,a)};
d.pb=function(){this.mg();for(var a=this.zb.G(),b=this.zb.pb(),c=[],e=0;e<b.length;e++)for(var f=a[e],g=0;g<f.length;g++)c.push(b[e]);return c};d.G=function(a){this.mg();var b=[];if(r(a))this.Aa(a)&&(b=ub(b,this.zb.get(this.Hl(a))));else{a=this.zb.G();for(var c=0;c<a.length;c++)b=ub(b,a[c])}return b};d.set=function(a,b){this.mg();this.Vl();a=this.Hl(a);this.Aa(a)&&(this.Xa-=this.zb.get(a).length);this.zb.set(a,[b]);this.Xa+=1;return this};
d.get=function(a,b){a=a?this.G(a):[];return 0<a.length?String(a[0]):b};d.tO=function(a,b){this.remove(a);0<b.length&&(this.Vl(),this.zb.set(this.Hl(a),C(b)),this.Xa+=b.length)};d.toString=function(){if(this.zh)return this.zh;if(!this.zb)return"";for(var a=[],b=this.zb.pb(),c=0;c<b.length;c++)for(var e=b[c],f=encodeURIComponent(String(e)),e=this.G(e),g=0;g<e.length;g++){var k=f;""!==e[g]&&(k+="="+encodeURIComponent(String(e[g])));a.push(k)}return this.zh=a.join("&")};d.Vl=function(){this.zh=null};
d.clone=function(){var a=new Fj;a.zh=this.zh;this.zb&&(a.zb=this.zb.clone(),a.Xa=this.Xa);return a};d.Hl=function(a){a=String(a);this.he&&(a=a.toLowerCase());return a};d.GB=function(a){a&&!this.he&&(this.mg(),this.Vl(),this.zb.forEach(function(a,c){var b=c.toLowerCase();c!=b&&(this.remove(c),this.tO(b,a))},this));this.he=a};d.extend=function(a){for(var b=0;b<arguments.length;b++)ke(arguments[b],function(a,b){this.add(b,a)},this)};var Qj=function(a){return(a=a.exec(Rb))?a[1]:""},Rj=function(){if(Hh)return Qj(/Firefox\/([0-9.]+)/);if($b||ac||Zb)return sc;if(Lh)return Qj(/Chrome\/([0-9.]+)/);if(Mh&&!(Vb()||D("iPad")||D("iPod")))return Qj(/Version\/([0-9.]+)/);if(Ih||Jh){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(Rb);if(a)return a[1]+"."+a[2]}else if(Kh)return(a=Qj(/Android\s+([0-9.]+)/))?a:Qj(/Version\/([0-9.]+)/);return""}();var Sj=function(a,b,c,e){this.nE=a;this.Rb=b;this.d3=c||null;this.j6=e||null};d=Sj.prototype;d.jJ=function(){return"tab"==this.nE};d.fJ=function(){return"offscreen_tab"==this.nE};d.sC=function(a){return this.jJ()?this.$O():this.fJ()?this.hda():this.fda(a)};
d.$O=function(){var a={audio:this.Rb.captureAudio,video:this.Rb.captureVideo};this.Rb.captureVideo&&(a.videoConstraints={mandatory:{minWidth:this.Rb.minWidth,minHeight:this.Rb.minHeight,maxWidth:this.Rb.maxWidth,maxHeight:this.Rb.maxHeight,maxFrameRate:this.Rb.maxFrameRate,enableAutoThrottling:!0}});return a};d.hda=function(){var a=this.$O();a.presentationId=this.j6;return a};
d.fda=function(a){var b={audio:!1,video:!1};this.Rb.captureVideo&&(b.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,minWidth:this.Rb.minWidth,minHeight:this.Rb.minHeight,maxWidth:this.Rb.maxWidth,maxHeight:this.Rb.maxHeight,maxFrameRate:this.Rb.maxFrameRate}});dj&&this.Rb.captureAudio&&(b.audio={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a}});return b};var Tj=function(a,b){this.wb=a;this.gd=b;this.a=x("mr.cloud.calendar.CalendarService")};d=Tj.prototype;d.NV=function(){var a=this;return this.VW(this.gd.Ze,9E5).then(function(b){a.a.info(a.fG(b.length)+" events discovered before filtering.");return a.XX(b)},function(b){a.a.l("Error getting Hangouts from calendar.",b);return[]})};d.fG=function(a){return 20<a?"20+":a.toString()};d.VW=function(a,b){var c=this,e=Date.now();return this.vW(a,new Date(e),new Date(e+b)).then(function(a){return a.filter(c.G1)})};
d.G1=function(a){return!(!a.start||!a.end||a.start.date||a.end.date||!a.start.dateTime||!a.end.dateTime)};d.vW=function(a,b,c){a=this.wb.Zi(Xh.ih,["calendars",a,"events"],{timeMin:b.toJSON(),timeMax:c.toJSON(),singleEvents:!0});this.a.o("Retrieving Hangouts from Calendar: "+a);return this.wb.mh(a,"GET").then(function(a){return a.items?a.items:[]})};
d.XX=function(a){var b=this;a=a.reduce(function(a,e){if(e.hangoutLink){var c=new Ej(e.hangoutLink),g=b.w5(c.Jd);if(2==g.length){var c=g[0],g=g[1],k,n;-1!=c.indexOf(".")&&(k=g,n=c);a.push(new Hi(g,c,k,n,e.summary))}else b.a.l("Invalid hangout link from calendar event: "+e.hangoutLink)}return a},[]);this.a.info(this.fG(a.length)+" events discovered with Hangout links.");return a};d.w5=function(a){return a.substring(12).split("/")};var Uj=function(a){this.wb=a;this.a=x("mr.cloud.mesi.MesiService")};
Uj.prototype.KV=function(){var a=Yh.ih;.1>Math.random()&&(a=a.replace("v1","v1_preprod"));a=this.wb.Zi(a,["hangouts","search"]);this.a.info("Retrieving Hangouts from MESI: "+a);return this.wb.mh(a,"POST",Vj).then(function(a){var b=[];a.result&&(b=a.result.map(function(a){var b=a.hangout,c,e;b.external_key?(c=b.external_key.value.replace(/@.*/,""),e=b.external_key.service):b.sharing_url&&(e=b.sharing_url.split("/"),c=e[4],e=e[3]);var n=b.meeting_room_name,q;b.meeting_domain?(q=b.meeting_domain,n&&
(c=n,e=q)):"BUSINESS"==b.type&&b.company_title&&(q=b.company_title.toLowerCase());var y=mj("",0);if((a=a.participant)&&0<a.length){var G=a[0].display_name;a=a.reduce(function(a,b){a.add(b.user_id);"ORGANIZER"==b.role&&(G=b.display_name);return a},new ne);y=mj(G,a.W())}return new Hi(c,e,n,q,y,b.hangout_id)}));return b})};var Vj={request_header:{client_version:{client_id:"39"}},search_sources:["0"]};var Wj=function(a,b,c,e){this.rg=a;this.gd=b;this.Eq=c;this.Ub=e};d=Wj.prototype;d.q0=function(a,b,c){var e=this;return this.D8(a,b,c).then(function(a){return e.$_(a,b.id)})};d.h0=function(a){var b=this;return this.Eq.TW().then(function(c){b.Ub.Ld(new nh("TURN_CREDENTIALS",{credentials:c}),a.id)})};
d.D8=function(a,b,c){b=c.deviceId;var e=this.gd.Ze,e=e?new $h(e):void 0;a=a.data;switch(c.Rv){case "owner":Fi(0);break;case "manager":Fi(1);break;case "user":Fi(2);break;case "viewer":Fi(3)}return"viewer"==c.Rv?this.rg.I8(b,a,e):this.rg.L8(b,a,e)};
d.$_=function(a,b){if("done"!=a.state)return Promise.reject(Error("Offer not executed by receiver. State: "+a.state));switch(a.type){case "__cloud_webrtc_session_message__":a=new nh("ANSWER",a.results.sessionDescription);this.Ub.Ld(a,b);break;case "knocking_cloud_webrtc_session_message":Ci(0);a=new nh("KNOCK_ANSWER",a.results.sessionDescription);this.Ub.Ld(a,b);break;case "knock_denied":Ci(1);this.sI(fj,b);break;case "knock_timeout":Ci(2);this.sI(gj,b);break;default:return Promise.reject(Error("Invalid message type: "+
a.type))}return Promise.resolve()};d.sI=function(a,b){a=new ug(a,"warning","dismiss");a.A$(!0);this.Ub.tg().send(a);this.Ub.Ld(new nh("STOP"),b)};var Xj=function(a,b){this.gd=a;this.Ub=b};
Xj.prototype.n0=function(a,b,c){var e=this,f,g;switch(a.type){case "REFRESH_AUTH":return f=c.deviceId,g=c.cB,this.gd.c7().then(function(){e.Ub.Ld(new nh("AUTH_READY",{hangoutId:f,resolvedId:g}),b.id)});case "LOCAL_PRESENT":return f=c.deviceId,g=c.cB,this.Ub.Ld(new nh("AUTH_READY",{hangoutId:f,resolvedId:g,conferenceMode:!a.data.local}),b.id),Promise.resolve();case "STATUS_REQUEST":return this.Ub.Ld(a,b.id),Promise.resolve();case "STATUS_RESPONSE":return this.Ub.Ld(a,b.id,!0),a.data.routeDescription||
this.Ub.Ld(a,b.id),Promise.resolve();case "HANGOUT_INACTIVE":return this.Ub.Bk(b,4,new ug(ij,"warning","dismiss"));case "HANGOUT_INVALID":return this.Ub.Bk(b,3,new ug(jj,"warning","dismiss"));default:return Promise.reject(Error("Unknown type: "+a.type))}};var Yj=function(a,b,c){this.Zk=a;this.Zo=b;this.Ub=c};
Yj.prototype.p6=function(a,b,c,e){var f=this;return new Promise(function(g){switch(a){case "cloud":case "mesi":break;default:throw Error("Unrecognized channel type");}if(!b.type)throw Error("Message has no type");switch(b.type){case "STOP":g(f.Ub.Bk(c,1,null));return;case "SESSION_START_SUCCESS":Di(0);break;case "SESSION_END":break;case "SESSION_FAILURE":Di(1);g(f.Ub.Bk(c,2,new ug(ej,"warning","dismiss")));return;case "__webrtc_stats__":break;case "PRESENTATION_CONNECTION_MESSAGE":f.Ub.Ld(b.data,
c.id,!0);break;case "OFFER":g(f.Zk.q0(b,c,e));return;case "GET_TURN_CREDENTIALS":g(f.Zk.h0(c));return;case "REFRESH_AUTH":case "LOCAL_PRESENT":case "MUTE":case "STATUS_REQUEST":case "STATUS_RESPONSE":case "HANGOUT_INACTIVE":case "HANGOUT_INVALID":g(f.Zo.n0(b,c,e));return;case "new_session":f.Ub.Ld(b,c.id,!0);break;case "remove_session":f.Ub.Ld(b,c.id,!0);f.Ub.terminateRoute(c.id);break;default:throw Error("Unknown type: "+b.type);}g()})};var ak=function(){this.KA=Ya();this.Wj=new Zj(null,null);this.Vj=new Zj(null,null);this.Ax=[];this.ft=this.Uk=0;yh(this)};d=ak.prototype;d.wl=function(a){a=a.toLowerCase();var b=new wi;b.update(a);b.update(this.KA);return"r"+sj(b.digest(),!0)};d.yZ=function(){return this.Wj.model?this.Wj:this.Vj.model?this.Vj:new Zj(null,null)};d.ma=function(){return"SinkUtils"};
d.getData=function(){return[{recentLaunchedDevice:this.Wj,recentDiscoveredDevice:this.Vj},{receiverIdToken:this.KA,fixedIpList:this.Ax.join(","),castControlPort:this.Uk,lastCloudSinkCheckTimeMillis:this.ft}]};
d.$a=function(){var a=vh(this);a&&(this.Wj=a.recentLaunchedDevice||new Zj(null,null),this.Vj=a.recentDiscoveredDevice||new Zj(null,null));if(a=wh(this))this.KA=a.receiverIdToken||Ya(),this.Ax=a.fixedIpList&&a.fixedIpList.split(",")||[],this.Uk=a.castControlPort||0,this.ft=a.lastCloudSinkCheckTimeMillis||0};na(ak);var Zj=function(a,b){this.model=a;this.ip=b};var bk=function(a,b,c,e,f,g,k,n){this.ee=null;this.FE=!1;this.EE=H();this.Gc=[];this.Zf=a?encodeURIComponent(String(a)):null;this.bG=null;!e&&b&&(this.bG=b);this.dS=c||null;this.jr=!e;this.Wr=null!=f?f:null;this.Kt=g||null;this.Wda=!!k;this.cG=n||null};w(bk,Dc);var ck;var dk=Be("https://apis.google.com/js/client.js");dk instanceof Ae&&dk.constructor===Ae&&dk.cR===ye?ck=dk.mC:(z("expected object of type Const, got '"+dk+"'"),ck="type_error:Const");var ek=new Je;ek.AA=ck;d=bk.prototype;
d.init=function(){var a=u(function(a){this.ee=a;var b=ma("client.request",a),c=ma("auth",a);b&&c?this.rI():a.load("client",u(this.rI,this))},this),b=this.SF("gapi");b?a(b.gapi):this.m2(a);return this.EE.promise};d.SF=function(a){for(var b=window,c=ma(a,b);!c&&b!=window.top&&this.aT(b.parent,a);)b=b.parent,c=ma(a,b);return c?b:null};d.aT=function(a,b){try{return!!a&&null!=a.location.href&&Xb(a,b)}catch(c){return!1}};
d.m2=function(a){var b=this.SF("gapi_onload");if(b){var c=b.gapi_onload;b.gapi_onload=function(){c();a(b.gapi)}}else{window.gapi_onload=function(){a(window.gapi)};var e=document.createElement("script");e.src=Ke(ek);this.cG&&Cj(e,Te(this.cG));document.getElementsByTagName("head")[0].appendChild(e)}};d.rI=function(){for(var a=0;a<this.Gc.length;a++)this.Gc[a].sb.resolve(this.GM(this.Gc[a].K7));this.FE=!0;this.EE.resolve(this.ee)};
d.sendRequest=function(a){if(this.FE)return this.GM(a);var b=H();this.Gc.push({K7:a,sb:b});return b.promise};
d.GM=function(a){var b,c,e,f=ma("config.get",this.ee);this.jr||(b=f("googleapis.config/auth/useFirstPartyAuth"),c=f("googleapis.config/auth/useOriginToken"));null!=this.Wr&&(e=f("client/cors"));try{var g=ma("config.update",this.ee);this.jr||(g("googleapis.config/auth/useFirstPartyAuth",!1),g("googleapis.config/auth/useOriginToken",!1));null!=this.Wr&&g("client/cors",this.Wr);var k=ma("client.request",this.ee),n=this.jW();a.headers&&Qb(n,a.headers);var q={headers:n,root:this.dS,path:a.path,method:a.method,
body:a.body},y=a.params||{};this.Zf&&!this.Kt?Qb(y,{key:this.Zf}):this.Kt&&Qb(y,{key:null});Jb(y)||(q.params=y);var G=Kd(k(q));a.callback&&G.then(function(b){a.callback.apply(null,[b.result,b])},function(b){a.callback.apply(null,[b.result,b])});return G}finally{g=ma("config.update",this.ee),this.jr||(g("googleapis.config/auth/useFirstPartyAuth",b),g("googleapis.config/auth/useOriginToken",c)),null!=this.Wr&&g("client/cors",e)}};
d.jW=function(){if(this.jr){if(this.Kt)return{Authorization:"Bearer "+this.Kt};var a=ma("auth.getAuthHeaderValueForFirstParty",this.ee);return{Authorization:this.Wda?a([]):a(),"X-Goog-AuthUser":this.bG}}return{}};var fk=function(a,b,c){Wg(a)||Xg(a);this.Cz=a;this.Rb=b;this.X4=c||null};fk.prototype.wg=function(){return this.Rb};fk.prototype.Kx=function(){return this.Yy()?new Sj("tab",this.Rb):this.gJ()?new Sj("offscreen_tab",this.Rb,this.Cz,this.X4.toString()):new Sj("desktop",this.Rb)};fk.prototype.Yy=function(){return Ug(this.Cz)};fk.prototype.gJ=function(){return Xg(this.Cz)};var gk=function(a,b,c,e,f,g,k){var n=ak.Y().wl(a);this.eb=new Th(n,b,g,k,f);this.deviceId=a;this.Tca=c;this.model=e};gk.prototype.PO=function(a){return mb(this.Tca,a)};var hk=function(a,b,c,e,f){gk.call(this,a,b,["cloud"],"Chrome Streaming Receiver",e);this.Rv=c;this.isAvailable=f};ja(hk,gk);var ik=function(a){var b=a.getService();a.sg()&&(b=a.sg());var c;a.im&&a.Ah()!=a.im&&(c=a.im);gk.call(this,a.getId(),a.Ah(),["mesi"],"Hangout",b,"hangout",c);this.cB=a.ak||""};ja(ik,gk);var jk=function(a){this.gd=a};d=jk.prototype;d.Zi=function(a,b,c){var e="";b.forEach(function(a){e+="/"+encodeURIComponent(a)});a=new Ej(a+e);c&&(c=Pj(c),a.Iu(c));return a};d.mh=function(a,b,c){var e=this;return this.gd.getAuthToken().then(function(f){var g=e.kW(f);return e.XS(g,a,b,c).catch(function(g){if("INVALID_ACCESS_ERROR"==g)return e.wV(f,a,b,c);throw g;})})};d.wV=function(a,b,c,e){var f=this;return this.gd.vV(a).then(function(){return f.mh(b,c,e)})};
d.XS=function(a,b,c,e){var f=this;return new Promise(function(g,k){a.sendRequest(f.TV(b,c,function(a){a&&!a.error?g(a):f.C1(a)?k("INVALID_ACCESS_ERROR"):k(f.s5(a))},e))})};d.C1=function(a){return!!a&&401==a.error.code};d.kW=function(a){a=new bk(void 0,void 0,void 0,!1,!1,a);a.init();return a};d.s5=function(a){return a&&a.error?a.error.errors?a.error.errors[0]:a:Error(a)};d.TV=function(a,b,c,e){a={callback:c,method:b,path:a.toString()};e&&(a.body=e);return a};var kk=function(a){Dc.call(this);this.B=a;this.Ga={}};w(kk,Dc);var lk=[];d=kk.prototype;d.listen=function(a,b,c,e){return this.LJ(a,b,c,e)};d.h2=function(a,b,c,e,f){return this.LJ(a,b,c,e,f)};d.LJ=function(a,b,c,e,f){qa(b)||(b&&(lk[0]=b.toString()),b=lk);for(var g=0;g<b.length;g++){var k=Xc(a,b[g],c||this.handleEvent,e||!1,f||this.B||this);if(!k)break;this.Ga[k.key]=k}return this};d.qp=function(a,b,c,e){return this.JJ(a,b,c,e)};
d.JJ=function(a,b,c,e,f){if(qa(b))for(var g=0;g<b.length;g++)this.JJ(a,b[g],c,e,f);else{a=dd(a,b,c||this.handleEvent,e,f||this.B||this);if(!a)return this;this.Ga[a.key]=a}return this};d.Yc=function(a,b,c,e,f){if(qa(b))for(var g=0;g<b.length;g++)this.Yc(a,b[g],c,e,f);else c=c||this.handleEvent,f=f||this.B||this,c=Yc(c),e=!!e,b=Pc(a)?a.Go(b,c,e,f):a?(a=$c(a))?a.Go(b,c,e,f):null:null,b&&(fd(b),delete this.Ga[b.key]);return this};
d.removeAll=function(){Eb(this.Ga,function(a,b){this.Ga.hasOwnProperty(b)&&fd(a)},this);this.Ga={}};d.V=function(){kk.U.V.call(this);this.removeAll()};d.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var mk=function(a,b,c){this.Mda=a;this.nd=b;this.Zg=new I;this.Pu=new I;this.bm=null;this.T2=c};d=mk.prototype;d.fe=function(){this.cT()&&(this.bm=Date.now(),this.ro());return this.Zg.G()};d.Hn=function(a){this.Zg.set(a.eb.id,a)};d.Zj=function(a){return this.Zg.remove(a)};d.fa=function(a){return this.Zg.get(a,null)};d.cT=function(){var a=this.bm+this.T2;return null==this.bm||a<Date.now()};d.ro=function(){var a=this;return this.Mda().then(function(b){a.Lda(b)})};
d.Lda=function(a){var b=new I(this.Zg),c=new I,e=new I,f=[],g=[];a.forEach(function(a){var k=a.eb.id;c.set(k,a);e.set(k,a.deviceId);b.Aa(k)?b.Aa(k)&&JSON.stringify(b.get(k))!=JSON.stringify(a)&&g.push(a.eb):f.push(a.eb);b.remove(k)});a=b.pb().map(function(a){return b.get(a).eb});this.Pu.clear();this.Pu=e;this.Zg.clear();this.Zg=c;this.$S(f,g,a)};d.$S=function(a,b,c){0<a.length&&this.nd.bA(a);0<b.length&&this.nd.Uc(b);0<c.length&&this.nd.Ne(c)};
d.b=function(){return new nk(this.Zg.b(),this.Pu.b(),this.bm)};d.NJ=function(a){for(var b in a.sinks){var c=a.sinks[b],e=null;"Hangout"==c.model?(e=c.deviceId.split("@"),e=new ik(new Hi(e[0],e[1],c.eb.description,c.eb.domain,c.eb.friendlyName,c.cB))):"Chrome Streaming Receiver"==c.model&&(e=new hk(c.deviceId,c.eb.friendlyName,c.Rv,c.eb.domain,c.isAvailable));this.Zg.set(b,e)}for(b in a.JE)this.Pu.set(b,a.JE[b]);a.qJ&&(this.bm=a.qJ)};d.HB=function(a){this.bm=a};
var nk=function(a,b,c){this.sinks=a;this.JE=b;this.qJ=c};var ok=function(a){this.hx=a;this.a=x("mr.cloud.messaging.GcmMessageHandler")};ok.prototype.onMessage=function(a){var b=this;a=JSON.parse(a.data.notification);var c=ak.Y();a.events.forEach(function(a){if(a.deviceId){var e=c.wl(a.deviceId);switch(a.type){case "deviceCreated":b.G3(a,e);break;case "deviceUpdated":b.L3(a,e);break;case "deviceDeleted":b.I3(e);break;default:b.a.o(function(){return"[unhandled event] "+JSON.stringify(a)})}}else b.a.error("Device ID not provided")})};
ok.prototype.G3=function(a,b){var c=hi(a,"statePatch","_cloudCast","settings","receiverName");"string"!=typeof c?this.a.error("Receiver name not a string: "+c):(a=new hk(a.deviceId,c,"owner","default",!0),this.hx.F3({sinkId:b,cloudSink:a}))};ok.prototype.L3=function(a,b){a=hi(a,"statePatch","_cloudCast","appStatus");"string"!=typeof a?this.a.error("App status not a string: "+a):this.hx.K3({sinkId:b,isAvailable:"available"==a})};ok.prototype.I3=function(a){this.hx.H3({sinkId:a})};var pk=function(a,b){this.Rw=a;this.nd=b;this.we=new mk(this.ro.bind(this),b,2E4);this.dG=new ok(this);Ti().addListener();yh(this);jh("mr.cloud.discovery.CloudSinkDiscoveryService",this)};ja(pk,$g);d=pk.prototype;d.fe=function(){var a=this;this.Rw.i7().then(function(b){a.Rw.subscribe(b)},function(){});return this.we.fe().filter(function(a){return a.isAvailable})};d.fa=function(a){return this.we.fa(a)};
d.handleEvent=function(a,b){for(var c=[],e=1;e<arguments.length;++e)c[e-1]=arguments[e];if(a==chrome.gcm.onMessage)this.dG.onMessage.apply(this.dG,[].concat(ka(c)));else throw Error("Unhandled event: expected chrome.gcm.onMessage");};d.ro=function(){return this.Rw.e2().then(function(a){return a.map(function(a){Ig("MediaRouter.Cloud.CloudReceiver.Sink.Discovered");var b=a.isAvailable()&&!a.H1();return new hk(a.getId(),a.Ah(),a.Mb.personalizedInfo.maxRole,"default",b)})})};d.ma=function(){return"CloudSinkDiscoveryService"};
d.getData=function(){return[{cache:this.we.b()}]};d.$a=function(){var a=vh(this);a&&this.we.NJ(a.cache)};d.F3=function(a){a=a.Zka;this.we.Hn(a);this.we.HB(Date.now());this.nd.bA([a.eb])};d.K3=function(a){var b=this.we.fa(a.sinkId);b&&(b.isAvailable=a.isAvailable,this.we.HB(Date.now()),this.nd.Uc([b.eb]))};d.H3=function(a){if(a=this.we.fa(a.sinkId))this.we.Zj(a.eb.id),this.we.HB(Date.now()),this.nd.Ne([a.eb])};var sk=function(a,b,c){if(!qk){lf();var e=kf;e.Gu(hf);e.IR(rk);qk=!0}this.WS=a;this.O2=b;this.Ql=new mk(this.ro.bind(this),c,2E4);this.tp=new I;yh(this)},rk=function(a){Ea({m:a.v2,level:Ha(a.zj.value),time:a.dda,message:a.getMessage(),og:a.ux})};sk.prototype.AD=function(a,b){a=new Hi(a,b,a,b);this.tp.set(a.getId(),a);return a};sk.prototype.addManualHangout=sk.prototype.AD;sk.prototype.x7=function(a,b){this.yz(new Hi(a,b,a,b))};sk.prototype.removeManualHangout=sk.prototype.x7;d=sk.prototype;d.fe=function(){return this.Ql.fe()};
d.fa=function(a){return this.Ql.fa(a)};d.ro=function(){var a=this;this.a.info("Fetching hangouts");return ii([this.O2.KV(),this.WS.NV()]).then(function(b){var c=a.tp.G().slice();b.forEach(function(b){b.hs?c=c.concat(b.value):a.a.error("Error discovering Hangouts",b.reason)});var e=c.reduce(function(a,b){var c=a[b.getId()];c?c.merge(b):c=b;a[c.getId()]=c;return a},{});return Object.keys(e).map(function(b){b=e[b];Ig("MediaRouter.Cloud.Hangout.Sink.Discovered");return a.yz(b)})})};d.yz=function(a){return new ik(a)};
d.LR=function(a){a=this.AD(a.input,a.domain);a=this.yz(a);this.Ql.Hn(a);return a.eb};d.w7=function(a){return this.tp.remove(a.deviceId)?(this.Ql.Zj(a.eb.id),!0):!1};d.ma=function(){return"HangoutSinkDiscoveryService"};d.getData=function(){return[{cache:this.Ql.b(),manualHangouts:this.tp.b()}]};d.$a=function(){var a=vh(this);if(a){this.Ql.NJ(a.cache);for(var b in a.manualHangouts){var c=a.manualHangouts[b];this.tp.set(b,new Hi(c.nJ,c.Nd,c.im,c.sl,c.Ye,c.ak))}}};d.a=x("mr.cloud.discovery.HangoutSinkDiscoveryService");
var qk=!1;var tk=function(a){this.a=x("mr.cloud.CredentialService");this.wb=a};tk.prototype.TW=function(){var a=this,b=new xc,c=Zh.ih+"/iceconfig?key="+Zh.pda;this.a.info("Requesting TURN credentials from "+c);var e=xf(c,function(){return a.T4(e,b)},"POST",void 0,{"Content-Type":"application/json"});return b.promise};tk.prototype.T4=function(a,b){a.ie()?(this.a.info("Got TURN credentials: "+a.hj()),b.resolve(this.O3(a.MZ()))):b.resolve(this.P3(null))};
tk.prototype.O3=function(a){try{var b=[];a.iceServers.forEach(function(a){a.urls.forEach(function(c){0==c.indexOf("turn:")&&b.push({url:c,credential:a.credential,username:a.username})})});return b}catch(c){return this.a.error("Error parsing TURN credentials.",c),[]}};tk.prototype.P3=function(a){this.a.error("XHR failed fetching TURN credentials.",a);return[]};var uk=function(){this.Eq=this.Se=this.jm=this.Zo=this.Zk=this.rg=this.Hy=this.Bw=this.Ez=this.Sw=this.Qw=this.wb=this.kw=null};d=uk.prototype;d.Fl=function(){null==this.kw&&(this.kw=new Ni);return this.kw};d.Eo=function(){null==this.wb&&(this.wb=new jk(this.Fl()));return this.wb};d.MW=function(){null==this.Qw&&(this.Qw=new Li(this.Eo()));return this.Qw};d.QW=function(a){null==this.Sw&&(this.Sw=new pk(this.MW(),a));return this.Sw};d.NY=function(){null==this.Ez&&(this.Ez=new Uj(this.Eo()));return this.Ez};
d.wW=function(){null==this.Bw&&(this.Bw=new Tj(this.Eo(),this.Fl()));return this.Bw};d.WX=function(a){null==this.Hy&&(this.Hy=new sk(this.wW(),this.NY(),a));return this.Hy};d.VG=function(){null==this.rg&&(this.rg=new Ji(this.Eo()));return this.rg};d.OW=function(a){null==this.Zk&&(this.Zk=new Wj(this.VG(),this.Fl(),this.y_(),a));return this.Zk};d.PX=function(a){null==this.Zo&&(this.Zo=new Xj(this.Fl(),a));return this.Zo};d.OY=function(a){null==this.jm&&(this.jm=new Yj(this.OW(a),this.PX(a),a));return this.jm};
d.b_=function(){null==this.Se&&(this.Se=new Pi);return this.Se};d.y_=function(){null==this.Eq&&(this.Eq=new tk(this.Eo()));return this.Eq};na(uk);
